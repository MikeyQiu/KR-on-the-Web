Realistic Ultrasonic Environment Simulation Using Conditional
Generative Adversarial Networks

Maximilian P¨opperl, Raghavendra Gulagundi, Senthil Yogamani and Stefan Milz
Valeo Schalter und Sensoren GmbH
Kronach, Germany
maximilian.poepperl@valeo.com

9
1
0
2
 
b
e
F
 
6
2
 
 
]

V
C
.
s
c
[
 
 
1
v
2
4
8
9
0
.
2
0
9
1
:
v
i
X
r
a

Abstract— Recently, realistic data augmentation using neural
networks especially generative neural networks (GAN) has
achieved outstanding results. The communities main research
focus is visual
image processing. However, automotive cars
and robots are equipped with a large suite of sensors to
achieve a high redundancy. In addition to others, ultrasonic
sensors are often used due to their low-costs and reliable near
ﬁeld distance measuring capabilities. Hence, Pattern recognition
needs to be applied to ultrasonic signals as well. Machine
Learning requires extensive data sets and those measurements
are time-consuming, expensive and not ﬂexible to hardware
and environmental changes. On the other hand, there exists no
method to simulate those signals deterministically. We present a
novel approach for synthetic ultrasonic signal simulation using
conditional GANs (cGANs). For the best of our knowledge,
we present the ﬁrst realistic data augmentation for automotive
ultrasonics. The performance of cGANs allows us to bring
the realistic environment simulation to a new level. By using
setup and environmental parameters as condition, the proposed
approach is ﬂexible to external
inﬂuences. Due to the low
complexity and time effort for data generation, we outperform
other simulation algorithms, such as ﬁnite element method. We
verify the outstanding accuracy and realism of our method
by applying a detailed statistical analysis and comparing the
generated data to an extensive amount of measured signals.

I. INTRODUCTION

Ultrasonic sensors are used in a wide ﬁeld of applications.
Although high performance sensor solutions are available in
medical applications [1], automotive and robotic scenarios
prefer low-cost versions [2], [3]. As the production costs are
low, ultrasonic sensors are widely spread in such scenarios.
However, the low-cost realization restricts the functionality,
so that ultrasonic sensors are mainly known as reliable near-
range distance sensors [4].

To keep up with the current requirements for autonomous
driving and autonomous robot navigation, a simple distance
measurement is not sufﬁcient anymore [5]. Further informa-
tion about the environment, e.g. ground type, and about the
reﬂecting object, e.g. height and width, is required. Simulta-
neously the low cost advantage of ultrasonic sensors needs
to be preserved, so that hardware changes are prevented.
Consequently, the only way to improve the performance of
those sensors is the development of novel algorithms, e.g.
based on machine learning [6].

Pattern recognition algorithms basically require a set of
labeled data [7]. Creating a large data set based on real
measurements in different scenarios is time consuming and

costly. Furthermore it provides a low ﬂexibility, if minor
changes are made in the hardware setup. Hence, synthetically
generated data is preferable, as it can be adapted easily and
a large amount of ultrasonic signals can be generated with
low temporal effort.

The reﬂections at objects in the environment are sat-
isfactorily modeled by quasi-optical algorithms (e.g. ray-
tracing) [8]. The modeling of simulations at
the ground
surface is much more complex. Standard methods, such as
ﬁnite element method, require a huge amount of storage,
processing power and computation time. This is not sensible
in order to create large data sets. Statistical methods can
overcome this problem. Hence, we propose a two step
solution for a complete ultrasonic signal simulation. As
exemplarily shown in Fig. 1 the reﬂections of objects are
generated deterministically, whereas the ground reﬂections
are generated by a statistical algorithm. Using superposition
principle, both steps can be merged.

A possibility of a statistical algorithm for the given pur-
pose is a cGAN [9]. cGANs allow a random generation of
the ground reﬂections with respect to particular conditions.
Although the training of the neural network is complex,
the sample generation is of low complexity [10]. Thus,
the approach is suited well to generate large data sets or
simulate ultrasonic sensor data. By using suitable conditions,
a ﬂexibility regarding hardware or environmental changes
can be achieved.

Consequently, cGANs seem to be a satisfactory approach
for ultrasonic ground reﬂection generation. We evaluate the
performance of the network by comparing the statistical
properties of the generated data to ones of real measure-
ments. By changing the hardware setup and the environmen-
tal conditions, we additionally verify the ﬂexibility of the

Fig. 1. Simulation concept using cGANs to generate ground reﬂections

II. MEASUREMENTS

Fig. 3. Measurement setup with ultrasonic sensor and robot arm on gravel

we change the ﬁeld of view of the sensor. By rotating the
robot arm by 120◦ using 21 steps, the reﬂecting ground
areas are sufﬁciently changed. In addition, we conduct 10
measurements at each sensor position and installation angle.
These measurement vary due to environmental inﬂuences,
such as wind and environmental noise. The measurement
setup is shown in Fig. 3.

In summary, 129,360 measured ultrasonic signals are
available for training the neural network and for data evalua-
tion. As ultrasonic data is basically one dimensional and the
number of necessary samples per signal is low compared
to image processing applications, the amount of measured
signals is sufﬁcient to train the networks.

C. Measurement results

Two samples of the measurements are shown in Fig.
4. Each signal consists of 9,900 samples with a sampling
frequency of 330 kHz. Oversampling is applied to handle
Doppler shift in dynamic scenarios. At the beginning, the
reverberation time of the membrane is clearly visible. This

Fig. 2. Valeo ultrasonic sensor that is used for measurements

proposed approach.

In a ﬁrst step, measurements are conducted. One the one
hand measurements are required to train the neural network.
For this purpose, we need to cover all relevant scenarios
with a sufﬁcient amount of ultrasonic signals. On the other
hand the measurements are needed to evaluate the generated
signals.

A. Measurement equipment

For the measurements we use a standard ultrasonic sensor
that is used for parking assistance. Automotive ultrasonic
sensors usually only provide a binary signal output due to
limitations in data communications. These binary signals
depend on previously set thresholds. Furthermore the 1-bit
quantization is lossy and drastically limits the performance
of signal processing algorithms. To avoid the dependency on
the thresholds and the disadvantages of the binary output,
an extended version of the sensor is used that allows the
acquisition of the piezoelectric signal. The sensor uses a
modulated pulse at a center frequency of 51.2 kHz. The
bandwidth of the pulse is about 3 kHz. We use a monostatic
measurement setup, where the transmitting sensor is also
used for receiving the reﬂected signals. The sensor is shown
in Fig. 2.

As a huge amount of measurement data is needed to train
the network and to evaluate the data, we use a robot arm
to automate the measurements. The DOBOT magician that
is used has four rotation axis. This enables different sensor
heights above the ground. Furthermore, different angles
relative to the ground plane are usable. The angle relative to
the ground surface is named as beta angle in the following.
In addition, the rotation of the complete robot arm allows to
change the ﬁled of view automatically.

B. Measurement setup

To create sensor setups that are similar to automotive
scenarios, the sensor is ﬁxed to the robot arm. The robot arm
is placed on a platform, as the amplitude of the sensor height
is 27 cm only. By using a suitable platform, sensor heights
between 35 cm and 62 cm are achieved. The step size in the
measurements is 1 cm. The beta angle varies between −8◦
and 2◦ with a step size of 1◦. The measurements are done on
gravel as well as on asphalt. To achieve a sufﬁcient diversity,

Fig. 4. Raw data samples from asphalt (a) and gravel measurements (b)
with similar sensor height and installation angle

is typical for a monostatic ultrasonic setup. Subsequently,
the ground reﬂections appear. The ground reﬂections vary
by changing the measurement setup and the ground type. By
comparing Fig. 4 (a) and (b), the differences in the ground
reﬂections become clear. Fig. 4 (a) shows a typical signal
on asphalt, whereas Fig. 4 (b) is typical for gravel. For
comparability the sensor height and angle are the same in
both cases, but similar changes can be observed if the sensor
height and angle are changed. To ease the analysis of these
effects, it is sensible to process the ultrasonic signal in order
to remove the carrier frequency and to improve signal quality.

III. DATA PROCESSING

The applied processing of the raw measurement data can
be divided in two steps. At ﬁrst a conventional signal process-
ing is applied. This step is also used on the measurement data
before training the network, as the signal processing reduces
the needed number of samples per measurements as well as
the computational effort for the training and the ﬁnal predic-
tion, respectively. In a second step, the measurement data is
analyzed by calculating statistical properties. The statistical
properties allow a detailed description of the inﬂuence of
the hardware setup on the measured signal. Furthermore the
statistic analysis can be used to meaningfully compare the
synthetic with the measured data.

A. Signal processing

The aims of the signal processing of the measured signals
are on the one hand the improvement of the signal quality
and on the other hand the minimization of samples. In order
to reduce noise in the signal and remove a possible DC offset,
we apply a high order ﬁnite response bandpass sb:

sp1 = sr ∗ sb

(1)

The noise reduced signal sp1 is mixed to complex baseband
the carrier frequency fc is removed.
afterwards, so that
This process is basic to reduce the sampling frequency
drastically and still meet the Nyquist theorem [11]. The
complex baseband signal sp2 can be calculated from:

In order to suppress image frequencies and further improve
signal quality, a ﬁnite impulse response lowpass sl is applied.
The result of the processing steps sp can be written as

sp = sp2 ∗ sl

(3)

The processed signal is the complex envelope of the mea-
sured raw signal. As the carrier frequency is removed,
the required sampling frequency depends on the signal
bandwidth and the allowed Doppler shift only. We use a
sampling frequency of 20 kHz. The resulting number of
samples per measurement is only 583. This low number
of samples is advantageous for training the neural network.
If the acceptable Doppler shift is reduced or completely
neglected, the number of samples can be further reduced.

The envelope of the signal is still complex valued. To
further reduce the complexity of the neural network, we only

Fig. 5. Absolute value of the envelope of the sample signals of Fig. 4 after
signal processing

use the absolute value of the envelope. This is sensible for
most applications, as the analysis of the absolute value is suf-
ﬁcient and the additional information of the complex values
are not required. In addition, if the number of quantization
bits per sample is limited, the quantization of the absolute
value is more effective since there are only positive valued
numbers.

The processing results of the sample measurement signals
of Fig. 4 are shown in Fig. 5. The reverberation time is
removed. The differences between the ground reﬂections can
now be seen more clearly. The gravel reﬂections have more
high peaks. The signal range that is mainly affected by the
ground reﬂections is similar. The signal range changes if the
sensor height or the beta angle are varied. The behavior of the
ground reﬂections with respect to the sensor height is given
in Fig. 6. The plot shows the maximum amplitudes for all
measurements with the particular parameters. The amplitude
values of the ground reﬂections decrease with increasing
height. In addition, the range, where the maximum of the
ground reﬂections appears, moves to higher distances. This
is just because the distance to ground plane increases with
increasing sensor height. To describe these observations in
detail, a statistical analysis of the data is necessary.

B. Statistical data decomposition

Fig. 6.
36 cm (blue), 44 cm (red), 52 cm (yellow), 60 cm (purple)

Behavior of the ground reﬂections for different sensor heights:

sp2 = sp1 · exp[−2jπfct]

(2)

Since we use statistical methods to describe the reﬂections
of the ground surface, the distribution function of the signal

Fig. 7. Normalized histograms (blue) and ﬁtted distribution functions (red)
for measurements on gravel with a sensor height of 36 cm and a beta angle
of 0◦ for a range from 0.5 m to 0.75 m in (a) and from 1.5 m to 1.75 m
in (b)

Fig. 8. Behavior of the shape parameter k in (a) and of the scale parameter
θ in (b) of gamma distribution for measurements on gravel and a distance
bin at 0.5 m to 0.75 m

belief neural networks [12] or deep Boltzmann machines
[13], GANs provide different advantages while training as
well as in generation performance. Furthermore GANs allow
the usage of an additional condition. This means, beside a
straightforward data generation, GANs are able to consider
additional inputs, so that the generated output can be adapted
to certain scenarios. We use the sensor height, beta angle
and ground type as condition. Thus we are able to handle all
variations of the measurements.

A. Architecture

An overview of the used network architecture is shown in
Fig. 9. To train the cGAN, two separate neural networks are
used. Of course a generative neural network G is necessary.
We use a simple multilayer perceptron (MLP) for this
purpose. The network consists of 4 fully connected layers
that use a leaky rectiﬁed linear unit (ReLU) as activation
function and a fully connected output layer with a hyperbolic
tangent as activation function. The network takes a random
noise vector z and a conditional vector x as input. The
conditional vector is a 1×3 vector that is concatenated to
the random vector. The height and angle are both normalized,

is a starting point for a statistical analysis. As visible in
Fig. 5, the amplitude values differ with varying delay. Thus,
evaluating the amplitude distribution of the complete signal
is not sensible. We propose to divide the signal into different
bins. We choose the bins according to the object distance.
Each bin covers a range of 0.25 m. For each distance bin
the amplitude distribution is calculated. Two samples for
different distance bins are shown in Fig. 7.

The histograms show a characteristic behavior that de-
pends on the measurement setup. This is already visible
from Fig. 6. The ground reﬂections have a distance range,
where they mainly appear. In this area the amplitude spread
is much higher than in other distance bins of the signal.
The sensor height and the beta angle inﬂuence the amplitude
spread as well as the position of the maximum amplitude
frequency. The ground type usually only inﬂuences the
amplitude spread. To mathematically describe these effects
and enable a comparability with synthetic data, we ﬁt a
distribution function to the histograms of the measurement
data.

Basically the amplitude distribution can be modeled by
a Gamma distribution. This has been validated by a χ2-
test. The Gamma distributions allows the description of the
amplitude distribution using only two parameters. We use the
shape parameter k and the scale parameter θ to parameterize
the Gamma distribution.

If we evaluate the amplitude distributions of the measure-
ments, a predictable behavior of both parameters is found.
The behavior of both parameters for gravel and the distance
range of 0.5 m to 0.75 m ares shown in Fig. 8. A similar
behavior can be found for other relevant distance bins and
also for asphalt. The predictability of both parameters and
the clear tendency allow an interpolation for arbitrary sensor
heights and beta angles. Furthermore, this allows a detailed
evaluation of synthetically generated data and especially the
generalization of machine learning based approaches.

IV. GENERATIVE ADVERSARIAL NETWORK

GANs are one possibility to train generative neural net-
works. In contrast to other generative methods, e.g. deep

Fig. 9. Concept of training the cGAN and draft of the architecture of the
generator and discriminator network

whereas the ground type is provided as boolean value. We
use a normalized signal vector as output y. The normalization
is needed due to the values range of the hyperbolic tangent.
The discriminative network D that is needed for training is
also a MLP that consists of 3 fully connected layers using a
leaky ReLU activation function and a fully connected output
layer with a softmax activation.

During training the generator tries to generate realistic
ultrasonic signals based on the random noise vector and the
given condition, as the discriminator is trained to distinguish
the generated from real measurements. While the generator
tries to fool the discriminator with more and more realistic
signals, the capability of the discriminator to detect generated
signals also increases. Thus, the aim of the training is to
minimize the loss of the generator and to maximize the loss
of the discriminator. Due to the well-known problem, we can
use a standard objective for cGANs [14]:

L = Ex,y [log D (x, y)] + Ex,z [log D (x, G (x, z))]

(4)

As described above, the training of the generator results in:

G∗ = arg min
G

max
D

L

(5)

The ultrasonic signal vectors are of size 1×583 only. Thus,
100 iterations are sufﬁcient
the network
converges. The implementation of the cGAN in done using
PyTorch [15].

to ensure that

V. VALIDATION OF SIMULATION DATA

After training the neural network, we can just use the
generator network to quickly synthesize ultrasonic signals
with ground reﬂections. Few examples for a gravel scenario
and a beta angle of 0◦ are shown in Fig. 10. The generated
signals show a similar course as the signals in Fig. 6. But the
differences between the signals in both ﬁgures also verify
that
the network generates novel ultrasonic signals. Fur-
thermore the behavior of the ground reﬂections is modeled
correctly using the cGAN, as the amplitude decreases and the
range is shifted with increasing sensor height. A difference
between the generated data and the measurement data, is the
available signal bandwidth. The generated signals show a
higher signal bandwidth in contrast to the measurement data.
However, this problem can be solved by applying a lowpass
ﬁlter. To further evaluate the generated data, we apply the
statistical processing.

Fig. 11 shows the histogram for the same parameters as
in Fig. 7. The envelope of the histogram still allows to ﬁt a
Gamma distribution function to the histogram. This can be
seen from the red curve in Fig. 11 and has been veriﬁed using
a χ2-test. In contrast to the measurements, the histograms
are smoother. Especially, Fig. 11 (a) has less outliers than
the equivalent histogram of the measurements. The smooth
shape is also an indicator to conﬁrm the randomness of the
generated data. However, to give a more precise evaluation of
the generated data, we analyze the parameters of the Gamma
distribution function that is ﬁtted to the histograms.

To validate the generated data clearly, we exemplarily
choose the distance bin between 0.5 m and 0.75 m for a

Fig. 10. Behavior of the generated ground reﬂections for different sensor
heights: 36 cm (blue), 44 cm (red), 52 cm (yellow), 60 cm (purple)

beta angle of 0◦. The results for gravel are shown in Fig.
12. The parameters for the measured data are plotted in
blue, whereas the parameters for the generated data are
plotted in red. Both parameters have a high matching. Hence,
the generated data is based on a very similar probability
distribution. Consequently, the cGAN is able to model the
ground reﬂections of ultrasonic signals precisely.

To further emphasize the high capability of cGANs to syn-
thetically generate ultrasonic signals, the Gamma parameters
of an asphalt scenario are evaluated. The data is generated
with the same generator network. The change in the ground
surface is just applied in the condition vector. The results
for the distance bin at 1.5 m to 1.75 m are shown in Fig.
13. The plotted curves of the parameters of the gamma
distribution of the measured and generated signals again
show a good matching. Hence, the network is able to handle
also different ground types. Furthermore, the results show
that the good matching of the parameters is not limited to
a certain distance bin, but a generalization over all distance
bins is achieved. This is important to not only create ground
reﬂections at a particular delay. Consequently the proposed
approach is able to generate realistic ultrasonic signals for
complete environments without additional objects.

Fig. 11. Normalized histograms (blue) and ﬁtted distribution functions
(red) for generated data on gravel with a sensor height of 36 cm and a beta
angle of 0◦ for a range from 0.5 m to 0.75 m in (a) and from 1.5 m to
1.75 m in (b)

development of machine learning algorithms in ultrasonics
and additionally opens up a new ﬁeld of novel methods that
require online data acquisition.

ACKNOWLEDGMENT

For his constructive comments and input, we thank Martin
Simon and Johannes Petzold. Further we are grateful to
Paul Rostocki for providing the ultrasonic sensors and Dr.
Heinrich Gotzig for the technical supervising.

REFERENCES

[1] A. Fenster, D. B. Downey, and H. N. Cardinal, “Three-dimensional

ultrasound imaging,” Phys. Med. Biol, vol. 46, pp. R67–R99, 2001.

[2] S. Jeong, C. Choi, J. Oh, P. Yoon, B. Kim, M. Kim, and K. Lee, “Low
cost design of parallel parking assist system based on an ultrasonic
sensor,” International Journal of Automotive Technology, vol. 11,
no. 3, pp. 409–416, 2010.

[3] S. Flores, J. Geiß, and M. Vossiek, “An ultrasonic sensor network
for high-quality range-bearing-based indoor positioning,” in 2016
IEEE/ION Position, Location and Navigation Symposium (PLANS),
April 2016, pp. 572–576.

[4] T. Mohammad, “Using ultrasonic and infrared sensors for distance
measurement,” World Academy of Science, Engineering and Technol-
ogy, vol. 51, pp. 293–299, 2009.

[5] W. Xu, C. Yan, W. Jia, X. Ji, and J. Liu, “Analyzing and enhancing the
security of ultrasonic sensors for autonomous vehicles,” IEEE Internet
of Things Journal, pp. 1–1, 2018.

[6] E. U. Warriach and C. Claudel, “Poster abstract: A machine learning
approach for vehicle classiﬁcation using passive infrared and ultrasonic
sensors,” in 2013 ACM/IEEE International Conference on Information
Processing in Sensor Networks (IPSN), Apr. 2013, pp. 333–334.
[7] S. Milz, “Aerial ganeration: Towards realistic data augmentation using
conditional gan,” in 2nd International Workshop on Computer Vision
for UAVs, Sept. 2018.

[8] S. Zeroug, “Corrections to complex ray tracing for modeling ul-
trasonic beam interaction with single interfaces when the reﬂec-
tion/transmission coefﬁcient vanishes,” in 2000 IEEE Ultrason-
ics Symposium. Proceedings. An International Symposium (Cat.
No.00CH37121), vol. 1, Oct 2000, pp. 831–834 vol.1.

[9] M. Mirza and S. Osindero, “Conditional generative adversarial nets,”

2014.

[10] I. J. Goodfellow, J. Pouget-Abadie, M. Mirza, B. Xu, D. Warde-
Farley, S. Ozair, A. Courville, and Y. Bengio, “Generative adversarial
networks,” 2014.

[11] J. Proakis, Digital Communications, ser. Electrical engineering series.
[Online]. Available: https://books.google.de/

McGraw-Hill, 2001.
books?id=sbr8QwAACAAJ

[12] G. E. Hinton, S. Osindero, and Y.-W. Teh, “A fast learning algorithm
for deep belief nets,” Neural computation, vol. 18, no. 7, pp. 1527–
1554, 2006.

[13] N. Srivastava and R. R. Salakhutdinov, “Multimodal learning with
deep boltzmann machines,” in Advances in neural information pro-
cessing systems, 2012, pp. 2222–2230.

[14] P. Isola, J.-Y. Zhu, T. Zhou, and A. A. Efros, “Image-to-image

translation with conditional adversarial networks,” 2016.

[15] A. Paszke, S. Gross, S. Chintala, G. Chanan, E. Yang, Z. DeVito,
Z. Lin, A. Desmaison, L. Antiga, and A. Lerer, “Automatic differen-
tiation in pytorch,” 2017.

Fig. 12. Shape k (a) and scale θ (b) of the ﬁtted Gamma distribution for
different sensor heights, a beta angle of 0◦ on gravel for a range of 0.5 m
to 0.75 m for measured data (blue) and generated data (red)

VI. CONCLUSION

The use of GANs for synthetic image generation is well
known. We adapted this approach for ultrasonic data for the
ﬁrst time. This novel approach enables a new level of realistic
simulation of the environment in ultrasonic scenarios. To
handle additional setup parameters, such as sensor height,
installation angle or ground type, we used cGANs for data
generation. We veriﬁed our approach by comparing the
statistical properties of measurements and generated data.
For all analyzed scenarios and parameters, the cGANs reach
outstandingly realistic results. Hence, cGANs provide a
extremely effective and fast method to provide a high amount
of random ground reﬂections that are usable for ultrasonic
signal simulation.

Due to the amazing performance of the proposed method,
novel possibilities for the development of machine learning
algorithms in automotive scenarios arise. Beside a speeding
up of the algorithm training and evaluation, also online
data generation is enabled. This allows an easy and time-
effective reﬁnement of methods. Furthermore there a new
opportunities to calibrate sensor setups with respect to the
environment online with a minimum time effort. To sum up,
the proposed method is quantum leap towards an effective

Fig. 13. Shape k (a) and scale θ (b) of the ﬁtted Gamma distribution for
different sensor heights, a beta angle of 0◦ on asphalt for a range of 1.5 m
to 1.75 m for measured data (blue) and generated data (red)

