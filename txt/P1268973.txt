Image-embodied Knowledge Representation Learning

Ruobing Xie1, Zhiyuan Liu1,2∗, Huanbo Luan1, Maosong Sun1,2
1 Department of Computer Science and Technology,
State Key Lab on Intelligent Technology and Systems,
National Lab for Information Science and Technology, Tsinghua University, Beijing, China
2 Jiangsu Collaborative Innovation Center for Language Ability,
Jiangsu Normal University, Xuzhou 221009 China

information in triple facts, regardless of rich external infor-
mation located in entity images.

7
1
0
2
 
y
a
M
 
2
2
 
 
]

V
C
.
s
c
[
 
 
2
v
8
2
0
7
0
.
9
0
6
1
:
v
i
X
r
a

Abstract

Entity images could provide signiﬁcant visual in-
formation for knowledge representation learning.
Most conventional methods learn knowledge rep-
resentations merely from structured triples, ignor-
ing rich visual information extracted from entity
images. In this paper, we propose a novel Image-
embodied Knowledge Representation Learning
model (IKRL), where knowledge representations
are learned with both triple facts and images.
More speciﬁcally, we ﬁrst construct representa-
tions for all images of an entity with a neural im-
age encoder. These image representations are then
integrated into an aggregated image-based repre-
sentation via an attention-based method. We eval-
uate our IKRL models on knowledge graph com-
pletion and triple classiﬁcation. Experimental re-
sults demonstrate that our models outperform all
baselines on both tasks, which indicates the sig-
niﬁcance of visual information for knowledge rep-
resentations and the capability of our models in
learning knowledge representations with images.

1 Introduction
Knowledge graphs (KGs), which provide huge amount of
structured information for entities and relations, have been
successfully utilized in various ﬁelds such as knowledge in-
ference [Yang et al., 2014] and question answering [Yin et al.,
2016]. A typical KG like Freebase or DBpedia usually mod-
els the multi-relational information with enormous triple facts
represented as (head entity, relation, tail entity), which is
also abridged as (h, r, t).

Recently, translation-based methods are proposed to model
knowledge graphs. These methods project both entities and
relations into a continuous low-dimensional semantic space,
with relations considered to be translating operations between
head and tail entities [Bordes et al., 2013]. Translation-based
methods could leverage both effectiveness and efﬁciency in
knowledge representation learning (KRL), and thus have at-
tracted great attention in recent years. However, most con-
ventional methods on KRL only concentrate on the structured

∗Corresponding author: Z. Liu (liuzy@tsinghua.edu.cn)

Figure 1: Examples of entity images.

Fig. 1 demonstrates some examples of entity images. Each
entity has multiple images which can provide signiﬁcant vi-
sual information that intuitively describes the appearances
and behaviours of this entity. To utilize the rich information in
images, we propose the Image-embodied Knowledge Repre-
sentation Learning model (IKRL). More speciﬁcally, we ﬁrst
propose an image encoder which consists of a neural rep-
resentation module and a projection module to generate the
image-based representation for each image instance. Second,
we construct the aggregated image-based representation for
each entity jointly considering all its image instances with an
attention-based method. Finally, we jointly learn the knowl-
edge representations with translation-based methods.

We evaluate the IKRL model on knowledge graph com-
pletion and triple classiﬁcation. Experimental results demon-
strate that our model achieves the state-of-the-art perfor-
mances on both tasks, which conﬁrms the signiﬁcance of vi-
sual information in knowledge representation learning. It also
indicates that our IKRL model is capable of encoding image
information well into knowledge representations. We demon-
strate the main contributions of this work as follows:

• We propose a novel IKRL model considering visual in-
formation in entity images for knowledge representation
learning. To the best of our knowledge, this is the ﬁrst
attempt to combine images with knowledge graphs for
knowledge representation learning.

• We evaluate our models on a real-world dataset and re-
ceive promising performances on both knowledge graph

completion and triple classiﬁcation.

• We further conduct detailed analysis on representative
cases, which conﬁrms the power of attention in select-
ing informative images. We also ﬁnd some interesting
semantic regularities between image representations.

2 Related Work
2.1 Translation-based Methods
Translation-based methods have achieved great success on
knowledge representation learning in recent years. TransE
[Bordes et al., 2013] models both entities and relations into
the same low-dimensional continuous vector space, with re-
lations considered to be translating operations between head
and tail entities. The basic assumption of TransE is that the
embedding of tail entity t should be the neighbour of h + r.
The energy function of TransE is deﬁned as follows:

E(h, r, t) = ||h + r − t||.

(1)

TransE is both effective and efﬁcient, while the simple as-
sumption may result in conﬂicts when modeling compli-
cated entities and relations. To address this problem, TransH
[Wang et al., 2014b] proposes relation-speciﬁc hyperplanes
for translations between entities. TransR [Lin et al., 2015]
models entities and relations in different vector spaces, pro-
jecting entities from entity space to relation spaces with
relation-speciﬁc matrices. TransD [Ji et al., 2015] further
considers the diversities of both entities and relations, us-
ing dynamic mapping matrix for the multiple representations
of entities. However, these methods only concentrate on the
structured information in KGs. We propose the IKRL model
to consider images based on TransE, and our model can also
be easily extended to other translation-based methods.

2.2 Multi-source Information Learning
Multi-source information such as textual and visual informa-
tion is signiﬁcant for knowledge representation. To utilize
rich textual information, [Wang et al., 2014a] projects both
entities and words into a joint vector space with alignment
[Xie et al., 2016] directly constructs entity repre-
models.
sentations from entity descriptions, which is capable of mod-
eling new entities. As for visual information, multimodal
representations based on words and images are widely used
on various tasks like image-sentence ranking [Kiros et al.,
2014], metaphor identiﬁcation [Shutova et al., 2016] and vi-
sual question answering [Antol et al., 2015]. However, image
information has not yet been used in knowledge representa-
tions. To the best of our knowledge, IKRL is the ﬁrst attempt
which explicitly encodes visual information from images into
knowledge representations.

3 Methodology
We ﬁrst introduce the notations used in this paper. Given a
triple (h, r, t) ∈ T , it consists of two entities h, t ∈ E and a
relation r ∈ R. T stands for the whole training set of triples,
E represents the set of entities, and R represents the set of
relations. Each entity and relation embedding takes value in
Rds with ds to be the dimension.

To utilize entity image information in KRL, we propose
two kinds of representations for each entity. We set hS, tS as
the structure-based representations (SBR) of head and tail
entities, which are the distributed representations learned by
conventional KRL models. We also propose a novel kind of
knowledge representations hI , tI as the image-based rep-
resentations (IBR), which are constructed from the corre-
sponding images of head and tail entities.

3.1 Overall Architecture

We attempt to utilize structured knowledge information as
well as visual information in the IKRL model. Following the
framework of translation-based methods, we deﬁne the over-
all energy function as follows:

E(h, r, t) = ESS + ESI + EIS + EII .

(2)

The overall energy function is determined by the two kinds
of entity representations jointly. ESS = ||hS + r − tS|| is
the same energy function as TransE which only depends on
the structure-based representations. EII = ||hI + r − tI ||
is the energy function in which both head and tail entities are
image-based representations learned from their correspond-
ing images. We also have ESI = ||hS + r − tI || and
EIS = ||hI + r − tS|| to assure that both structure-based
representations and image-based representations are learned
into the same vector space.

According to the energy function, the overall architecture
of the IKRL model is demonstrated in Fig. 2. Each entity
has multiple entity images providing signiﬁcant visual infor-
mation. First, we design a neural image encoder taking every
entity image as inputs. The image encoder aims to extract in-
formative features from images and construct the image rep-
resentations in entity space. Second, in order to combine
multiple image representations, we implement an instance-
level attention-based learning method to automatically calcu-
late the attention we should pay on different image instances
for each entity. Finally, the aggregated image-based represen-
tations are learned jointly combined with the structure-based
representations under the overall energy function.

3.2

Image Encoder

1 , img(k)

2 , · · · , img(k)

Images provide informative visual information that can intu-
itively describe the appearances and behaviours of entities,
which are considered as the fundamental input data of the
IKRL model. For each entity ek, there are multiple image in-
stances represented as Ik = {img(k)
n }.
To effectively encode the image information into knowl-
edge representations, we propose an image encoder which
consists of an image representation module and an image
projection module. The image representation module uti-
lizes neural networks to extract discriminative features in im-
ages, and constructs image feature representations for each
image. Next, the image projection module attempts to project
those image feature representations from image space to en-
tity space. Fig. 3 demonstrates the overall pipeline of the
image encoder.

Figure 2: Overall architecture of the IKRL model.

Figure 3: Image encoder.

Image Representation Module

The image representation module aims to build the image fea-
ture representations. We utilize AlexNet, a widely-used neu-
ral network that contains ﬁve convolution layers, two fully-
connected layers and a softmax layer, to extract image fea-
tures [Krizhevsky et al., 2012]. During preprocessing, all im-
ages are reshaped to 224 × 224 from the center, corners and
their horizontal reﬂections. Inspired by [Shutova et al., 2016],
we take the 4096-dimensional embeddings which are outputs
of the second fully-connected layer (also called as fc7) as the
image feature representations.

Image Projection Module

After we get the compressed feature representations for each
image, the next procedure is to build the bridges between
images and entities via image projection module. Speciﬁ-
cally, we transfer the image feature representations from im-
age space to entity space with a shared projection matrix. The
image-based representation pi in entity space for the i-th im-
age is deﬁned as:

pi = M · f (imgi),

(3)

in which M ∈ Rdi×ds is the projection matrix, di represents
the dimension of image features, while ds represents the di-
mension of entities. f (imgi) stands for the i-th image feature
representation in image space, which is constructed by the
image representation module.

3.3 Attention-based Multi-instance Leaning
Image encoder takes images as inputs and then constructs
image-based representations for each single image. However,
most entities have more than one image from different as-
pects in various scenarios. It is essential but also challenging
to determine which images are better to represent their cor-
responding entities. Simply summing up all image represen-
tations may suffer from noises and lose detailed information.
Instead, to construct the aggregated image-based representa-
tion for each entity from multiple instances, we propose an
attention-based multi-instance learning method.

Attention-based methods conﬁrm to be intelligent to au-
tomatically select informative instances form multiple candi-
dates.
It has been widely utilized in various ﬁelds such as
image classiﬁcation [Mnih et al., 2014], machine translation
[Bahdanau et al., 2015] and abstractive sentence summariza-
tion [Rush et al., 2015]. We jointly consider each image rep-
resentation and the structure-based representation of its cor-
responding entity to generate the instance-level attention. For
the i-th image representation p(k)
of the k-th entity, the atten-
tion is deﬁned as follows:

i

att(p(k)

i

, e(k)

S ) =

exp (p(k)
j=1 exp (p(k)

· e(k)
S )
· e(k)
S )

j

i

,

(cid:80)n

(4)

where e(k)
represents the structure-based representation of
S
the k-th entity. High attention indicates that the image repre-
sentation is similar to its corresponding structure-based rep-
resentation, and thus should be more considered when build-
ing the aggregated image-based representation according to
the energy function. Hence, we deﬁne the aggregated image-
based representation for the k-th entity as follows:

e(k)
I =

n
(cid:88)

i=1

i

att(p(k)
(cid:80)n

, e(k)
j=1 att(p(k)

S ) · p(k)
i
, e(k)
S )

j

,

(5)

Besides the attention-based method, we also implement
two alternative combination methods for further compar-
isons. AVG is a simple combination method that takes the

mean of all image embeddings, supposing that every image
has equal contributions to the ﬁnal image-based representa-
tion. MAX is a simpliﬁed version for attention, which only
considers the image representations with the highest atten-
tion.

3.4 Objective Formalization
We utilize a margin-based score function as our training ob-
jective, which is deﬁned as follows:

(cid:88)

(cid:88)

L =

max(γ + E(h, r, t)−

(h,r,t)∈T

(h(cid:48),r(cid:48),t(cid:48))∈T (cid:48)

(6)

E(h(cid:48), r(cid:48), t(cid:48)), 0),

where γ is a margin hyperparameter. E(h, r, t) is the overall
energy function stated above, in which both head and tail en-
tities have two kinds of representations including structure-
based representations and image-based representations. T (cid:48)
stands for the negative sample set of T , which we deﬁne as
follows:

T (cid:48) = {(h(cid:48), r, t)|h(cid:48) ∈ E} ∪ {(h, r, t(cid:48))|t(cid:48) ∈ E}∪
(h, r, t) ∈ T,

{(h, r(cid:48), t)|r(cid:48) ∈ R},

(7)

which means one of the entities or relation in a triple has been
randomly replaced by another one. We also wipe out all gen-
erated negative triples that are already in T to assure triples
in T (cid:48) are truly negative.

3.5 Optimization and Implementation Details
The IKRL model can be formalized as a parameter set θ =
(E, R, W, M), in which E stands for the structure-based em-
bedding set of entities, R stands for the embedding set of
relations. W represents the weights of the neural networks
used in image representation module, while M represents the
projection matrix used in image projection module.

We utilize mini-batch stochastic gradient descent (SGD) to
optimize our model, with chain rule applied to update the pa-
rameters. M is initialized randomly, while E and R could
be either initialized randomly or be pre-trained by previous
translation-based methods. As for the image representation
module, we utilize a deep learning framework Caffe [Jia et
al., 2014] for image representation, which is pre-trained on
ILSVRC 2012 with a minor variation from the version de-
scribed in [Krizhevsky et al., 2012]. The weights of AlexNet
W are pre-trained and ﬁxed during training. For the consid-
eration of efﬁciency, we use GPU to accelerate image repre-
sentation, and also employ a multi-thread version for training.

4 Experiments

4.1 Dataset
In this paper, we construct a new dataset of knowledge graph
combined with images named WN9-IMG for evaluation tasks
including knowledge graph completion and triple classiﬁca-
tion. The triple part of WN9-IMG is the subset of a classical
KG dataset WN18 [Bordes et al., 2014], which is originally
extracted from WordNet [Miller, 1995]. For the consideration

of image quality, we use 63,225 images extracted from Ima-
geNet [Deng et al., 2009], which is a huge image database or-
ganized according to the WordNet hierarchy. We assure that
all entities in WN9-IMG should have images, and randomly
split extracted triples into train, validation and test set. The
statistics of WN9-IMG are listed in Table 1.

Table 1: Statistics of the dataset

Dataset

#Rel

#Ent

#Train

#Valid

#Test

WN9-IMG

9

6,555

11,741

1,337

1,319

4.2 Experiment Settings
We train the IKRL model via mini-batch SGD, with the mar-
gin γ set among {1.0, 2.0, 4.0}. The learning rate λ could be
either empirically ﬁxed among {0.0002, 0.0005, 0.001}, or
designed following a ﬂexible adaptive strategy that descends
through iterations. The optimal conﬁgurations of the IKRL
model are: γ = 4.0, with the learning rate deﬁned adopting
a linear-declined strategy in which λ ranges form 0.001 to
0.0002. To balance efﬁciency and diversity, the image num-
ber n for all entity is up to 10. We also set the dimension of
image feature embeddings di = 4096, and the dimension of
entity and relation embeddings ds = 50.

We implement TransE [Bordes et al., 2013] and TransR
[Lin et al., 2015] as our baselines following the same experi-
mental settings reported in their papers. For fair comparisons,
the dimensions of entities and relations in all baselines are
also set to be 50.

4.3 Knowledge Graph Completion
Evaluation Protocol
The task of knowledge graph completion aims to complete
a triple (h, r, t) when one of h, r, t is missing. We mainly
focus on entity prediction in evaluation. This task has been
widely used to evaluate the quality of knowledge representa-
tions [Bordes et al., 2012; Bordes et al., 2013]. The predic-
tion is determined via the dissimilarity function ||h + r − t||.
Since the IKRL model has two kinds of representations,
we will report three prediction results based on our models:
IKRL (SBR) only utilizes structure-based representations for
all entities when predicting the missing ones, while IKRL
(IBR) only utilizes image-based representations for predic-
tion. IKRL (UNION) is a simple joint method considering
the weighted concatenation of both entity representations.

Following the same settings in [Bordes et al., 2013], we
consider two measures as our evaluation metrics in entity
prediction: (1) mean rank of correct entities (Mean Rank);
(2) proportion of correct entity results ranked in top 10
(Hits@10). We also follow the two evaluation settings named
“Raw” and “Filter” used in [Bordes et al., 2013]. In this sec-
tion, we ﬁrst demonstrate the results of entity prediction, and
then implement another experiment for further discussions on
the power of attention.

Entity Prediction
The results of entity prediction are demonstrated in Table 3.
From the results we can observe that: (1) all IKRL models

Table 2: Evaluation results on different combination strategies

Type

Metric

Image-based representation

Structure-based representation

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

59
29
29

52
22
22

79.8
79.3
80.2

92.1
92.9
93.3

62
43
41

55
36
34

81.0
80.7
81.1

92.3
92.8
92.9

Table 3: Evaluation results on entity prediction

Metric

TransE
TransR

IKRL (SBR)
IKRL (IBR)
IKRL (UNION)

Mean Rank
Raw Filter

Hits@10(%)
Raw Filter

143
147

41
29
28

137
140

34
22
21

79.9
80.1

81.1
80.2
80.9

91.2
91.7

92.9
93.3
93.8

outperform all baselines on both evaluation metrics of Mean
Rank and Hits@10, among which IKRL (UNION) achieves
the best performance.
It indicates that the visual informa-
tion of images has been successfully encoded into entity rep-
resentations, which is of great signiﬁcance when construct-
ing knowledge representations.
(2) Both IKRL (SBR) and
IKRL (IBR) have better performances compared to the base-
lines, which indicates that visual information could not only
instruct the construction of image-based representations, but
also improve the performances of structure-based represen-
tations. (3) The IKRL models signiﬁcantly and consistently
outperform baselines on Mean Rank. It is because that Mean
Rank depends on the overall quality of knowledge represen-
tations, and thus is sensitive to the wrong-predicted results.
Previous translation-based methods like TransE only consider
the structured information in triples, which may fail to predict
the relationships if the corresponding information is missing.
However, the image information utilized in IKRL can provide
supplementary information. Therefore, the results of IKRL
are much better than baselines on Mean Rank.

Further Discussion on Attention
To further demonstrate the power of attention-based methods,
we implement three combination strategies to jointly con-
sider multiple image instances. IKRL (ATT) represents the
basic model with attention when constructing the aggregated
image-based representations, while IKRL (MAX) represents
the combination strategy that only considers the image in-
stance which has the largest attention, and IKRL (AVG) rep-
resents the strategy that takes the average embeddings of all
image instances to represent an entity. The evaluation results
on entity prediction with both image-based representations
and structure-based representations are shown in Table 2.

From Table 2 we observe that: (1) all IKRL models still
outperform baselines on Mean Rank and Hits@10 no matter
what the combination strategy is. It conﬁrms the improve-
ments introduced by images, for the visual information has

been successfully encoded into knowledge representations.
(2) The IKRL (ATT) model achieves the best performance
among all three combination strategies, which implies that
the attention-based method is capable of automatically se-
lecting more informative image instances to represent enti-
(3) The IKRL (AVG) model performs better than the
ties.
IKRL (MAX) model, which indicates that only consider-
ing images with the largest attention will lose important in-
formation located in other instances.
(4) It seems that the
IKRL (ATT) model only has slight advantages over the IKRL
(AVG) model. The reason is that the qualities of images we
extract from ImageNet are very high, which may narrow the
gap between attention-based and average-based methods. For
further analysis, we will give some examples with attention in
case study, which could successfully distinguish the relatively
better and worse images from all candidates.

4.4 Triple Classiﬁcation
Evaluation Protocol
Triple classiﬁcation aims to predict whether a triple fact
(h, r, t) is correct or not according to the dissimilarity func-
tion [Socher et al., 2013]. It can be viewed as a binary clas-
siﬁcation task on triples. Since WN9-IMG has no explicit
negative instances, we generate the negative instances by ran-
domly replacing head or tail entities with another entity fol-
lowing the same protocol utilized in [Socher et al., 2013]. We
also assure that the number of positive triples is equal to that
of negative triples.

In classiﬁcation, we set different relation-speciﬁc thresh-
olds δr for each relation, which are optimized by maximizing
the classiﬁcation accuracies on the validation set with their
corresponding relations. For a triple to be classiﬁed, if its
dissimilarity function ||h + r − t|| is over δr, it will be pre-
dicted to be negative, and otherwise to be positive. To bet-
ter demonstrate the advantages in IKRL models, only image-
based representations are utilized when calculating the dis-
similarity function for each triple.

Table 4: Evaluation results on triple classiﬁcation

Methods

TransE
TransR

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

Accuracy(%)

95.0
95.3

96.3
96.6
96.9

Figure 4: Examples of semantic regularities on images.

the image with low attention only shows an overview of the
lawn without any person or detailed sporting goods, and thus
is less considered in combination. As for watering pot, the
low-attention image concentrates on the spout of a water-
ing pot, which will be confusing to represent the whole en-
tity. With the help of attention, we can automatically learn
knowledge representations from better images, alleviating the
noises in multiple image instances.

Experimental Results
From Table 4 we can observe that: (1) all IKRL models out-
perform both baselines, which demonstrates the effectiveness
and robustness of our models that combine structured infor-
mation in triples with visual information in images. Note that
IKRL is based on the framework of TransE but still performs
better even when compared with the enhanced TransR model,
which conﬁrms the improvements introduced by images. (2)
The IKRL (ATT) model achieves the best performance com-
pared to other combination strategies.
It indicates that the
attention-based method can jointly take multiple instances
into consideration and smartly choose more informative im-
ages from all candidates.

4.5 Case study
In this section, we give two cases with detailed analysis. The
ﬁrst is to introduce the semantic regularities of images, and
the second is to demonstrate the capability of attention. For
better demonstrations, the images shown in case study may
be chopped while the main objects are included.

Semantic Regularities of Images
[Mikolov et al., 2013] shows that word representations have
some interesting semantic regularities such as v(king) −
v(man) ≈ v(queen) − v(woman), in which v(x) indicates
the word embedding of x. These similar regularities have also
been found in image-text space [Kiros et al., 2014]. In image-
knowledge joint space, we explore such semantic translation
regularities on image-based representations demonstrated in
Fig. 4. Differing from previous work, the result of dresser
minus drawer matches a concrete and meaningful relation
part of, which makes the semantic translation regularities
in images-knowledge space more interpretable.

Capability of Attention
Fig. 5 demonstrates some pairs of image instances with dif-
ferent attention, aiming to conﬁrm the capability of attention
in selecting more informative images from multiple instances.
In the ﬁrst example of portable computer, the attention-based
method successfully detects the low-quality instance which is
actually a phone by assigning low attention. For golf game,

Figure 5: Examples of images with different attention.

5 Conclusion and Future Work
In this paper, we propose the IKRL models learning knowl-
edge representations with images. We utilize neural networks
and a projection module to model each image, and then con-
struct the aggregated image-based representations by com-
bining multiple image instances based on attention. Exper-
imental results conﬁrm that our models are capable of encod-
ing image information into knowledge representations. The
source code and dataset of this paper can be obtained from
https://github.com/thunlp/IKRL.

We will explore the following research directions in fu-
ture:
(1) the quality of image representations is essential.
We will utilize more sophisticated models to extract better
(2) The current
image features in some speciﬁc domains.
IKRL models are based on TransE. We will explore the ef-
fectiveness of our models when extended to other enhanced

translation-based methods. (3) In this paper, we only consider
each entity image as the visual representation of its target en-
tity, while sometimes an image contains far beyond a simple
entity. We will explore to learn multiple entities and their
relations within one image combined with our IKRL models.

Acknowledgments
This work is supported by the Natural Science Founda-
tion of China (NSFC) and the German Research Foundation
(DFG) in Project Crossmodal Learning, NSFC 61621136008
/ DFC TRR-169, and the National Natural Science Founda-
tion of China (NSFC No. 61661146007, 61572273), and
Tsinghua University Initiative Scientiﬁc Research Program
(20151080406).

References
[Antol et al., 2015] Stanislaw Antol, Aishwarya Agrawal, Ji-
asen Lu, Margaret Mitchell, Dhruv Batra, C Lawrence Zit-
nick, and Devi Parikh. Vqa: Visual question answering. In
Proceedings of ICCV, pages 2425–2433, 2015.

[Bahdanau et al., 2015] Dzmitry Bahdanau, Kyunghyun
Cho, and Yoshua Bengio. Neural machine translation by
jointly learning to align and translate. In Proceedings of
ICLR, 2015.

[Bordes et al., 2012] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. Joint learning of words and
meaning representations for open-text semantic parsing. In
Proceedings of AISTATS, pages 127–135, 2012.

[Bordes et al., 2013] Antoine Bordes, Nicolas Usunier,
Alberto Garcia-Duran,
and Oksana
Yakhnenko. Translating embeddings for modeling multi-
relational data. In Proceedings of NIPS, pages 2787–2795,
2013.

Jason Weston,

[Bordes et al., 2014] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. A semantic matching energy
function for learning with multi-relational data. Machine
Learning, 94(2):233–259, 2014.

[Deng et al., 2009] Jia Deng, Wei Dong, Richard Socher, Li-
Jia Li, Kai Li, and Li Fei-Fei. Imagenet: A large-scale hi-
erarchical image database. In Proceedings of CVPR, pages
248–255, 2009.

[Ji et al., 2015] Guoliang Ji, Shizhu He, Liheng Xu, Kang
Liu, and Jun Zhao. Knowledge graph embedding via dy-
In Proceedings of ACL, pages
namic mapping matrix.
687–696, 2015.

[Jia et al., 2014] Yangqing Jia, Evan Shelhamer, Jeff Don-
ahue, Sergey Karayev, Jonathan Long, Ross Girshick, Ser-
gio Guadarrama, and Trevor Darrell. Caffe: Convolutional
architecture for fast feature embedding. In Proceedings of
ACM MM, pages 675–678, 2014.

[Kiros et al., 2014] Ryan Kiros, Ruslan Salakhutdinov, and
Richard S Zemel. Unifying visual-semantic embeddings
with multimodal neural language models. In Proceedings
of NIPS, 2014.

[Krizhevsky et al., 2012] Alex Krizhevsky, Ilya Sutskever,
and Geoffrey E Hinton. Imagenet classiﬁcation with deep
In Proceedings of NIPS,
convolutional neural networks.
pages 1097–1105, 2012.

[Lin et al., 2015] Yankai Lin, Zhiyuan Liu, Maosong Sun,
Yang Liu, and Xuan Zhu. Learning entity and relation em-
beddings for knowledge graph completion. In Proceedings
of AAAI, 2015.

[Mikolov et al., 2013] Tomas Mikolov, Wen-tau Yih, and
Geoffrey Zweig. Linguistic regularities in continuous
In Proceedings of HLT-
space word representations.
NAACL, 2013.

[Miller, 1995] George A Miller. Wordnet: a lexical database

for english. Communications of the ACM, 1995.

[Mnih et al., 2014] Volodymyr Mnih, Nicolas Heess, Alex
Graves, et al. Recurrent models of visual attention.
In
Proceedings of NIPS, pages 2204–2212, 2014.

[Rush et al., 2015] Alexander M Rush, Sumit Chopra, and
Jason Weston. A neural attention model for abstractive
sentence summarization. In Proceedings of EMNLP, 2015.
[Shutova et al., 2016] Ekaterina Shutova, Douwe Kiela, and
Jean Maillard. Black holes and white rabbits: Metaphor
In Proceedings of
identiﬁcation with visual features.
NAACL, 2016.

[Socher et al., 2013] Richard Socher, Danqi Chen, Christo-
pher D Manning, and Andrew Ng. Reasoning with neural
tensor networks for knowledge base completion. In Pro-
ceedings of NIPS, pages 926–934, 2013.

[Wang et al., 2014a] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph and text jointly
embedding. In Proceedings of EMNLP, pages 1591–1601,
2014.

[Wang et al., 2014b] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph embedding by
translating on hyperplanes. In Proceedings of AAAI, pages
1112–1119, 2014.

[Xie et al., 2016] Ruobing Xie, Zhiyuan Liu, Jia Jia, Huanbo
Luan, and Maosong Sun. Representation learning of
In Proceed-
knowledge graphs with entity descriptions.
ings of AAAI, 2016.

[Yang et al., 2014] Bishan Yang, Wen-tau Yih, Xiaodong
He, Jianfeng Gao, and Li Deng. Embedding entities and
relations for learning and inference in knowledge bases. In
Proceedings of ICLR, 2014.

[Yin et al., 2016] Jun Yin, Xin Jiang, Zhengdong Lu, Lifeng
Shang, Hang Li, and Xiaoming Li. Neural generative
question answering. In Proceedings of IJCAI, 2016.

Image-embodied Knowledge Representation Learning

Ruobing Xie1, Zhiyuan Liu1,2∗, Huanbo Luan1, Maosong Sun1,2
1 Department of Computer Science and Technology,
State Key Lab on Intelligent Technology and Systems,
National Lab for Information Science and Technology, Tsinghua University, Beijing, China
2 Jiangsu Collaborative Innovation Center for Language Ability,
Jiangsu Normal University, Xuzhou 221009 China

information in triple facts, regardless of rich external infor-
mation located in entity images.

7
1
0
2
 
y
a
M
 
2
2
 
 
]

V
C
.
s
c
[
 
 
2
v
8
2
0
7
0
.
9
0
6
1
:
v
i
X
r
a

Abstract

Entity images could provide signiﬁcant visual in-
formation for knowledge representation learning.
Most conventional methods learn knowledge rep-
resentations merely from structured triples, ignor-
ing rich visual information extracted from entity
images. In this paper, we propose a novel Image-
embodied Knowledge Representation Learning
model (IKRL), where knowledge representations
are learned with both triple facts and images.
More speciﬁcally, we ﬁrst construct representa-
tions for all images of an entity with a neural im-
age encoder. These image representations are then
integrated into an aggregated image-based repre-
sentation via an attention-based method. We eval-
uate our IKRL models on knowledge graph com-
pletion and triple classiﬁcation. Experimental re-
sults demonstrate that our models outperform all
baselines on both tasks, which indicates the sig-
niﬁcance of visual information for knowledge rep-
resentations and the capability of our models in
learning knowledge representations with images.

1 Introduction
Knowledge graphs (KGs), which provide huge amount of
structured information for entities and relations, have been
successfully utilized in various ﬁelds such as knowledge in-
ference [Yang et al., 2014] and question answering [Yin et al.,
2016]. A typical KG like Freebase or DBpedia usually mod-
els the multi-relational information with enormous triple facts
represented as (head entity, relation, tail entity), which is
also abridged as (h, r, t).

Recently, translation-based methods are proposed to model
knowledge graphs. These methods project both entities and
relations into a continuous low-dimensional semantic space,
with relations considered to be translating operations between
head and tail entities [Bordes et al., 2013]. Translation-based
methods could leverage both effectiveness and efﬁciency in
knowledge representation learning (KRL), and thus have at-
tracted great attention in recent years. However, most con-
ventional methods on KRL only concentrate on the structured

∗Corresponding author: Z. Liu (liuzy@tsinghua.edu.cn)

Figure 1: Examples of entity images.

Fig. 1 demonstrates some examples of entity images. Each
entity has multiple images which can provide signiﬁcant vi-
sual information that intuitively describes the appearances
and behaviours of this entity. To utilize the rich information in
images, we propose the Image-embodied Knowledge Repre-
sentation Learning model (IKRL). More speciﬁcally, we ﬁrst
propose an image encoder which consists of a neural rep-
resentation module and a projection module to generate the
image-based representation for each image instance. Second,
we construct the aggregated image-based representation for
each entity jointly considering all its image instances with an
attention-based method. Finally, we jointly learn the knowl-
edge representations with translation-based methods.

We evaluate the IKRL model on knowledge graph com-
pletion and triple classiﬁcation. Experimental results demon-
strate that our model achieves the state-of-the-art perfor-
mances on both tasks, which conﬁrms the signiﬁcance of vi-
sual information in knowledge representation learning. It also
indicates that our IKRL model is capable of encoding image
information well into knowledge representations. We demon-
strate the main contributions of this work as follows:

• We propose a novel IKRL model considering visual in-
formation in entity images for knowledge representation
learning. To the best of our knowledge, this is the ﬁrst
attempt to combine images with knowledge graphs for
knowledge representation learning.

• We evaluate our models on a real-world dataset and re-
ceive promising performances on both knowledge graph

completion and triple classiﬁcation.

• We further conduct detailed analysis on representative
cases, which conﬁrms the power of attention in select-
ing informative images. We also ﬁnd some interesting
semantic regularities between image representations.

2 Related Work
2.1 Translation-based Methods
Translation-based methods have achieved great success on
knowledge representation learning in recent years. TransE
[Bordes et al., 2013] models both entities and relations into
the same low-dimensional continuous vector space, with re-
lations considered to be translating operations between head
and tail entities. The basic assumption of TransE is that the
embedding of tail entity t should be the neighbour of h + r.
The energy function of TransE is deﬁned as follows:

E(h, r, t) = ||h + r − t||.

(1)

TransE is both effective and efﬁcient, while the simple as-
sumption may result in conﬂicts when modeling compli-
cated entities and relations. To address this problem, TransH
[Wang et al., 2014b] proposes relation-speciﬁc hyperplanes
for translations between entities. TransR [Lin et al., 2015]
models entities and relations in different vector spaces, pro-
jecting entities from entity space to relation spaces with
relation-speciﬁc matrices. TransD [Ji et al., 2015] further
considers the diversities of both entities and relations, us-
ing dynamic mapping matrix for the multiple representations
of entities. However, these methods only concentrate on the
structured information in KGs. We propose the IKRL model
to consider images based on TransE, and our model can also
be easily extended to other translation-based methods.

2.2 Multi-source Information Learning
Multi-source information such as textual and visual informa-
tion is signiﬁcant for knowledge representation. To utilize
rich textual information, [Wang et al., 2014a] projects both
entities and words into a joint vector space with alignment
[Xie et al., 2016] directly constructs entity repre-
models.
sentations from entity descriptions, which is capable of mod-
eling new entities. As for visual information, multimodal
representations based on words and images are widely used
on various tasks like image-sentence ranking [Kiros et al.,
2014], metaphor identiﬁcation [Shutova et al., 2016] and vi-
sual question answering [Antol et al., 2015]. However, image
information has not yet been used in knowledge representa-
tions. To the best of our knowledge, IKRL is the ﬁrst attempt
which explicitly encodes visual information from images into
knowledge representations.

3 Methodology
We ﬁrst introduce the notations used in this paper. Given a
triple (h, r, t) ∈ T , it consists of two entities h, t ∈ E and a
relation r ∈ R. T stands for the whole training set of triples,
E represents the set of entities, and R represents the set of
relations. Each entity and relation embedding takes value in
Rds with ds to be the dimension.

To utilize entity image information in KRL, we propose
two kinds of representations for each entity. We set hS, tS as
the structure-based representations (SBR) of head and tail
entities, which are the distributed representations learned by
conventional KRL models. We also propose a novel kind of
knowledge representations hI , tI as the image-based rep-
resentations (IBR), which are constructed from the corre-
sponding images of head and tail entities.

3.1 Overall Architecture

We attempt to utilize structured knowledge information as
well as visual information in the IKRL model. Following the
framework of translation-based methods, we deﬁne the over-
all energy function as follows:

E(h, r, t) = ESS + ESI + EIS + EII .

(2)

The overall energy function is determined by the two kinds
of entity representations jointly. ESS = ||hS + r − tS|| is
the same energy function as TransE which only depends on
the structure-based representations. EII = ||hI + r − tI ||
is the energy function in which both head and tail entities are
image-based representations learned from their correspond-
ing images. We also have ESI = ||hS + r − tI || and
EIS = ||hI + r − tS|| to assure that both structure-based
representations and image-based representations are learned
into the same vector space.

According to the energy function, the overall architecture
of the IKRL model is demonstrated in Fig. 2. Each entity
has multiple entity images providing signiﬁcant visual infor-
mation. First, we design a neural image encoder taking every
entity image as inputs. The image encoder aims to extract in-
formative features from images and construct the image rep-
resentations in entity space. Second, in order to combine
multiple image representations, we implement an instance-
level attention-based learning method to automatically calcu-
late the attention we should pay on different image instances
for each entity. Finally, the aggregated image-based represen-
tations are learned jointly combined with the structure-based
representations under the overall energy function.

3.2

Image Encoder

1 , img(k)

2 , · · · , img(k)

Images provide informative visual information that can intu-
itively describe the appearances and behaviours of entities,
which are considered as the fundamental input data of the
IKRL model. For each entity ek, there are multiple image in-
stances represented as Ik = {img(k)
n }.
To effectively encode the image information into knowl-
edge representations, we propose an image encoder which
consists of an image representation module and an image
projection module. The image representation module uti-
lizes neural networks to extract discriminative features in im-
ages, and constructs image feature representations for each
image. Next, the image projection module attempts to project
those image feature representations from image space to en-
tity space. Fig. 3 demonstrates the overall pipeline of the
image encoder.

Figure 2: Overall architecture of the IKRL model.

Figure 3: Image encoder.

Image Representation Module

The image representation module aims to build the image fea-
ture representations. We utilize AlexNet, a widely-used neu-
ral network that contains ﬁve convolution layers, two fully-
connected layers and a softmax layer, to extract image fea-
tures [Krizhevsky et al., 2012]. During preprocessing, all im-
ages are reshaped to 224 × 224 from the center, corners and
their horizontal reﬂections. Inspired by [Shutova et al., 2016],
we take the 4096-dimensional embeddings which are outputs
of the second fully-connected layer (also called as fc7) as the
image feature representations.

Image Projection Module

After we get the compressed feature representations for each
image, the next procedure is to build the bridges between
images and entities via image projection module. Speciﬁ-
cally, we transfer the image feature representations from im-
age space to entity space with a shared projection matrix. The
image-based representation pi in entity space for the i-th im-
age is deﬁned as:

pi = M · f (imgi),

(3)

in which M ∈ Rdi×ds is the projection matrix, di represents
the dimension of image features, while ds represents the di-
mension of entities. f (imgi) stands for the i-th image feature
representation in image space, which is constructed by the
image representation module.

3.3 Attention-based Multi-instance Leaning
Image encoder takes images as inputs and then constructs
image-based representations for each single image. However,
most entities have more than one image from different as-
pects in various scenarios. It is essential but also challenging
to determine which images are better to represent their cor-
responding entities. Simply summing up all image represen-
tations may suffer from noises and lose detailed information.
Instead, to construct the aggregated image-based representa-
tion for each entity from multiple instances, we propose an
attention-based multi-instance learning method.

Attention-based methods conﬁrm to be intelligent to au-
tomatically select informative instances form multiple candi-
dates.
It has been widely utilized in various ﬁelds such as
image classiﬁcation [Mnih et al., 2014], machine translation
[Bahdanau et al., 2015] and abstractive sentence summariza-
tion [Rush et al., 2015]. We jointly consider each image rep-
resentation and the structure-based representation of its cor-
responding entity to generate the instance-level attention. For
the i-th image representation p(k)
of the k-th entity, the atten-
tion is deﬁned as follows:

i

att(p(k)

i

, e(k)

S ) =

exp (p(k)
j=1 exp (p(k)

· e(k)
S )
· e(k)
S )

j

i

,

(cid:80)n

(4)

where e(k)
represents the structure-based representation of
S
the k-th entity. High attention indicates that the image repre-
sentation is similar to its corresponding structure-based rep-
resentation, and thus should be more considered when build-
ing the aggregated image-based representation according to
the energy function. Hence, we deﬁne the aggregated image-
based representation for the k-th entity as follows:

e(k)
I =

n
(cid:88)

i=1

i

att(p(k)
(cid:80)n

, e(k)
j=1 att(p(k)

S ) · p(k)
i
, e(k)
S )

j

,

(5)

Besides the attention-based method, we also implement
two alternative combination methods for further compar-
isons. AVG is a simple combination method that takes the

mean of all image embeddings, supposing that every image
has equal contributions to the ﬁnal image-based representa-
tion. MAX is a simpliﬁed version for attention, which only
considers the image representations with the highest atten-
tion.

3.4 Objective Formalization
We utilize a margin-based score function as our training ob-
jective, which is deﬁned as follows:

(cid:88)

(cid:88)

L =

max(γ + E(h, r, t)−

(h,r,t)∈T

(h(cid:48),r(cid:48),t(cid:48))∈T (cid:48)

(6)

E(h(cid:48), r(cid:48), t(cid:48)), 0),

where γ is a margin hyperparameter. E(h, r, t) is the overall
energy function stated above, in which both head and tail en-
tities have two kinds of representations including structure-
based representations and image-based representations. T (cid:48)
stands for the negative sample set of T , which we deﬁne as
follows:

T (cid:48) = {(h(cid:48), r, t)|h(cid:48) ∈ E} ∪ {(h, r, t(cid:48))|t(cid:48) ∈ E}∪
(h, r, t) ∈ T,

{(h, r(cid:48), t)|r(cid:48) ∈ R},

(7)

which means one of the entities or relation in a triple has been
randomly replaced by another one. We also wipe out all gen-
erated negative triples that are already in T to assure triples
in T (cid:48) are truly negative.

3.5 Optimization and Implementation Details
The IKRL model can be formalized as a parameter set θ =
(E, R, W, M), in which E stands for the structure-based em-
bedding set of entities, R stands for the embedding set of
relations. W represents the weights of the neural networks
used in image representation module, while M represents the
projection matrix used in image projection module.

We utilize mini-batch stochastic gradient descent (SGD) to
optimize our model, with chain rule applied to update the pa-
rameters. M is initialized randomly, while E and R could
be either initialized randomly or be pre-trained by previous
translation-based methods. As for the image representation
module, we utilize a deep learning framework Caffe [Jia et
al., 2014] for image representation, which is pre-trained on
ILSVRC 2012 with a minor variation from the version de-
scribed in [Krizhevsky et al., 2012]. The weights of AlexNet
W are pre-trained and ﬁxed during training. For the consid-
eration of efﬁciency, we use GPU to accelerate image repre-
sentation, and also employ a multi-thread version for training.

4 Experiments

4.1 Dataset
In this paper, we construct a new dataset of knowledge graph
combined with images named WN9-IMG for evaluation tasks
including knowledge graph completion and triple classiﬁca-
tion. The triple part of WN9-IMG is the subset of a classical
KG dataset WN18 [Bordes et al., 2014], which is originally
extracted from WordNet [Miller, 1995]. For the consideration

of image quality, we use 63,225 images extracted from Ima-
geNet [Deng et al., 2009], which is a huge image database or-
ganized according to the WordNet hierarchy. We assure that
all entities in WN9-IMG should have images, and randomly
split extracted triples into train, validation and test set. The
statistics of WN9-IMG are listed in Table 1.

Table 1: Statistics of the dataset

Dataset

#Rel

#Ent

#Train

#Valid

#Test

WN9-IMG

9

6,555

11,741

1,337

1,319

4.2 Experiment Settings
We train the IKRL model via mini-batch SGD, with the mar-
gin γ set among {1.0, 2.0, 4.0}. The learning rate λ could be
either empirically ﬁxed among {0.0002, 0.0005, 0.001}, or
designed following a ﬂexible adaptive strategy that descends
through iterations. The optimal conﬁgurations of the IKRL
model are: γ = 4.0, with the learning rate deﬁned adopting
a linear-declined strategy in which λ ranges form 0.001 to
0.0002. To balance efﬁciency and diversity, the image num-
ber n for all entity is up to 10. We also set the dimension of
image feature embeddings di = 4096, and the dimension of
entity and relation embeddings ds = 50.

We implement TransE [Bordes et al., 2013] and TransR
[Lin et al., 2015] as our baselines following the same experi-
mental settings reported in their papers. For fair comparisons,
the dimensions of entities and relations in all baselines are
also set to be 50.

4.3 Knowledge Graph Completion
Evaluation Protocol
The task of knowledge graph completion aims to complete
a triple (h, r, t) when one of h, r, t is missing. We mainly
focus on entity prediction in evaluation. This task has been
widely used to evaluate the quality of knowledge representa-
tions [Bordes et al., 2012; Bordes et al., 2013]. The predic-
tion is determined via the dissimilarity function ||h + r − t||.
Since the IKRL model has two kinds of representations,
we will report three prediction results based on our models:
IKRL (SBR) only utilizes structure-based representations for
all entities when predicting the missing ones, while IKRL
(IBR) only utilizes image-based representations for predic-
tion. IKRL (UNION) is a simple joint method considering
the weighted concatenation of both entity representations.

Following the same settings in [Bordes et al., 2013], we
consider two measures as our evaluation metrics in entity
prediction: (1) mean rank of correct entities (Mean Rank);
(2) proportion of correct entity results ranked in top 10
(Hits@10). We also follow the two evaluation settings named
“Raw” and “Filter” used in [Bordes et al., 2013]. In this sec-
tion, we ﬁrst demonstrate the results of entity prediction, and
then implement another experiment for further discussions on
the power of attention.

Entity Prediction
The results of entity prediction are demonstrated in Table 3.
From the results we can observe that: (1) all IKRL models

Table 2: Evaluation results on different combination strategies

Type

Metric

Image-based representation

Structure-based representation

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

59
29
29

52
22
22

79.8
79.3
80.2

92.1
92.9
93.3

62
43
41

55
36
34

81.0
80.7
81.1

92.3
92.8
92.9

Table 3: Evaluation results on entity prediction

Metric

TransE
TransR

IKRL (SBR)
IKRL (IBR)
IKRL (UNION)

Mean Rank
Raw Filter

Hits@10(%)
Raw Filter

143
147

41
29
28

137
140

34
22
21

79.9
80.1

81.1
80.2
80.9

91.2
91.7

92.9
93.3
93.8

outperform all baselines on both evaluation metrics of Mean
Rank and Hits@10, among which IKRL (UNION) achieves
the best performance.
It indicates that the visual informa-
tion of images has been successfully encoded into entity rep-
resentations, which is of great signiﬁcance when construct-
ing knowledge representations.
(2) Both IKRL (SBR) and
IKRL (IBR) have better performances compared to the base-
lines, which indicates that visual information could not only
instruct the construction of image-based representations, but
also improve the performances of structure-based represen-
tations. (3) The IKRL models signiﬁcantly and consistently
outperform baselines on Mean Rank. It is because that Mean
Rank depends on the overall quality of knowledge represen-
tations, and thus is sensitive to the wrong-predicted results.
Previous translation-based methods like TransE only consider
the structured information in triples, which may fail to predict
the relationships if the corresponding information is missing.
However, the image information utilized in IKRL can provide
supplementary information. Therefore, the results of IKRL
are much better than baselines on Mean Rank.

Further Discussion on Attention
To further demonstrate the power of attention-based methods,
we implement three combination strategies to jointly con-
sider multiple image instances. IKRL (ATT) represents the
basic model with attention when constructing the aggregated
image-based representations, while IKRL (MAX) represents
the combination strategy that only considers the image in-
stance which has the largest attention, and IKRL (AVG) rep-
resents the strategy that takes the average embeddings of all
image instances to represent an entity. The evaluation results
on entity prediction with both image-based representations
and structure-based representations are shown in Table 2.

From Table 2 we observe that: (1) all IKRL models still
outperform baselines on Mean Rank and Hits@10 no matter
what the combination strategy is. It conﬁrms the improve-
ments introduced by images, for the visual information has

been successfully encoded into knowledge representations.
(2) The IKRL (ATT) model achieves the best performance
among all three combination strategies, which implies that
the attention-based method is capable of automatically se-
lecting more informative image instances to represent enti-
(3) The IKRL (AVG) model performs better than the
ties.
IKRL (MAX) model, which indicates that only consider-
ing images with the largest attention will lose important in-
formation located in other instances.
(4) It seems that the
IKRL (ATT) model only has slight advantages over the IKRL
(AVG) model. The reason is that the qualities of images we
extract from ImageNet are very high, which may narrow the
gap between attention-based and average-based methods. For
further analysis, we will give some examples with attention in
case study, which could successfully distinguish the relatively
better and worse images from all candidates.

4.4 Triple Classiﬁcation
Evaluation Protocol
Triple classiﬁcation aims to predict whether a triple fact
(h, r, t) is correct or not according to the dissimilarity func-
tion [Socher et al., 2013]. It can be viewed as a binary clas-
siﬁcation task on triples. Since WN9-IMG has no explicit
negative instances, we generate the negative instances by ran-
domly replacing head or tail entities with another entity fol-
lowing the same protocol utilized in [Socher et al., 2013]. We
also assure that the number of positive triples is equal to that
of negative triples.

In classiﬁcation, we set different relation-speciﬁc thresh-
olds δr for each relation, which are optimized by maximizing
the classiﬁcation accuracies on the validation set with their
corresponding relations. For a triple to be classiﬁed, if its
dissimilarity function ||h + r − t|| is over δr, it will be pre-
dicted to be negative, and otherwise to be positive. To bet-
ter demonstrate the advantages in IKRL models, only image-
based representations are utilized when calculating the dis-
similarity function for each triple.

Table 4: Evaluation results on triple classiﬁcation

Methods

TransE
TransR

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

Accuracy(%)

95.0
95.3

96.3
96.6
96.9

Figure 4: Examples of semantic regularities on images.

the image with low attention only shows an overview of the
lawn without any person or detailed sporting goods, and thus
is less considered in combination. As for watering pot, the
low-attention image concentrates on the spout of a water-
ing pot, which will be confusing to represent the whole en-
tity. With the help of attention, we can automatically learn
knowledge representations from better images, alleviating the
noises in multiple image instances.

Experimental Results
From Table 4 we can observe that: (1) all IKRL models out-
perform both baselines, which demonstrates the effectiveness
and robustness of our models that combine structured infor-
mation in triples with visual information in images. Note that
IKRL is based on the framework of TransE but still performs
better even when compared with the enhanced TransR model,
which conﬁrms the improvements introduced by images. (2)
The IKRL (ATT) model achieves the best performance com-
pared to other combination strategies.
It indicates that the
attention-based method can jointly take multiple instances
into consideration and smartly choose more informative im-
ages from all candidates.

4.5 Case study
In this section, we give two cases with detailed analysis. The
ﬁrst is to introduce the semantic regularities of images, and
the second is to demonstrate the capability of attention. For
better demonstrations, the images shown in case study may
be chopped while the main objects are included.

Semantic Regularities of Images
[Mikolov et al., 2013] shows that word representations have
some interesting semantic regularities such as v(king) −
v(man) ≈ v(queen) − v(woman), in which v(x) indicates
the word embedding of x. These similar regularities have also
been found in image-text space [Kiros et al., 2014]. In image-
knowledge joint space, we explore such semantic translation
regularities on image-based representations demonstrated in
Fig. 4. Differing from previous work, the result of dresser
minus drawer matches a concrete and meaningful relation
part of, which makes the semantic translation regularities
in images-knowledge space more interpretable.

Capability of Attention
Fig. 5 demonstrates some pairs of image instances with dif-
ferent attention, aiming to conﬁrm the capability of attention
in selecting more informative images from multiple instances.
In the ﬁrst example of portable computer, the attention-based
method successfully detects the low-quality instance which is
actually a phone by assigning low attention. For golf game,

Figure 5: Examples of images with different attention.

5 Conclusion and Future Work
In this paper, we propose the IKRL models learning knowl-
edge representations with images. We utilize neural networks
and a projection module to model each image, and then con-
struct the aggregated image-based representations by com-
bining multiple image instances based on attention. Exper-
imental results conﬁrm that our models are capable of encod-
ing image information into knowledge representations. The
source code and dataset of this paper can be obtained from
https://github.com/thunlp/IKRL.

We will explore the following research directions in fu-
ture:
(1) the quality of image representations is essential.
We will utilize more sophisticated models to extract better
(2) The current
image features in some speciﬁc domains.
IKRL models are based on TransE. We will explore the ef-
fectiveness of our models when extended to other enhanced

translation-based methods. (3) In this paper, we only consider
each entity image as the visual representation of its target en-
tity, while sometimes an image contains far beyond a simple
entity. We will explore to learn multiple entities and their
relations within one image combined with our IKRL models.

Acknowledgments
This work is supported by the Natural Science Founda-
tion of China (NSFC) and the German Research Foundation
(DFG) in Project Crossmodal Learning, NSFC 61621136008
/ DFC TRR-169, and the National Natural Science Founda-
tion of China (NSFC No. 61661146007, 61572273), and
Tsinghua University Initiative Scientiﬁc Research Program
(20151080406).

References
[Antol et al., 2015] Stanislaw Antol, Aishwarya Agrawal, Ji-
asen Lu, Margaret Mitchell, Dhruv Batra, C Lawrence Zit-
nick, and Devi Parikh. Vqa: Visual question answering. In
Proceedings of ICCV, pages 2425–2433, 2015.

[Bahdanau et al., 2015] Dzmitry Bahdanau, Kyunghyun
Cho, and Yoshua Bengio. Neural machine translation by
jointly learning to align and translate. In Proceedings of
ICLR, 2015.

[Bordes et al., 2012] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. Joint learning of words and
meaning representations for open-text semantic parsing. In
Proceedings of AISTATS, pages 127–135, 2012.

[Bordes et al., 2013] Antoine Bordes, Nicolas Usunier,
Alberto Garcia-Duran,
and Oksana
Yakhnenko. Translating embeddings for modeling multi-
relational data. In Proceedings of NIPS, pages 2787–2795,
2013.

Jason Weston,

[Bordes et al., 2014] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. A semantic matching energy
function for learning with multi-relational data. Machine
Learning, 94(2):233–259, 2014.

[Deng et al., 2009] Jia Deng, Wei Dong, Richard Socher, Li-
Jia Li, Kai Li, and Li Fei-Fei. Imagenet: A large-scale hi-
erarchical image database. In Proceedings of CVPR, pages
248–255, 2009.

[Ji et al., 2015] Guoliang Ji, Shizhu He, Liheng Xu, Kang
Liu, and Jun Zhao. Knowledge graph embedding via dy-
In Proceedings of ACL, pages
namic mapping matrix.
687–696, 2015.

[Jia et al., 2014] Yangqing Jia, Evan Shelhamer, Jeff Don-
ahue, Sergey Karayev, Jonathan Long, Ross Girshick, Ser-
gio Guadarrama, and Trevor Darrell. Caffe: Convolutional
architecture for fast feature embedding. In Proceedings of
ACM MM, pages 675–678, 2014.

[Kiros et al., 2014] Ryan Kiros, Ruslan Salakhutdinov, and
Richard S Zemel. Unifying visual-semantic embeddings
with multimodal neural language models. In Proceedings
of NIPS, 2014.

[Krizhevsky et al., 2012] Alex Krizhevsky, Ilya Sutskever,
and Geoffrey E Hinton. Imagenet classiﬁcation with deep
In Proceedings of NIPS,
convolutional neural networks.
pages 1097–1105, 2012.

[Lin et al., 2015] Yankai Lin, Zhiyuan Liu, Maosong Sun,
Yang Liu, and Xuan Zhu. Learning entity and relation em-
beddings for knowledge graph completion. In Proceedings
of AAAI, 2015.

[Mikolov et al., 2013] Tomas Mikolov, Wen-tau Yih, and
Geoffrey Zweig. Linguistic regularities in continuous
In Proceedings of HLT-
space word representations.
NAACL, 2013.

[Miller, 1995] George A Miller. Wordnet: a lexical database

for english. Communications of the ACM, 1995.

[Mnih et al., 2014] Volodymyr Mnih, Nicolas Heess, Alex
Graves, et al. Recurrent models of visual attention.
In
Proceedings of NIPS, pages 2204–2212, 2014.

[Rush et al., 2015] Alexander M Rush, Sumit Chopra, and
Jason Weston. A neural attention model for abstractive
sentence summarization. In Proceedings of EMNLP, 2015.
[Shutova et al., 2016] Ekaterina Shutova, Douwe Kiela, and
Jean Maillard. Black holes and white rabbits: Metaphor
In Proceedings of
identiﬁcation with visual features.
NAACL, 2016.

[Socher et al., 2013] Richard Socher, Danqi Chen, Christo-
pher D Manning, and Andrew Ng. Reasoning with neural
tensor networks for knowledge base completion. In Pro-
ceedings of NIPS, pages 926–934, 2013.

[Wang et al., 2014a] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph and text jointly
embedding. In Proceedings of EMNLP, pages 1591–1601,
2014.

[Wang et al., 2014b] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph embedding by
translating on hyperplanes. In Proceedings of AAAI, pages
1112–1119, 2014.

[Xie et al., 2016] Ruobing Xie, Zhiyuan Liu, Jia Jia, Huanbo
Luan, and Maosong Sun. Representation learning of
In Proceed-
knowledge graphs with entity descriptions.
ings of AAAI, 2016.

[Yang et al., 2014] Bishan Yang, Wen-tau Yih, Xiaodong
He, Jianfeng Gao, and Li Deng. Embedding entities and
relations for learning and inference in knowledge bases. In
Proceedings of ICLR, 2014.

[Yin et al., 2016] Jun Yin, Xin Jiang, Zhengdong Lu, Lifeng
Shang, Hang Li, and Xiaoming Li. Neural generative
question answering. In Proceedings of IJCAI, 2016.

Image-embodied Knowledge Representation Learning

Ruobing Xie1, Zhiyuan Liu1,2∗, Huanbo Luan1, Maosong Sun1,2
1 Department of Computer Science and Technology,
State Key Lab on Intelligent Technology and Systems,
National Lab for Information Science and Technology, Tsinghua University, Beijing, China
2 Jiangsu Collaborative Innovation Center for Language Ability,
Jiangsu Normal University, Xuzhou 221009 China

information in triple facts, regardless of rich external infor-
mation located in entity images.

7
1
0
2
 
y
a
M
 
2
2
 
 
]

V
C
.
s
c
[
 
 
2
v
8
2
0
7
0
.
9
0
6
1
:
v
i
X
r
a

Abstract

Entity images could provide signiﬁcant visual in-
formation for knowledge representation learning.
Most conventional methods learn knowledge rep-
resentations merely from structured triples, ignor-
ing rich visual information extracted from entity
images. In this paper, we propose a novel Image-
embodied Knowledge Representation Learning
model (IKRL), where knowledge representations
are learned with both triple facts and images.
More speciﬁcally, we ﬁrst construct representa-
tions for all images of an entity with a neural im-
age encoder. These image representations are then
integrated into an aggregated image-based repre-
sentation via an attention-based method. We eval-
uate our IKRL models on knowledge graph com-
pletion and triple classiﬁcation. Experimental re-
sults demonstrate that our models outperform all
baselines on both tasks, which indicates the sig-
niﬁcance of visual information for knowledge rep-
resentations and the capability of our models in
learning knowledge representations with images.

1 Introduction
Knowledge graphs (KGs), which provide huge amount of
structured information for entities and relations, have been
successfully utilized in various ﬁelds such as knowledge in-
ference [Yang et al., 2014] and question answering [Yin et al.,
2016]. A typical KG like Freebase or DBpedia usually mod-
els the multi-relational information with enormous triple facts
represented as (head entity, relation, tail entity), which is
also abridged as (h, r, t).

Recently, translation-based methods are proposed to model
knowledge graphs. These methods project both entities and
relations into a continuous low-dimensional semantic space,
with relations considered to be translating operations between
head and tail entities [Bordes et al., 2013]. Translation-based
methods could leverage both effectiveness and efﬁciency in
knowledge representation learning (KRL), and thus have at-
tracted great attention in recent years. However, most con-
ventional methods on KRL only concentrate on the structured

∗Corresponding author: Z. Liu (liuzy@tsinghua.edu.cn)

Figure 1: Examples of entity images.

Fig. 1 demonstrates some examples of entity images. Each
entity has multiple images which can provide signiﬁcant vi-
sual information that intuitively describes the appearances
and behaviours of this entity. To utilize the rich information in
images, we propose the Image-embodied Knowledge Repre-
sentation Learning model (IKRL). More speciﬁcally, we ﬁrst
propose an image encoder which consists of a neural rep-
resentation module and a projection module to generate the
image-based representation for each image instance. Second,
we construct the aggregated image-based representation for
each entity jointly considering all its image instances with an
attention-based method. Finally, we jointly learn the knowl-
edge representations with translation-based methods.

We evaluate the IKRL model on knowledge graph com-
pletion and triple classiﬁcation. Experimental results demon-
strate that our model achieves the state-of-the-art perfor-
mances on both tasks, which conﬁrms the signiﬁcance of vi-
sual information in knowledge representation learning. It also
indicates that our IKRL model is capable of encoding image
information well into knowledge representations. We demon-
strate the main contributions of this work as follows:

• We propose a novel IKRL model considering visual in-
formation in entity images for knowledge representation
learning. To the best of our knowledge, this is the ﬁrst
attempt to combine images with knowledge graphs for
knowledge representation learning.

• We evaluate our models on a real-world dataset and re-
ceive promising performances on both knowledge graph

completion and triple classiﬁcation.

• We further conduct detailed analysis on representative
cases, which conﬁrms the power of attention in select-
ing informative images. We also ﬁnd some interesting
semantic regularities between image representations.

2 Related Work
2.1 Translation-based Methods
Translation-based methods have achieved great success on
knowledge representation learning in recent years. TransE
[Bordes et al., 2013] models both entities and relations into
the same low-dimensional continuous vector space, with re-
lations considered to be translating operations between head
and tail entities. The basic assumption of TransE is that the
embedding of tail entity t should be the neighbour of h + r.
The energy function of TransE is deﬁned as follows:

E(h, r, t) = ||h + r − t||.

(1)

TransE is both effective and efﬁcient, while the simple as-
sumption may result in conﬂicts when modeling compli-
cated entities and relations. To address this problem, TransH
[Wang et al., 2014b] proposes relation-speciﬁc hyperplanes
for translations between entities. TransR [Lin et al., 2015]
models entities and relations in different vector spaces, pro-
jecting entities from entity space to relation spaces with
relation-speciﬁc matrices. TransD [Ji et al., 2015] further
considers the diversities of both entities and relations, us-
ing dynamic mapping matrix for the multiple representations
of entities. However, these methods only concentrate on the
structured information in KGs. We propose the IKRL model
to consider images based on TransE, and our model can also
be easily extended to other translation-based methods.

2.2 Multi-source Information Learning
Multi-source information such as textual and visual informa-
tion is signiﬁcant for knowledge representation. To utilize
rich textual information, [Wang et al., 2014a] projects both
entities and words into a joint vector space with alignment
[Xie et al., 2016] directly constructs entity repre-
models.
sentations from entity descriptions, which is capable of mod-
eling new entities. As for visual information, multimodal
representations based on words and images are widely used
on various tasks like image-sentence ranking [Kiros et al.,
2014], metaphor identiﬁcation [Shutova et al., 2016] and vi-
sual question answering [Antol et al., 2015]. However, image
information has not yet been used in knowledge representa-
tions. To the best of our knowledge, IKRL is the ﬁrst attempt
which explicitly encodes visual information from images into
knowledge representations.

3 Methodology
We ﬁrst introduce the notations used in this paper. Given a
triple (h, r, t) ∈ T , it consists of two entities h, t ∈ E and a
relation r ∈ R. T stands for the whole training set of triples,
E represents the set of entities, and R represents the set of
relations. Each entity and relation embedding takes value in
Rds with ds to be the dimension.

To utilize entity image information in KRL, we propose
two kinds of representations for each entity. We set hS, tS as
the structure-based representations (SBR) of head and tail
entities, which are the distributed representations learned by
conventional KRL models. We also propose a novel kind of
knowledge representations hI , tI as the image-based rep-
resentations (IBR), which are constructed from the corre-
sponding images of head and tail entities.

3.1 Overall Architecture

We attempt to utilize structured knowledge information as
well as visual information in the IKRL model. Following the
framework of translation-based methods, we deﬁne the over-
all energy function as follows:

E(h, r, t) = ESS + ESI + EIS + EII .

(2)

The overall energy function is determined by the two kinds
of entity representations jointly. ESS = ||hS + r − tS|| is
the same energy function as TransE which only depends on
the structure-based representations. EII = ||hI + r − tI ||
is the energy function in which both head and tail entities are
image-based representations learned from their correspond-
ing images. We also have ESI = ||hS + r − tI || and
EIS = ||hI + r − tS|| to assure that both structure-based
representations and image-based representations are learned
into the same vector space.

According to the energy function, the overall architecture
of the IKRL model is demonstrated in Fig. 2. Each entity
has multiple entity images providing signiﬁcant visual infor-
mation. First, we design a neural image encoder taking every
entity image as inputs. The image encoder aims to extract in-
formative features from images and construct the image rep-
resentations in entity space. Second, in order to combine
multiple image representations, we implement an instance-
level attention-based learning method to automatically calcu-
late the attention we should pay on different image instances
for each entity. Finally, the aggregated image-based represen-
tations are learned jointly combined with the structure-based
representations under the overall energy function.

3.2

Image Encoder

1 , img(k)

2 , · · · , img(k)

Images provide informative visual information that can intu-
itively describe the appearances and behaviours of entities,
which are considered as the fundamental input data of the
IKRL model. For each entity ek, there are multiple image in-
stances represented as Ik = {img(k)
n }.
To effectively encode the image information into knowl-
edge representations, we propose an image encoder which
consists of an image representation module and an image
projection module. The image representation module uti-
lizes neural networks to extract discriminative features in im-
ages, and constructs image feature representations for each
image. Next, the image projection module attempts to project
those image feature representations from image space to en-
tity space. Fig. 3 demonstrates the overall pipeline of the
image encoder.

Figure 2: Overall architecture of the IKRL model.

Figure 3: Image encoder.

Image Representation Module

The image representation module aims to build the image fea-
ture representations. We utilize AlexNet, a widely-used neu-
ral network that contains ﬁve convolution layers, two fully-
connected layers and a softmax layer, to extract image fea-
tures [Krizhevsky et al., 2012]. During preprocessing, all im-
ages are reshaped to 224 × 224 from the center, corners and
their horizontal reﬂections. Inspired by [Shutova et al., 2016],
we take the 4096-dimensional embeddings which are outputs
of the second fully-connected layer (also called as fc7) as the
image feature representations.

Image Projection Module

After we get the compressed feature representations for each
image, the next procedure is to build the bridges between
images and entities via image projection module. Speciﬁ-
cally, we transfer the image feature representations from im-
age space to entity space with a shared projection matrix. The
image-based representation pi in entity space for the i-th im-
age is deﬁned as:

pi = M · f (imgi),

(3)

in which M ∈ Rdi×ds is the projection matrix, di represents
the dimension of image features, while ds represents the di-
mension of entities. f (imgi) stands for the i-th image feature
representation in image space, which is constructed by the
image representation module.

3.3 Attention-based Multi-instance Leaning
Image encoder takes images as inputs and then constructs
image-based representations for each single image. However,
most entities have more than one image from different as-
pects in various scenarios. It is essential but also challenging
to determine which images are better to represent their cor-
responding entities. Simply summing up all image represen-
tations may suffer from noises and lose detailed information.
Instead, to construct the aggregated image-based representa-
tion for each entity from multiple instances, we propose an
attention-based multi-instance learning method.

Attention-based methods conﬁrm to be intelligent to au-
tomatically select informative instances form multiple candi-
dates.
It has been widely utilized in various ﬁelds such as
image classiﬁcation [Mnih et al., 2014], machine translation
[Bahdanau et al., 2015] and abstractive sentence summariza-
tion [Rush et al., 2015]. We jointly consider each image rep-
resentation and the structure-based representation of its cor-
responding entity to generate the instance-level attention. For
the i-th image representation p(k)
of the k-th entity, the atten-
tion is deﬁned as follows:

i

att(p(k)

i

, e(k)

S ) =

exp (p(k)
j=1 exp (p(k)

· e(k)
S )
· e(k)
S )

j

i

,

(cid:80)n

(4)

where e(k)
represents the structure-based representation of
S
the k-th entity. High attention indicates that the image repre-
sentation is similar to its corresponding structure-based rep-
resentation, and thus should be more considered when build-
ing the aggregated image-based representation according to
the energy function. Hence, we deﬁne the aggregated image-
based representation for the k-th entity as follows:

e(k)
I =

n
(cid:88)

i=1

i

att(p(k)
(cid:80)n

, e(k)
j=1 att(p(k)

S ) · p(k)
i
, e(k)
S )

j

,

(5)

Besides the attention-based method, we also implement
two alternative combination methods for further compar-
isons. AVG is a simple combination method that takes the

mean of all image embeddings, supposing that every image
has equal contributions to the ﬁnal image-based representa-
tion. MAX is a simpliﬁed version for attention, which only
considers the image representations with the highest atten-
tion.

3.4 Objective Formalization
We utilize a margin-based score function as our training ob-
jective, which is deﬁned as follows:

(cid:88)

(cid:88)

L =

max(γ + E(h, r, t)−

(h,r,t)∈T

(h(cid:48),r(cid:48),t(cid:48))∈T (cid:48)

(6)

E(h(cid:48), r(cid:48), t(cid:48)), 0),

where γ is a margin hyperparameter. E(h, r, t) is the overall
energy function stated above, in which both head and tail en-
tities have two kinds of representations including structure-
based representations and image-based representations. T (cid:48)
stands for the negative sample set of T , which we deﬁne as
follows:

T (cid:48) = {(h(cid:48), r, t)|h(cid:48) ∈ E} ∪ {(h, r, t(cid:48))|t(cid:48) ∈ E}∪
(h, r, t) ∈ T,

{(h, r(cid:48), t)|r(cid:48) ∈ R},

(7)

which means one of the entities or relation in a triple has been
randomly replaced by another one. We also wipe out all gen-
erated negative triples that are already in T to assure triples
in T (cid:48) are truly negative.

3.5 Optimization and Implementation Details
The IKRL model can be formalized as a parameter set θ =
(E, R, W, M), in which E stands for the structure-based em-
bedding set of entities, R stands for the embedding set of
relations. W represents the weights of the neural networks
used in image representation module, while M represents the
projection matrix used in image projection module.

We utilize mini-batch stochastic gradient descent (SGD) to
optimize our model, with chain rule applied to update the pa-
rameters. M is initialized randomly, while E and R could
be either initialized randomly or be pre-trained by previous
translation-based methods. As for the image representation
module, we utilize a deep learning framework Caffe [Jia et
al., 2014] for image representation, which is pre-trained on
ILSVRC 2012 with a minor variation from the version de-
scribed in [Krizhevsky et al., 2012]. The weights of AlexNet
W are pre-trained and ﬁxed during training. For the consid-
eration of efﬁciency, we use GPU to accelerate image repre-
sentation, and also employ a multi-thread version for training.

4 Experiments

4.1 Dataset
In this paper, we construct a new dataset of knowledge graph
combined with images named WN9-IMG for evaluation tasks
including knowledge graph completion and triple classiﬁca-
tion. The triple part of WN9-IMG is the subset of a classical
KG dataset WN18 [Bordes et al., 2014], which is originally
extracted from WordNet [Miller, 1995]. For the consideration

of image quality, we use 63,225 images extracted from Ima-
geNet [Deng et al., 2009], which is a huge image database or-
ganized according to the WordNet hierarchy. We assure that
all entities in WN9-IMG should have images, and randomly
split extracted triples into train, validation and test set. The
statistics of WN9-IMG are listed in Table 1.

Table 1: Statistics of the dataset

Dataset

#Rel

#Ent

#Train

#Valid

#Test

WN9-IMG

9

6,555

11,741

1,337

1,319

4.2 Experiment Settings
We train the IKRL model via mini-batch SGD, with the mar-
gin γ set among {1.0, 2.0, 4.0}. The learning rate λ could be
either empirically ﬁxed among {0.0002, 0.0005, 0.001}, or
designed following a ﬂexible adaptive strategy that descends
through iterations. The optimal conﬁgurations of the IKRL
model are: γ = 4.0, with the learning rate deﬁned adopting
a linear-declined strategy in which λ ranges form 0.001 to
0.0002. To balance efﬁciency and diversity, the image num-
ber n for all entity is up to 10. We also set the dimension of
image feature embeddings di = 4096, and the dimension of
entity and relation embeddings ds = 50.

We implement TransE [Bordes et al., 2013] and TransR
[Lin et al., 2015] as our baselines following the same experi-
mental settings reported in their papers. For fair comparisons,
the dimensions of entities and relations in all baselines are
also set to be 50.

4.3 Knowledge Graph Completion
Evaluation Protocol
The task of knowledge graph completion aims to complete
a triple (h, r, t) when one of h, r, t is missing. We mainly
focus on entity prediction in evaluation. This task has been
widely used to evaluate the quality of knowledge representa-
tions [Bordes et al., 2012; Bordes et al., 2013]. The predic-
tion is determined via the dissimilarity function ||h + r − t||.
Since the IKRL model has two kinds of representations,
we will report three prediction results based on our models:
IKRL (SBR) only utilizes structure-based representations for
all entities when predicting the missing ones, while IKRL
(IBR) only utilizes image-based representations for predic-
tion. IKRL (UNION) is a simple joint method considering
the weighted concatenation of both entity representations.

Following the same settings in [Bordes et al., 2013], we
consider two measures as our evaluation metrics in entity
prediction: (1) mean rank of correct entities (Mean Rank);
(2) proportion of correct entity results ranked in top 10
(Hits@10). We also follow the two evaluation settings named
“Raw” and “Filter” used in [Bordes et al., 2013]. In this sec-
tion, we ﬁrst demonstrate the results of entity prediction, and
then implement another experiment for further discussions on
the power of attention.

Entity Prediction
The results of entity prediction are demonstrated in Table 3.
From the results we can observe that: (1) all IKRL models

Table 2: Evaluation results on different combination strategies

Type

Metric

Image-based representation

Structure-based representation

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

59
29
29

52
22
22

79.8
79.3
80.2

92.1
92.9
93.3

62
43
41

55
36
34

81.0
80.7
81.1

92.3
92.8
92.9

Table 3: Evaluation results on entity prediction

Metric

TransE
TransR

IKRL (SBR)
IKRL (IBR)
IKRL (UNION)

Mean Rank
Raw Filter

Hits@10(%)
Raw Filter

143
147

41
29
28

137
140

34
22
21

79.9
80.1

81.1
80.2
80.9

91.2
91.7

92.9
93.3
93.8

outperform all baselines on both evaluation metrics of Mean
Rank and Hits@10, among which IKRL (UNION) achieves
the best performance.
It indicates that the visual informa-
tion of images has been successfully encoded into entity rep-
resentations, which is of great signiﬁcance when construct-
ing knowledge representations.
(2) Both IKRL (SBR) and
IKRL (IBR) have better performances compared to the base-
lines, which indicates that visual information could not only
instruct the construction of image-based representations, but
also improve the performances of structure-based represen-
tations. (3) The IKRL models signiﬁcantly and consistently
outperform baselines on Mean Rank. It is because that Mean
Rank depends on the overall quality of knowledge represen-
tations, and thus is sensitive to the wrong-predicted results.
Previous translation-based methods like TransE only consider
the structured information in triples, which may fail to predict
the relationships if the corresponding information is missing.
However, the image information utilized in IKRL can provide
supplementary information. Therefore, the results of IKRL
are much better than baselines on Mean Rank.

Further Discussion on Attention
To further demonstrate the power of attention-based methods,
we implement three combination strategies to jointly con-
sider multiple image instances. IKRL (ATT) represents the
basic model with attention when constructing the aggregated
image-based representations, while IKRL (MAX) represents
the combination strategy that only considers the image in-
stance which has the largest attention, and IKRL (AVG) rep-
resents the strategy that takes the average embeddings of all
image instances to represent an entity. The evaluation results
on entity prediction with both image-based representations
and structure-based representations are shown in Table 2.

From Table 2 we observe that: (1) all IKRL models still
outperform baselines on Mean Rank and Hits@10 no matter
what the combination strategy is. It conﬁrms the improve-
ments introduced by images, for the visual information has

been successfully encoded into knowledge representations.
(2) The IKRL (ATT) model achieves the best performance
among all three combination strategies, which implies that
the attention-based method is capable of automatically se-
lecting more informative image instances to represent enti-
(3) The IKRL (AVG) model performs better than the
ties.
IKRL (MAX) model, which indicates that only consider-
ing images with the largest attention will lose important in-
formation located in other instances.
(4) It seems that the
IKRL (ATT) model only has slight advantages over the IKRL
(AVG) model. The reason is that the qualities of images we
extract from ImageNet are very high, which may narrow the
gap between attention-based and average-based methods. For
further analysis, we will give some examples with attention in
case study, which could successfully distinguish the relatively
better and worse images from all candidates.

4.4 Triple Classiﬁcation
Evaluation Protocol
Triple classiﬁcation aims to predict whether a triple fact
(h, r, t) is correct or not according to the dissimilarity func-
tion [Socher et al., 2013]. It can be viewed as a binary clas-
siﬁcation task on triples. Since WN9-IMG has no explicit
negative instances, we generate the negative instances by ran-
domly replacing head or tail entities with another entity fol-
lowing the same protocol utilized in [Socher et al., 2013]. We
also assure that the number of positive triples is equal to that
of negative triples.

In classiﬁcation, we set different relation-speciﬁc thresh-
olds δr for each relation, which are optimized by maximizing
the classiﬁcation accuracies on the validation set with their
corresponding relations. For a triple to be classiﬁed, if its
dissimilarity function ||h + r − t|| is over δr, it will be pre-
dicted to be negative, and otherwise to be positive. To bet-
ter demonstrate the advantages in IKRL models, only image-
based representations are utilized when calculating the dis-
similarity function for each triple.

Table 4: Evaluation results on triple classiﬁcation

Methods

TransE
TransR

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

Accuracy(%)

95.0
95.3

96.3
96.6
96.9

Figure 4: Examples of semantic regularities on images.

the image with low attention only shows an overview of the
lawn without any person or detailed sporting goods, and thus
is less considered in combination. As for watering pot, the
low-attention image concentrates on the spout of a water-
ing pot, which will be confusing to represent the whole en-
tity. With the help of attention, we can automatically learn
knowledge representations from better images, alleviating the
noises in multiple image instances.

Experimental Results
From Table 4 we can observe that: (1) all IKRL models out-
perform both baselines, which demonstrates the effectiveness
and robustness of our models that combine structured infor-
mation in triples with visual information in images. Note that
IKRL is based on the framework of TransE but still performs
better even when compared with the enhanced TransR model,
which conﬁrms the improvements introduced by images. (2)
The IKRL (ATT) model achieves the best performance com-
pared to other combination strategies.
It indicates that the
attention-based method can jointly take multiple instances
into consideration and smartly choose more informative im-
ages from all candidates.

4.5 Case study
In this section, we give two cases with detailed analysis. The
ﬁrst is to introduce the semantic regularities of images, and
the second is to demonstrate the capability of attention. For
better demonstrations, the images shown in case study may
be chopped while the main objects are included.

Semantic Regularities of Images
[Mikolov et al., 2013] shows that word representations have
some interesting semantic regularities such as v(king) −
v(man) ≈ v(queen) − v(woman), in which v(x) indicates
the word embedding of x. These similar regularities have also
been found in image-text space [Kiros et al., 2014]. In image-
knowledge joint space, we explore such semantic translation
regularities on image-based representations demonstrated in
Fig. 4. Differing from previous work, the result of dresser
minus drawer matches a concrete and meaningful relation
part of, which makes the semantic translation regularities
in images-knowledge space more interpretable.

Capability of Attention
Fig. 5 demonstrates some pairs of image instances with dif-
ferent attention, aiming to conﬁrm the capability of attention
in selecting more informative images from multiple instances.
In the ﬁrst example of portable computer, the attention-based
method successfully detects the low-quality instance which is
actually a phone by assigning low attention. For golf game,

Figure 5: Examples of images with different attention.

5 Conclusion and Future Work
In this paper, we propose the IKRL models learning knowl-
edge representations with images. We utilize neural networks
and a projection module to model each image, and then con-
struct the aggregated image-based representations by com-
bining multiple image instances based on attention. Exper-
imental results conﬁrm that our models are capable of encod-
ing image information into knowledge representations. The
source code and dataset of this paper can be obtained from
https://github.com/thunlp/IKRL.

We will explore the following research directions in fu-
ture:
(1) the quality of image representations is essential.
We will utilize more sophisticated models to extract better
(2) The current
image features in some speciﬁc domains.
IKRL models are based on TransE. We will explore the ef-
fectiveness of our models when extended to other enhanced

translation-based methods. (3) In this paper, we only consider
each entity image as the visual representation of its target en-
tity, while sometimes an image contains far beyond a simple
entity. We will explore to learn multiple entities and their
relations within one image combined with our IKRL models.

Acknowledgments
This work is supported by the Natural Science Founda-
tion of China (NSFC) and the German Research Foundation
(DFG) in Project Crossmodal Learning, NSFC 61621136008
/ DFC TRR-169, and the National Natural Science Founda-
tion of China (NSFC No. 61661146007, 61572273), and
Tsinghua University Initiative Scientiﬁc Research Program
(20151080406).

References
[Antol et al., 2015] Stanislaw Antol, Aishwarya Agrawal, Ji-
asen Lu, Margaret Mitchell, Dhruv Batra, C Lawrence Zit-
nick, and Devi Parikh. Vqa: Visual question answering. In
Proceedings of ICCV, pages 2425–2433, 2015.

[Bahdanau et al., 2015] Dzmitry Bahdanau, Kyunghyun
Cho, and Yoshua Bengio. Neural machine translation by
jointly learning to align and translate. In Proceedings of
ICLR, 2015.

[Bordes et al., 2012] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. Joint learning of words and
meaning representations for open-text semantic parsing. In
Proceedings of AISTATS, pages 127–135, 2012.

[Bordes et al., 2013] Antoine Bordes, Nicolas Usunier,
Alberto Garcia-Duran,
and Oksana
Yakhnenko. Translating embeddings for modeling multi-
relational data. In Proceedings of NIPS, pages 2787–2795,
2013.

Jason Weston,

[Bordes et al., 2014] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. A semantic matching energy
function for learning with multi-relational data. Machine
Learning, 94(2):233–259, 2014.

[Deng et al., 2009] Jia Deng, Wei Dong, Richard Socher, Li-
Jia Li, Kai Li, and Li Fei-Fei. Imagenet: A large-scale hi-
erarchical image database. In Proceedings of CVPR, pages
248–255, 2009.

[Ji et al., 2015] Guoliang Ji, Shizhu He, Liheng Xu, Kang
Liu, and Jun Zhao. Knowledge graph embedding via dy-
In Proceedings of ACL, pages
namic mapping matrix.
687–696, 2015.

[Jia et al., 2014] Yangqing Jia, Evan Shelhamer, Jeff Don-
ahue, Sergey Karayev, Jonathan Long, Ross Girshick, Ser-
gio Guadarrama, and Trevor Darrell. Caffe: Convolutional
architecture for fast feature embedding. In Proceedings of
ACM MM, pages 675–678, 2014.

[Kiros et al., 2014] Ryan Kiros, Ruslan Salakhutdinov, and
Richard S Zemel. Unifying visual-semantic embeddings
with multimodal neural language models. In Proceedings
of NIPS, 2014.

[Krizhevsky et al., 2012] Alex Krizhevsky, Ilya Sutskever,
and Geoffrey E Hinton. Imagenet classiﬁcation with deep
In Proceedings of NIPS,
convolutional neural networks.
pages 1097–1105, 2012.

[Lin et al., 2015] Yankai Lin, Zhiyuan Liu, Maosong Sun,
Yang Liu, and Xuan Zhu. Learning entity and relation em-
beddings for knowledge graph completion. In Proceedings
of AAAI, 2015.

[Mikolov et al., 2013] Tomas Mikolov, Wen-tau Yih, and
Geoffrey Zweig. Linguistic regularities in continuous
In Proceedings of HLT-
space word representations.
NAACL, 2013.

[Miller, 1995] George A Miller. Wordnet: a lexical database

for english. Communications of the ACM, 1995.

[Mnih et al., 2014] Volodymyr Mnih, Nicolas Heess, Alex
Graves, et al. Recurrent models of visual attention.
In
Proceedings of NIPS, pages 2204–2212, 2014.

[Rush et al., 2015] Alexander M Rush, Sumit Chopra, and
Jason Weston. A neural attention model for abstractive
sentence summarization. In Proceedings of EMNLP, 2015.
[Shutova et al., 2016] Ekaterina Shutova, Douwe Kiela, and
Jean Maillard. Black holes and white rabbits: Metaphor
In Proceedings of
identiﬁcation with visual features.
NAACL, 2016.

[Socher et al., 2013] Richard Socher, Danqi Chen, Christo-
pher D Manning, and Andrew Ng. Reasoning with neural
tensor networks for knowledge base completion. In Pro-
ceedings of NIPS, pages 926–934, 2013.

[Wang et al., 2014a] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph and text jointly
embedding. In Proceedings of EMNLP, pages 1591–1601,
2014.

[Wang et al., 2014b] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph embedding by
translating on hyperplanes. In Proceedings of AAAI, pages
1112–1119, 2014.

[Xie et al., 2016] Ruobing Xie, Zhiyuan Liu, Jia Jia, Huanbo
Luan, and Maosong Sun. Representation learning of
In Proceed-
knowledge graphs with entity descriptions.
ings of AAAI, 2016.

[Yang et al., 2014] Bishan Yang, Wen-tau Yih, Xiaodong
He, Jianfeng Gao, and Li Deng. Embedding entities and
relations for learning and inference in knowledge bases. In
Proceedings of ICLR, 2014.

[Yin et al., 2016] Jun Yin, Xin Jiang, Zhengdong Lu, Lifeng
Shang, Hang Li, and Xiaoming Li. Neural generative
question answering. In Proceedings of IJCAI, 2016.

Image-embodied Knowledge Representation Learning

Ruobing Xie1, Zhiyuan Liu1,2∗, Huanbo Luan1, Maosong Sun1,2
1 Department of Computer Science and Technology,
State Key Lab on Intelligent Technology and Systems,
National Lab for Information Science and Technology, Tsinghua University, Beijing, China
2 Jiangsu Collaborative Innovation Center for Language Ability,
Jiangsu Normal University, Xuzhou 221009 China

information in triple facts, regardless of rich external infor-
mation located in entity images.

7
1
0
2
 
y
a
M
 
2
2
 
 
]

V
C
.
s
c
[
 
 
2
v
8
2
0
7
0
.
9
0
6
1
:
v
i
X
r
a

Abstract

Entity images could provide signiﬁcant visual in-
formation for knowledge representation learning.
Most conventional methods learn knowledge rep-
resentations merely from structured triples, ignor-
ing rich visual information extracted from entity
images. In this paper, we propose a novel Image-
embodied Knowledge Representation Learning
model (IKRL), where knowledge representations
are learned with both triple facts and images.
More speciﬁcally, we ﬁrst construct representa-
tions for all images of an entity with a neural im-
age encoder. These image representations are then
integrated into an aggregated image-based repre-
sentation via an attention-based method. We eval-
uate our IKRL models on knowledge graph com-
pletion and triple classiﬁcation. Experimental re-
sults demonstrate that our models outperform all
baselines on both tasks, which indicates the sig-
niﬁcance of visual information for knowledge rep-
resentations and the capability of our models in
learning knowledge representations with images.

1 Introduction
Knowledge graphs (KGs), which provide huge amount of
structured information for entities and relations, have been
successfully utilized in various ﬁelds such as knowledge in-
ference [Yang et al., 2014] and question answering [Yin et al.,
2016]. A typical KG like Freebase or DBpedia usually mod-
els the multi-relational information with enormous triple facts
represented as (head entity, relation, tail entity), which is
also abridged as (h, r, t).

Recently, translation-based methods are proposed to model
knowledge graphs. These methods project both entities and
relations into a continuous low-dimensional semantic space,
with relations considered to be translating operations between
head and tail entities [Bordes et al., 2013]. Translation-based
methods could leverage both effectiveness and efﬁciency in
knowledge representation learning (KRL), and thus have at-
tracted great attention in recent years. However, most con-
ventional methods on KRL only concentrate on the structured

∗Corresponding author: Z. Liu (liuzy@tsinghua.edu.cn)

Figure 1: Examples of entity images.

Fig. 1 demonstrates some examples of entity images. Each
entity has multiple images which can provide signiﬁcant vi-
sual information that intuitively describes the appearances
and behaviours of this entity. To utilize the rich information in
images, we propose the Image-embodied Knowledge Repre-
sentation Learning model (IKRL). More speciﬁcally, we ﬁrst
propose an image encoder which consists of a neural rep-
resentation module and a projection module to generate the
image-based representation for each image instance. Second,
we construct the aggregated image-based representation for
each entity jointly considering all its image instances with an
attention-based method. Finally, we jointly learn the knowl-
edge representations with translation-based methods.

We evaluate the IKRL model on knowledge graph com-
pletion and triple classiﬁcation. Experimental results demon-
strate that our model achieves the state-of-the-art perfor-
mances on both tasks, which conﬁrms the signiﬁcance of vi-
sual information in knowledge representation learning. It also
indicates that our IKRL model is capable of encoding image
information well into knowledge representations. We demon-
strate the main contributions of this work as follows:

• We propose a novel IKRL model considering visual in-
formation in entity images for knowledge representation
learning. To the best of our knowledge, this is the ﬁrst
attempt to combine images with knowledge graphs for
knowledge representation learning.

• We evaluate our models on a real-world dataset and re-
ceive promising performances on both knowledge graph

completion and triple classiﬁcation.

• We further conduct detailed analysis on representative
cases, which conﬁrms the power of attention in select-
ing informative images. We also ﬁnd some interesting
semantic regularities between image representations.

2 Related Work
2.1 Translation-based Methods
Translation-based methods have achieved great success on
knowledge representation learning in recent years. TransE
[Bordes et al., 2013] models both entities and relations into
the same low-dimensional continuous vector space, with re-
lations considered to be translating operations between head
and tail entities. The basic assumption of TransE is that the
embedding of tail entity t should be the neighbour of h + r.
The energy function of TransE is deﬁned as follows:

E(h, r, t) = ||h + r − t||.

(1)

TransE is both effective and efﬁcient, while the simple as-
sumption may result in conﬂicts when modeling compli-
cated entities and relations. To address this problem, TransH
[Wang et al., 2014b] proposes relation-speciﬁc hyperplanes
for translations between entities. TransR [Lin et al., 2015]
models entities and relations in different vector spaces, pro-
jecting entities from entity space to relation spaces with
relation-speciﬁc matrices. TransD [Ji et al., 2015] further
considers the diversities of both entities and relations, us-
ing dynamic mapping matrix for the multiple representations
of entities. However, these methods only concentrate on the
structured information in KGs. We propose the IKRL model
to consider images based on TransE, and our model can also
be easily extended to other translation-based methods.

2.2 Multi-source Information Learning
Multi-source information such as textual and visual informa-
tion is signiﬁcant for knowledge representation. To utilize
rich textual information, [Wang et al., 2014a] projects both
entities and words into a joint vector space with alignment
[Xie et al., 2016] directly constructs entity repre-
models.
sentations from entity descriptions, which is capable of mod-
eling new entities. As for visual information, multimodal
representations based on words and images are widely used
on various tasks like image-sentence ranking [Kiros et al.,
2014], metaphor identiﬁcation [Shutova et al., 2016] and vi-
sual question answering [Antol et al., 2015]. However, image
information has not yet been used in knowledge representa-
tions. To the best of our knowledge, IKRL is the ﬁrst attempt
which explicitly encodes visual information from images into
knowledge representations.

3 Methodology
We ﬁrst introduce the notations used in this paper. Given a
triple (h, r, t) ∈ T , it consists of two entities h, t ∈ E and a
relation r ∈ R. T stands for the whole training set of triples,
E represents the set of entities, and R represents the set of
relations. Each entity and relation embedding takes value in
Rds with ds to be the dimension.

To utilize entity image information in KRL, we propose
two kinds of representations for each entity. We set hS, tS as
the structure-based representations (SBR) of head and tail
entities, which are the distributed representations learned by
conventional KRL models. We also propose a novel kind of
knowledge representations hI , tI as the image-based rep-
resentations (IBR), which are constructed from the corre-
sponding images of head and tail entities.

3.1 Overall Architecture

We attempt to utilize structured knowledge information as
well as visual information in the IKRL model. Following the
framework of translation-based methods, we deﬁne the over-
all energy function as follows:

E(h, r, t) = ESS + ESI + EIS + EII .

(2)

The overall energy function is determined by the two kinds
of entity representations jointly. ESS = ||hS + r − tS|| is
the same energy function as TransE which only depends on
the structure-based representations. EII = ||hI + r − tI ||
is the energy function in which both head and tail entities are
image-based representations learned from their correspond-
ing images. We also have ESI = ||hS + r − tI || and
EIS = ||hI + r − tS|| to assure that both structure-based
representations and image-based representations are learned
into the same vector space.

According to the energy function, the overall architecture
of the IKRL model is demonstrated in Fig. 2. Each entity
has multiple entity images providing signiﬁcant visual infor-
mation. First, we design a neural image encoder taking every
entity image as inputs. The image encoder aims to extract in-
formative features from images and construct the image rep-
resentations in entity space. Second, in order to combine
multiple image representations, we implement an instance-
level attention-based learning method to automatically calcu-
late the attention we should pay on different image instances
for each entity. Finally, the aggregated image-based represen-
tations are learned jointly combined with the structure-based
representations under the overall energy function.

3.2

Image Encoder

1 , img(k)

2 , · · · , img(k)

Images provide informative visual information that can intu-
itively describe the appearances and behaviours of entities,
which are considered as the fundamental input data of the
IKRL model. For each entity ek, there are multiple image in-
stances represented as Ik = {img(k)
n }.
To effectively encode the image information into knowl-
edge representations, we propose an image encoder which
consists of an image representation module and an image
projection module. The image representation module uti-
lizes neural networks to extract discriminative features in im-
ages, and constructs image feature representations for each
image. Next, the image projection module attempts to project
those image feature representations from image space to en-
tity space. Fig. 3 demonstrates the overall pipeline of the
image encoder.

Figure 2: Overall architecture of the IKRL model.

Figure 3: Image encoder.

Image Representation Module

The image representation module aims to build the image fea-
ture representations. We utilize AlexNet, a widely-used neu-
ral network that contains ﬁve convolution layers, two fully-
connected layers and a softmax layer, to extract image fea-
tures [Krizhevsky et al., 2012]. During preprocessing, all im-
ages are reshaped to 224 × 224 from the center, corners and
their horizontal reﬂections. Inspired by [Shutova et al., 2016],
we take the 4096-dimensional embeddings which are outputs
of the second fully-connected layer (also called as fc7) as the
image feature representations.

Image Projection Module

After we get the compressed feature representations for each
image, the next procedure is to build the bridges between
images and entities via image projection module. Speciﬁ-
cally, we transfer the image feature representations from im-
age space to entity space with a shared projection matrix. The
image-based representation pi in entity space for the i-th im-
age is deﬁned as:

pi = M · f (imgi),

(3)

in which M ∈ Rdi×ds is the projection matrix, di represents
the dimension of image features, while ds represents the di-
mension of entities. f (imgi) stands for the i-th image feature
representation in image space, which is constructed by the
image representation module.

3.3 Attention-based Multi-instance Leaning
Image encoder takes images as inputs and then constructs
image-based representations for each single image. However,
most entities have more than one image from different as-
pects in various scenarios. It is essential but also challenging
to determine which images are better to represent their cor-
responding entities. Simply summing up all image represen-
tations may suffer from noises and lose detailed information.
Instead, to construct the aggregated image-based representa-
tion for each entity from multiple instances, we propose an
attention-based multi-instance learning method.

Attention-based methods conﬁrm to be intelligent to au-
tomatically select informative instances form multiple candi-
dates.
It has been widely utilized in various ﬁelds such as
image classiﬁcation [Mnih et al., 2014], machine translation
[Bahdanau et al., 2015] and abstractive sentence summariza-
tion [Rush et al., 2015]. We jointly consider each image rep-
resentation and the structure-based representation of its cor-
responding entity to generate the instance-level attention. For
the i-th image representation p(k)
of the k-th entity, the atten-
tion is deﬁned as follows:

i

att(p(k)

i

, e(k)

S ) =

exp (p(k)
j=1 exp (p(k)

· e(k)
S )
· e(k)
S )

j

i

,

(cid:80)n

(4)

where e(k)
represents the structure-based representation of
S
the k-th entity. High attention indicates that the image repre-
sentation is similar to its corresponding structure-based rep-
resentation, and thus should be more considered when build-
ing the aggregated image-based representation according to
the energy function. Hence, we deﬁne the aggregated image-
based representation for the k-th entity as follows:

e(k)
I =

n
(cid:88)

i=1

i

att(p(k)
(cid:80)n

, e(k)
j=1 att(p(k)

S ) · p(k)
i
, e(k)
S )

j

,

(5)

Besides the attention-based method, we also implement
two alternative combination methods for further compar-
isons. AVG is a simple combination method that takes the

mean of all image embeddings, supposing that every image
has equal contributions to the ﬁnal image-based representa-
tion. MAX is a simpliﬁed version for attention, which only
considers the image representations with the highest atten-
tion.

3.4 Objective Formalization
We utilize a margin-based score function as our training ob-
jective, which is deﬁned as follows:

(cid:88)

(cid:88)

L =

max(γ + E(h, r, t)−

(h,r,t)∈T

(h(cid:48),r(cid:48),t(cid:48))∈T (cid:48)

(6)

E(h(cid:48), r(cid:48), t(cid:48)), 0),

where γ is a margin hyperparameter. E(h, r, t) is the overall
energy function stated above, in which both head and tail en-
tities have two kinds of representations including structure-
based representations and image-based representations. T (cid:48)
stands for the negative sample set of T , which we deﬁne as
follows:

T (cid:48) = {(h(cid:48), r, t)|h(cid:48) ∈ E} ∪ {(h, r, t(cid:48))|t(cid:48) ∈ E}∪
(h, r, t) ∈ T,

{(h, r(cid:48), t)|r(cid:48) ∈ R},

(7)

which means one of the entities or relation in a triple has been
randomly replaced by another one. We also wipe out all gen-
erated negative triples that are already in T to assure triples
in T (cid:48) are truly negative.

3.5 Optimization and Implementation Details
The IKRL model can be formalized as a parameter set θ =
(E, R, W, M), in which E stands for the structure-based em-
bedding set of entities, R stands for the embedding set of
relations. W represents the weights of the neural networks
used in image representation module, while M represents the
projection matrix used in image projection module.

We utilize mini-batch stochastic gradient descent (SGD) to
optimize our model, with chain rule applied to update the pa-
rameters. M is initialized randomly, while E and R could
be either initialized randomly or be pre-trained by previous
translation-based methods. As for the image representation
module, we utilize a deep learning framework Caffe [Jia et
al., 2014] for image representation, which is pre-trained on
ILSVRC 2012 with a minor variation from the version de-
scribed in [Krizhevsky et al., 2012]. The weights of AlexNet
W are pre-trained and ﬁxed during training. For the consid-
eration of efﬁciency, we use GPU to accelerate image repre-
sentation, and also employ a multi-thread version for training.

4 Experiments

4.1 Dataset
In this paper, we construct a new dataset of knowledge graph
combined with images named WN9-IMG for evaluation tasks
including knowledge graph completion and triple classiﬁca-
tion. The triple part of WN9-IMG is the subset of a classical
KG dataset WN18 [Bordes et al., 2014], which is originally
extracted from WordNet [Miller, 1995]. For the consideration

of image quality, we use 63,225 images extracted from Ima-
geNet [Deng et al., 2009], which is a huge image database or-
ganized according to the WordNet hierarchy. We assure that
all entities in WN9-IMG should have images, and randomly
split extracted triples into train, validation and test set. The
statistics of WN9-IMG are listed in Table 1.

Table 1: Statistics of the dataset

Dataset

#Rel

#Ent

#Train

#Valid

#Test

WN9-IMG

9

6,555

11,741

1,337

1,319

4.2 Experiment Settings
We train the IKRL model via mini-batch SGD, with the mar-
gin γ set among {1.0, 2.0, 4.0}. The learning rate λ could be
either empirically ﬁxed among {0.0002, 0.0005, 0.001}, or
designed following a ﬂexible adaptive strategy that descends
through iterations. The optimal conﬁgurations of the IKRL
model are: γ = 4.0, with the learning rate deﬁned adopting
a linear-declined strategy in which λ ranges form 0.001 to
0.0002. To balance efﬁciency and diversity, the image num-
ber n for all entity is up to 10. We also set the dimension of
image feature embeddings di = 4096, and the dimension of
entity and relation embeddings ds = 50.

We implement TransE [Bordes et al., 2013] and TransR
[Lin et al., 2015] as our baselines following the same experi-
mental settings reported in their papers. For fair comparisons,
the dimensions of entities and relations in all baselines are
also set to be 50.

4.3 Knowledge Graph Completion
Evaluation Protocol
The task of knowledge graph completion aims to complete
a triple (h, r, t) when one of h, r, t is missing. We mainly
focus on entity prediction in evaluation. This task has been
widely used to evaluate the quality of knowledge representa-
tions [Bordes et al., 2012; Bordes et al., 2013]. The predic-
tion is determined via the dissimilarity function ||h + r − t||.
Since the IKRL model has two kinds of representations,
we will report three prediction results based on our models:
IKRL (SBR) only utilizes structure-based representations for
all entities when predicting the missing ones, while IKRL
(IBR) only utilizes image-based representations for predic-
tion. IKRL (UNION) is a simple joint method considering
the weighted concatenation of both entity representations.

Following the same settings in [Bordes et al., 2013], we
consider two measures as our evaluation metrics in entity
prediction: (1) mean rank of correct entities (Mean Rank);
(2) proportion of correct entity results ranked in top 10
(Hits@10). We also follow the two evaluation settings named
“Raw” and “Filter” used in [Bordes et al., 2013]. In this sec-
tion, we ﬁrst demonstrate the results of entity prediction, and
then implement another experiment for further discussions on
the power of attention.

Entity Prediction
The results of entity prediction are demonstrated in Table 3.
From the results we can observe that: (1) all IKRL models

Table 2: Evaluation results on different combination strategies

Type

Metric

Image-based representation

Structure-based representation

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

Mean Rank

Raw

Filter

Hits@10(%)
Filter
Raw

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

59
29
29

52
22
22

79.8
79.3
80.2

92.1
92.9
93.3

62
43
41

55
36
34

81.0
80.7
81.1

92.3
92.8
92.9

Table 3: Evaluation results on entity prediction

Metric

TransE
TransR

IKRL (SBR)
IKRL (IBR)
IKRL (UNION)

Mean Rank
Raw Filter

Hits@10(%)
Raw Filter

143
147

41
29
28

137
140

34
22
21

79.9
80.1

81.1
80.2
80.9

91.2
91.7

92.9
93.3
93.8

outperform all baselines on both evaluation metrics of Mean
Rank and Hits@10, among which IKRL (UNION) achieves
the best performance.
It indicates that the visual informa-
tion of images has been successfully encoded into entity rep-
resentations, which is of great signiﬁcance when construct-
ing knowledge representations.
(2) Both IKRL (SBR) and
IKRL (IBR) have better performances compared to the base-
lines, which indicates that visual information could not only
instruct the construction of image-based representations, but
also improve the performances of structure-based represen-
tations. (3) The IKRL models signiﬁcantly and consistently
outperform baselines on Mean Rank. It is because that Mean
Rank depends on the overall quality of knowledge represen-
tations, and thus is sensitive to the wrong-predicted results.
Previous translation-based methods like TransE only consider
the structured information in triples, which may fail to predict
the relationships if the corresponding information is missing.
However, the image information utilized in IKRL can provide
supplementary information. Therefore, the results of IKRL
are much better than baselines on Mean Rank.

Further Discussion on Attention
To further demonstrate the power of attention-based methods,
we implement three combination strategies to jointly con-
sider multiple image instances. IKRL (ATT) represents the
basic model with attention when constructing the aggregated
image-based representations, while IKRL (MAX) represents
the combination strategy that only considers the image in-
stance which has the largest attention, and IKRL (AVG) rep-
resents the strategy that takes the average embeddings of all
image instances to represent an entity. The evaluation results
on entity prediction with both image-based representations
and structure-based representations are shown in Table 2.

From Table 2 we observe that: (1) all IKRL models still
outperform baselines on Mean Rank and Hits@10 no matter
what the combination strategy is. It conﬁrms the improve-
ments introduced by images, for the visual information has

been successfully encoded into knowledge representations.
(2) The IKRL (ATT) model achieves the best performance
among all three combination strategies, which implies that
the attention-based method is capable of automatically se-
lecting more informative image instances to represent enti-
(3) The IKRL (AVG) model performs better than the
ties.
IKRL (MAX) model, which indicates that only consider-
ing images with the largest attention will lose important in-
formation located in other instances.
(4) It seems that the
IKRL (ATT) model only has slight advantages over the IKRL
(AVG) model. The reason is that the qualities of images we
extract from ImageNet are very high, which may narrow the
gap between attention-based and average-based methods. For
further analysis, we will give some examples with attention in
case study, which could successfully distinguish the relatively
better and worse images from all candidates.

4.4 Triple Classiﬁcation
Evaluation Protocol
Triple classiﬁcation aims to predict whether a triple fact
(h, r, t) is correct or not according to the dissimilarity func-
tion [Socher et al., 2013]. It can be viewed as a binary clas-
siﬁcation task on triples. Since WN9-IMG has no explicit
negative instances, we generate the negative instances by ran-
domly replacing head or tail entities with another entity fol-
lowing the same protocol utilized in [Socher et al., 2013]. We
also assure that the number of positive triples is equal to that
of negative triples.

In classiﬁcation, we set different relation-speciﬁc thresh-
olds δr for each relation, which are optimized by maximizing
the classiﬁcation accuracies on the validation set with their
corresponding relations. For a triple to be classiﬁed, if its
dissimilarity function ||h + r − t|| is over δr, it will be pre-
dicted to be negative, and otherwise to be positive. To bet-
ter demonstrate the advantages in IKRL models, only image-
based representations are utilized when calculating the dis-
similarity function for each triple.

Table 4: Evaluation results on triple classiﬁcation

Methods

TransE
TransR

IKRL (MAX)
IKRL (AVG)
IKRL (ATT)

Accuracy(%)

95.0
95.3

96.3
96.6
96.9

Figure 4: Examples of semantic regularities on images.

the image with low attention only shows an overview of the
lawn without any person or detailed sporting goods, and thus
is less considered in combination. As for watering pot, the
low-attention image concentrates on the spout of a water-
ing pot, which will be confusing to represent the whole en-
tity. With the help of attention, we can automatically learn
knowledge representations from better images, alleviating the
noises in multiple image instances.

Experimental Results
From Table 4 we can observe that: (1) all IKRL models out-
perform both baselines, which demonstrates the effectiveness
and robustness of our models that combine structured infor-
mation in triples with visual information in images. Note that
IKRL is based on the framework of TransE but still performs
better even when compared with the enhanced TransR model,
which conﬁrms the improvements introduced by images. (2)
The IKRL (ATT) model achieves the best performance com-
pared to other combination strategies.
It indicates that the
attention-based method can jointly take multiple instances
into consideration and smartly choose more informative im-
ages from all candidates.

4.5 Case study
In this section, we give two cases with detailed analysis. The
ﬁrst is to introduce the semantic regularities of images, and
the second is to demonstrate the capability of attention. For
better demonstrations, the images shown in case study may
be chopped while the main objects are included.

Semantic Regularities of Images
[Mikolov et al., 2013] shows that word representations have
some interesting semantic regularities such as v(king) −
v(man) ≈ v(queen) − v(woman), in which v(x) indicates
the word embedding of x. These similar regularities have also
been found in image-text space [Kiros et al., 2014]. In image-
knowledge joint space, we explore such semantic translation
regularities on image-based representations demonstrated in
Fig. 4. Differing from previous work, the result of dresser
minus drawer matches a concrete and meaningful relation
part of, which makes the semantic translation regularities
in images-knowledge space more interpretable.

Capability of Attention
Fig. 5 demonstrates some pairs of image instances with dif-
ferent attention, aiming to conﬁrm the capability of attention
in selecting more informative images from multiple instances.
In the ﬁrst example of portable computer, the attention-based
method successfully detects the low-quality instance which is
actually a phone by assigning low attention. For golf game,

Figure 5: Examples of images with different attention.

5 Conclusion and Future Work
In this paper, we propose the IKRL models learning knowl-
edge representations with images. We utilize neural networks
and a projection module to model each image, and then con-
struct the aggregated image-based representations by com-
bining multiple image instances based on attention. Exper-
imental results conﬁrm that our models are capable of encod-
ing image information into knowledge representations. The
source code and dataset of this paper can be obtained from
https://github.com/thunlp/IKRL.

We will explore the following research directions in fu-
ture:
(1) the quality of image representations is essential.
We will utilize more sophisticated models to extract better
(2) The current
image features in some speciﬁc domains.
IKRL models are based on TransE. We will explore the ef-
fectiveness of our models when extended to other enhanced

translation-based methods. (3) In this paper, we only consider
each entity image as the visual representation of its target en-
tity, while sometimes an image contains far beyond a simple
entity. We will explore to learn multiple entities and their
relations within one image combined with our IKRL models.

Acknowledgments
This work is supported by the Natural Science Founda-
tion of China (NSFC) and the German Research Foundation
(DFG) in Project Crossmodal Learning, NSFC 61621136008
/ DFC TRR-169, and the National Natural Science Founda-
tion of China (NSFC No. 61661146007, 61572273), and
Tsinghua University Initiative Scientiﬁc Research Program
(20151080406).

References
[Antol et al., 2015] Stanislaw Antol, Aishwarya Agrawal, Ji-
asen Lu, Margaret Mitchell, Dhruv Batra, C Lawrence Zit-
nick, and Devi Parikh. Vqa: Visual question answering. In
Proceedings of ICCV, pages 2425–2433, 2015.

[Bahdanau et al., 2015] Dzmitry Bahdanau, Kyunghyun
Cho, and Yoshua Bengio. Neural machine translation by
jointly learning to align and translate. In Proceedings of
ICLR, 2015.

[Bordes et al., 2012] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. Joint learning of words and
meaning representations for open-text semantic parsing. In
Proceedings of AISTATS, pages 127–135, 2012.

[Bordes et al., 2013] Antoine Bordes, Nicolas Usunier,
Alberto Garcia-Duran,
and Oksana
Yakhnenko. Translating embeddings for modeling multi-
relational data. In Proceedings of NIPS, pages 2787–2795,
2013.

Jason Weston,

[Bordes et al., 2014] Antoine Bordes, Xavier Glorot, Jason
Weston, and Yoshua Bengio. A semantic matching energy
function for learning with multi-relational data. Machine
Learning, 94(2):233–259, 2014.

[Deng et al., 2009] Jia Deng, Wei Dong, Richard Socher, Li-
Jia Li, Kai Li, and Li Fei-Fei. Imagenet: A large-scale hi-
erarchical image database. In Proceedings of CVPR, pages
248–255, 2009.

[Ji et al., 2015] Guoliang Ji, Shizhu He, Liheng Xu, Kang
Liu, and Jun Zhao. Knowledge graph embedding via dy-
In Proceedings of ACL, pages
namic mapping matrix.
687–696, 2015.

[Jia et al., 2014] Yangqing Jia, Evan Shelhamer, Jeff Don-
ahue, Sergey Karayev, Jonathan Long, Ross Girshick, Ser-
gio Guadarrama, and Trevor Darrell. Caffe: Convolutional
architecture for fast feature embedding. In Proceedings of
ACM MM, pages 675–678, 2014.

[Kiros et al., 2014] Ryan Kiros, Ruslan Salakhutdinov, and
Richard S Zemel. Unifying visual-semantic embeddings
with multimodal neural language models. In Proceedings
of NIPS, 2014.

[Krizhevsky et al., 2012] Alex Krizhevsky, Ilya Sutskever,
and Geoffrey E Hinton. Imagenet classiﬁcation with deep
In Proceedings of NIPS,
convolutional neural networks.
pages 1097–1105, 2012.

[Lin et al., 2015] Yankai Lin, Zhiyuan Liu, Maosong Sun,
Yang Liu, and Xuan Zhu. Learning entity and relation em-
beddings for knowledge graph completion. In Proceedings
of AAAI, 2015.

[Mikolov et al., 2013] Tomas Mikolov, Wen-tau Yih, and
Geoffrey Zweig. Linguistic regularities in continuous
In Proceedings of HLT-
space word representations.
NAACL, 2013.

[Miller, 1995] George A Miller. Wordnet: a lexical database

for english. Communications of the ACM, 1995.

[Mnih et al., 2014] Volodymyr Mnih, Nicolas Heess, Alex
Graves, et al. Recurrent models of visual attention.
In
Proceedings of NIPS, pages 2204–2212, 2014.

[Rush et al., 2015] Alexander M Rush, Sumit Chopra, and
Jason Weston. A neural attention model for abstractive
sentence summarization. In Proceedings of EMNLP, 2015.
[Shutova et al., 2016] Ekaterina Shutova, Douwe Kiela, and
Jean Maillard. Black holes and white rabbits: Metaphor
In Proceedings of
identiﬁcation with visual features.
NAACL, 2016.

[Socher et al., 2013] Richard Socher, Danqi Chen, Christo-
pher D Manning, and Andrew Ng. Reasoning with neural
tensor networks for knowledge base completion. In Pro-
ceedings of NIPS, pages 926–934, 2013.

[Wang et al., 2014a] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph and text jointly
embedding. In Proceedings of EMNLP, pages 1591–1601,
2014.

[Wang et al., 2014b] Zhen Wang, Jianwen Zhang, Jianlin
Feng, and Zheng Chen. Knowledge graph embedding by
translating on hyperplanes. In Proceedings of AAAI, pages
1112–1119, 2014.

[Xie et al., 2016] Ruobing Xie, Zhiyuan Liu, Jia Jia, Huanbo
Luan, and Maosong Sun. Representation learning of
In Proceed-
knowledge graphs with entity descriptions.
ings of AAAI, 2016.

[Yang et al., 2014] Bishan Yang, Wen-tau Yih, Xiaodong
He, Jianfeng Gao, and Li Deng. Embedding entities and
relations for learning and inference in knowledge bases. In
Proceedings of ICLR, 2014.

[Yin et al., 2016] Jun Yin, Xin Jiang, Zhengdong Lu, Lifeng
Shang, Hang Li, and Xiaoming Li. Neural generative
question answering. In Proceedings of IJCAI, 2016.

