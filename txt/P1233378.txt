SYSTEMATIC STUDY OF COLOR SPACES AND COMPONENTS
FOR THE SEGMENTATION OF SKY/CLOUD IMAGES

Soumyabrata Dev, Yee Hui Lee

Stefan Winkler

School of Electrical and Electronic Engineering
Nanyang Technological University (NTU)
Singapore 639798

Advanced Digital Sciences Center (ADSC)
University of Illinois at Urbana-Champaign
Singapore 138632

7
1
0
2
 
n
a
J
 
7
1
 
 
]

V
C
.
s
c
[
 
 
1
v
0
2
5
4
0
.
1
0
7
1
:
v
i
X
r
a

ABSTRACT

Sky/cloud imaging using ground-based Whole Sky Imagers
(WSI) is a cost-effective means to understanding cloud cover
and weather patterns. The accurate segmentation of clouds
in these images is a challenging task, as clouds do not pos-
sess any clear structure. Several algorithms using different
color models have been proposed in the literature. This pa-
per presents a systematic approach for the selection of color
spaces and components for optimal segmentation of sky/cloud
images. Using mainly principal component analysis (PCA)
and fuzzy clustering for evaluation, we identify the most suit-
able color components for this task.

Index Terms— Remote sensing, Image segmentation,

Color spaces, Principal Component Analysis, Clustering

segmentation of sky/cloud images. For this purpose, we make
use of color distribution characteristics, principal component
analysis (PCA), and clustering methods.1 For our evalua-
tion, we use the HYTA image database [6], which contains 32
sky/cloud images with segmentation ground truth. Our com-
prehensive analysis is able to clearly identify the most suitable
color models and components for the analysis of cloud/sky
images.

The paper is structured as follows. Section 2 describes
our approach, including the color models, techniques, tools,
and database used for the subsequent evaluation. Section 3
presents the results of the quantitative performance compari-
son. Section 4 concludes the paper.

2. APPROACH & TOOLS

1. INTRODUCTION

2.1. Color Models

Cloud analysis plays an important role in weather prediction,
climate modeling, solar irradiation measurement for renew-
able energy generation, and analysis of signal attenuation in
satellite and other space-to-ground communications [1]. The
conventional manner of performing such cloud analysis via
geo-stationary satellite images does not provide sufﬁcient res-
olution for some of these applications. Ground-based Whole
Sky Imagers (WSIs) can provide higher spatial and tempo-
ral resolution for highly-localized cloud analysis, and several
types have been developed [2–5].

The detection of clouds from sky images is challenging as
clouds do not possess any deﬁnite structure, contour, shape, or
size. As a result, color has been used as the predominant fea-
ture for sky/cloud segmentation. Numerous techniques based
on different color models and spectral wavelengths have been
proposed in the literature to solve this problem. However, the
selection of color models and channels in the existing algo-
rithms seem ad-hoc in manner, without systematic analysis or
comparison. This paper aims to address this issue by provid-
ing a structured review and evaluation of color models for the

In the literature, several techniques based on different color
models have been proposed for sky/cloud segmentation. Long
et al. [4] use the ratio of red and blue channels (R/B) to
detect clouds using appropriate threshold values. Calbó and
Sabburg [7] use the same (R/B) ratio to derive statistical fea-
tures (mean, standard deviation, entropy etc.) of the clouds
and subsequently classify the sky/cloud images into different
cloud types. Heinle et al. [8] utilize a k-nearest-neighbor clas-
siﬁer using the difference of red and blue channels (R − B) to
classify cloud types. Souza-Echer et al. [3] choose saturation
for the estimation of cloud coverage. Mantelli-Neto et al. [9]
classify clouds by exploiting the locus of pixels in the RGB
color model. Most recently, Li et al. use a normalized differ-
ence of blue and red channels ( B−R
B+R ) [6] for cloud detection.
The choices of color models employed in existing papers
are based on empirical observations about the color distribu-
tions of cloud and sky pixels. However, there exists no sys-
tematic analysis to determine the most suitable color chan-
nel(s) for this purpose. The purpose of this paper is to present
a uniﬁed approach in the analysis of sky/cloud images us-

This research is funded by the Defence Science and Technology Agency

1 The source code of all simulations in this paper is available online at

(DSTA), Singapore.

https://github.com/Soumyabrata/color-channels.

c1 R c4 H c7 Y c10 L∗
c11 a∗
c2 G c5 S
b∗
c3 B c6 V c9 Q c12

c8

I

c13 R/B
c14 R − B
B−R
c15
B+R

c16 C

new image representation ¨Xi with zero mean and unit vari-
ance:

Table 1: Color spaces and components used for analysis.

ing different color channels and to identify the color channels
with the best results.

We consider the following color spaces and components
for analysis (see Table 1): RGB, HSV, YIQ, CIE L∗a∗b∗,
three forms of red-blue combinations (R/B, R − B, B−R
B+R ),
and chroma C = max(R, G, B) − min(R, G, B). In addition
to the color channels c1−9 and c13−16 used in the existing
literature, we also include c10−12 and c16, as separating chro-
matic and achromatic information may prove beneﬁcial for
sky/cloud image segmentation.

2.2. Color Distribution

Since we are essentially trying to distinguish between two
classes of pixels (sky and clouds), a color model with a bi-
modal distribution can facilitate this task. Color components
with a high degree of bimodality are not only good candidates
for determining the number of clusters in a sample image, but
can also be used to decide whether or not the sample image
requires segmentation in the ﬁrst place. Pearson’s Bimodal-
ity Index (PBI) is a popular statistic to evaluate the bimodal
behavior quantitatively [10]. It is deﬁned as:

PBI = b2 − b1,

(1)

¨Xi = [

c1 − ¯c1
σc1

,

c2 − ¯c2
σc2

, ..,

cj − ¯cj
σcj

, ..,

c16 − ¯c16
σc16

]

(3)

Subsequently the covariance matrix Mi is computed for
each of the ¨Xi. Let the eigenvector eij and eigenvalue λij
(j = 1, ..., 16) be obtained from the eigenvalue decomposi-
tion of the matrix Mi. For the ith image, the eigenvectors
eij corresponding to the largest eigenvalues λij encompass
an orthonormal vector subspace. The eigenvectors and eigen-
values are calculated to project the multi-dimensional vector
space into lower dimensions and to reveal the underlying re-
lationship amongst them.

2.4. Clustering

For clustering the sky/cloud images, we employ the fuzzy c-
means algorithm [11, 12] to assign probabilities of cloud de-
tection to the set of pixels of the input image. The algorithm
for the effective segmentation of clouds from the sky/cloud
images employs the minimization of the following objective
function:

J =

2
(cid:88)

mn
(cid:88)

r=1

s=1

pr(xs)τ d(xs, vr),

(4)

where τ is called the fuzziness index, which controls the de-
gree of fuzziness during the clustering process; we set τ = 2.
d(xs, vr) denotes the 2D Euclidean norm between the input
vector xs and the cluster centers vr. Both v1 and v2 are vec-
tors of dimension k, where k can take any positive integer
number.

where b2 is the kurtosis and b1 is the square of skewness. A
PBI value close to 1 indicates highly bimodal distributions.

3. EVALUATION & RESULTS

2.3. Principal Component Analysis

We use the Principal Component Analysis (PCA) to (a) check
the correlation and similarity between different color compo-
nents, and (b) determine those color components that capture
the greatest variance.

The PCA is computed as follows. Let us assume a sample
image Xi of dimension m × n pixels from a set of N images
(i = 1, ..., N ). Each color channel of the sample image is re-
shaped into a straight vector cj of dimensions mn × 1. These
column vectors are stacked alongside each other to form a
matrix ˆXi of dimensions mn × 16:

ˆXi = [c1, c2, .., cj.., c16]; j = 1, ..., 16

(2)

The ranges of these 16 color channels are different and
need to be normalized so that no color channel is under- or
over-represented in the PCA analysis. Each of the 16 color
channels is normalized using its mean and standard deviation
across all the images in the dataset, thereby generating the

3.1. Sky/Cloud Image Database

To our knowledge,
the only currently available database
for sky/cloud images with segmentation ground truth is the
HYTA database [6]. It consists of 32 distinct images of vari-
ous sky/cloud conditions. Fig. 1 shows a few sample images
of the HYTA database along with their corresponding binary
ground truth.

3.2. Distribution Bimodality

The segmentation of input image into two classes (sky and
clouds) becomes easier for those color channels which exhibit
higher bimodality. The bimodal behavior of a color channel
for the concatenated distribution is measured using Pearson’s
Bimodality Index (PBI) as described in Section 2.2. The re-
sults are summarized in Table 2. Out of the 16 color chan-
nels, c5 (S), c1 (R), and c13 (R/B) have the lowest PBI and
thus exhibit the most bimodal distributions, indicating that the
segmentation of images into two distinct classes should work
well in these color channels.

Fig. 1: Sample images (top row) along with corresponding
sky/cloud segmentation ground truth (bottom row) from the
HYTA database.

c1 2.24 c4 3.11 c7 2.71 c10 2.86 c13 2.27 c16 4.27
c2 2.83 c5 1.94 c8 3.98 c11 8.85 c14 4.43
c3 3.25 c6 3.26 c9 5.96 c12 4.59 c15 2.92

Table 2: PBI values for all color channels. The most bimodal
channels are highlighted in bold.

3.3. PCA

The distribution of the amount of variance captured by the
principal components is shown in Fig. 2. The combination of
ﬁrst and second principal components capture a large majority
(95.4%) of variance in the input data across the individual
images, and over 90% for the entire database.

important principal component axis, and consequently each
of them has a different contribution to the common variance
captured in the corresponding data matrix ¨Xi. These individ-
ual loading factors are essentially the projections of the input
vectors (color channels) on the principal components. The
signiﬁcant color channels in terms of relative contribution to
the ﬁrst principal component axis are c13 (R/B), c15 ( B−R
B+R ,
and c5 (S).

Extending our analysis to ﬁnding the most signiﬁcant pair
of color channels, we need to understand a pair’s cumulative
contribution to the common variance. The sum of the squares
of the corresponding loading factors for different color chan-
nels in the concatenated distribution represents the cumulative
common variance captured by the pair. The pairs that have the
highest cumulative loading on the ﬁrst principal component
are c13-c15, c5-c13, and c5-c15.

Another aspect to consider is the orthogonality between
the individual color channels. For this purpose, we compute
the triangular area enclosed by two given input vectors (color
channels) projected on the plane spanned by the ﬁrst and sec-
ond principal components. There are (cid:0)16
(cid:1) = 120 combina-
tions of two color channels. The triangular area for all unique
cases is shown in Fig. 3, where the brightness of each square
represents the area captured by the corresponding pair. As
expected, certain color channel pairs (the dark patches) are
highly correlated, for example the green channel (c2) with
most luma channels (c7, c10), the various R-B combinations
(c13−15) with one another, and so on.

2

Fig. 2: Distribution of the variance across the principal com-
ponents for all images of the HYTA database. The separate
bar on the right shows the variance distribution for the con-
catenation of all images of the entire database.

In order to ﬁnd the most signiﬁcant vector for the detec-
tion of clouds, the contributing effect of the individual vari-
ables on the primary principal component axis is analyzed.
Every color channel has different loading factors on the most

Fig. 3: Distribution of area AOB for all input vector pairs,
where OA and OB are two color channels. The brightness of
each square represents the area captured by the corresponding
pair.

3.4. Clustering

In order to verify the efﬁcacy of speciﬁc color channels in
the detection of cloud pixels, 1D and 2D clustering results
are presented across all 16 color channels for all the images
of HYTA and evaluated using precision, recall, and F-score.
Since the ground truth provided by the HYTA database are
binary images consisting of two classes, namely sky and
cloud, we convert the probabilistic distribution of cloud pix-
els pr(xs) (cf. Section 2.4) to a binary image by thresholding,
i.e. a pixel having a probability of cloud > 50% is assigned
to a cloud pixel and others to sky pixels.

2

There are 16 color channels for 1D clustering. In a similar
(cid:1) unique color channel combinations for
manner, there are (cid:0)16
2D-clustering. Their performance is illustrated in Fig. 4 in an
upper-triangular grid, where the intensity of a particular grid
denotes the F-score of that particular color channel pair; the
diagonal elements represent the F-scores of the correspond-
ing 1D color channels. The most promising color channels
for 1D-clustering are c13 (R/B), c15 ( B−R
B+R ), and c5 (S) with
high precision, recall, and F-scores. For 2D, the best combi-
nations include c5-c8, c8-c13, and c8-c15 (c8 representing es-
sentially another variety of red-blue difference), with several
other close contenders.

hibit a highly bimodal behavior, are relatively good indicators
of clustering performance. We also found the loading factors
of the ﬁrst eigenvector (i.e. the re-projection of the data points
on the ﬁrst principal component) to be a reasonable guide for
the choice of good color models; the goodness of ﬁt between
loading factors and corresponding F-scores from clustering is
high (R2=0.62).

The pairs c13-c15, c5-c13 and c5-c15 that came out on top
in Section 3.3 also rank highly in terms of 2D-clustering per-
formance. However, there is hardly any performance gain
from using two color components rather than just one.

As a ﬁnal comparison, the precision, recall, and F-scores
of the best color channels are plotted in Fig. 5 against the out-
put of a recently proposed cloud detection algorithm [6]. The
data show that a basic 1D clustering method on the most suit-
able color components and without any tuning or adaptation
can achieve a performance that is on par with a much more
complex state-of-the-art sky/cloud segmentation method.

Fig. 5: Precision, recall and F-scores for 1D and 2D cluster-
ing compared with a state-of-the-art cloud/sky segmentation
algorithm [6].

4. CONCLUSIONS

We presented a systematic analysis of color channels for the
detection of clouds from sky/cloud images using distribution
bimodality, PCA, and clustering. Experimental evaluation
with a cloud segmentation database yields consistent results
across analysis methods. Clustering results obtained using
the best 1D color channels or 2D color channel pairs (includ-
ing red-blue combinations R/B and B−R
B+R , saturation S, or
in-phase component I) are on par with the performance of a
current state-of-the-art cloud detection algorithm in terms of
precision, recall, and F-scores. Future work will involve the
additional use of texture and other features to classify clouds
into different genera as identiﬁed by World Meteorological
Organization.

Fig. 4: F-Scores for all unique cases of 1D (along the diago-
nal) and 2D clustering, represented on a brightness scale. The
highest F-Scores for 1D (dotted frames) and 2D cases (bold
frames) are indicated numerically.

3.5. Discussion

The clustering results as illustrated in Section 3.4 conﬁrm the
efﬁcacy of the color channels determined earlier in Section
3.3. Color channels c5(S), c1 (R), and c13 (R/B), which ex-

5. REFERENCES

[1] J. X. Yeo, Y. H. Lee, and J. T. Ong, “Performance of site
diversity investigated through RADAR derived results,”
IEEE Transactions on Antennas and Propagation, vol.
59, no. 10, pp. 3890–3898, October 2011.

[2] J. E. Shields, M. E. Karr, R. W. Johnson, and A. R. Bur-
den, “Day/night whole sky imagers for 24-h cloud and
sky assessment: history and overview,” Applied Optics,
2013.

[3] M. P. Souza-Echer, E. B. Pereira, L. S. Bins, and
M. A. R. Andrade, “A simple method for the assess-
ment of the cloud cover state in high-latitude regions by
a ground-based digital camera,” Journal of Atmospheric
and Oceanic Technology, vol. 23, no. 3, pp. 437–447,
March 2006.

[4] C. N. Long, J. M. Sabburg, J. Calbó, and D. Pages, “Re-
trieving cloud characteristics from ground-based day-
time color all-sky images,” Journal of Atmospheric and
Oceanic Technology, vol. 23, no. 5, pp. 633–652, 2006.

[5] S. Dev, F. M. Savoy, Y. H. Lee, and S. Winkler,
“WAHRSIS: A low-cost, high-resolution whole sky
in Proc.
imager with near-infrared capabilities,”
IS&T/SPIE Infrared Imaging Systems, 2014.

[6] Q. Li, W. Lu, and J. Yang, “A hybrid thresholding al-
gorithm for cloud detection on ground-based color im-

ages,” Journal of Atmospheric and Oceanic Technology,
vol. 28, no. 10, pp. 1286–1296, Oct. 2011.

[7] J. Calbó and J. Sabburg,

“Feature extraction from
whole-sky ground-based images for cloud-type recogni-
tion,” Journal of Atmospheric and Oceanic Technology,
vol. 25, no. 1, pp. 3–14, Jan. 2008.

[8] A. Heinle, A. Macke, and A. Srivastav,

“Automatic
cloud classiﬁcation of whole sky images,” Atmospheric
Measurement Techniques, vol. 3, no. 3, pp. 557–567,
2010.

[9] S. L. Mantelli-Neto, A. von Wangenheim, E. B. Pereira,
and E. Comunello, “The use of Euclidean geometric
distance on RGB color space for the classiﬁcation of
sky and cloud patterns,” Journal of Atmospheric and
Oceanic Technology, vol. 27, no. 9, pp. 1504–1517,
2010.

[10] T. R. Knapp, “Bimodality revisited,” Journal of Modern

Applied Statistical Methods, vol. 6, no. 1, pp. 3, 2007.

[11] J. C. Bezdek, R. Ehrlich, and W. Full,

“FCM: The
fuzzy c-means clustering algorithm,” Computers &
Geosciences, vol. 10, no. 2-3, pp. 191–203, 1984.

[12] C. V. Jawahar, P. K. Biswas, and A. K. Ray, “Investiga-
tions on fuzzy thresholding based on fuzzy clustering,”
vol. 30, no. 10, pp. 1605–1613, Oct. 1997.

SYSTEMATIC STUDY OF COLOR SPACES AND COMPONENTS
FOR THE SEGMENTATION OF SKY/CLOUD IMAGES

Soumyabrata Dev, Yee Hui Lee

Stefan Winkler

School of Electrical and Electronic Engineering
Nanyang Technological University (NTU)
Singapore 639798

Advanced Digital Sciences Center (ADSC)
University of Illinois at Urbana-Champaign
Singapore 138632

7
1
0
2
 
n
a
J
 
7
1
 
 
]

V
C
.
s
c
[
 
 
1
v
0
2
5
4
0
.
1
0
7
1
:
v
i
X
r
a

ABSTRACT

Sky/cloud imaging using ground-based Whole Sky Imagers
(WSI) is a cost-effective means to understanding cloud cover
and weather patterns. The accurate segmentation of clouds
in these images is a challenging task, as clouds do not pos-
sess any clear structure. Several algorithms using different
color models have been proposed in the literature. This pa-
per presents a systematic approach for the selection of color
spaces and components for optimal segmentation of sky/cloud
images. Using mainly principal component analysis (PCA)
and fuzzy clustering for evaluation, we identify the most suit-
able color components for this task.

Index Terms— Remote sensing, Image segmentation,

Color spaces, Principal Component Analysis, Clustering

segmentation of sky/cloud images. For this purpose, we make
use of color distribution characteristics, principal component
analysis (PCA), and clustering methods.1 For our evalua-
tion, we use the HYTA image database [6], which contains 32
sky/cloud images with segmentation ground truth. Our com-
prehensive analysis is able to clearly identify the most suitable
color models and components for the analysis of cloud/sky
images.

The paper is structured as follows. Section 2 describes
our approach, including the color models, techniques, tools,
and database used for the subsequent evaluation. Section 3
presents the results of the quantitative performance compari-
son. Section 4 concludes the paper.

2. APPROACH & TOOLS

1. INTRODUCTION

2.1. Color Models

Cloud analysis plays an important role in weather prediction,
climate modeling, solar irradiation measurement for renew-
able energy generation, and analysis of signal attenuation in
satellite and other space-to-ground communications [1]. The
conventional manner of performing such cloud analysis via
geo-stationary satellite images does not provide sufﬁcient res-
olution for some of these applications. Ground-based Whole
Sky Imagers (WSIs) can provide higher spatial and tempo-
ral resolution for highly-localized cloud analysis, and several
types have been developed [2–5].

The detection of clouds from sky images is challenging as
clouds do not possess any deﬁnite structure, contour, shape, or
size. As a result, color has been used as the predominant fea-
ture for sky/cloud segmentation. Numerous techniques based
on different color models and spectral wavelengths have been
proposed in the literature to solve this problem. However, the
selection of color models and channels in the existing algo-
rithms seem ad-hoc in manner, without systematic analysis or
comparison. This paper aims to address this issue by provid-
ing a structured review and evaluation of color models for the

In the literature, several techniques based on different color
models have been proposed for sky/cloud segmentation. Long
et al. [4] use the ratio of red and blue channels (R/B) to
detect clouds using appropriate threshold values. Calbó and
Sabburg [7] use the same (R/B) ratio to derive statistical fea-
tures (mean, standard deviation, entropy etc.) of the clouds
and subsequently classify the sky/cloud images into different
cloud types. Heinle et al. [8] utilize a k-nearest-neighbor clas-
siﬁer using the difference of red and blue channels (R − B) to
classify cloud types. Souza-Echer et al. [3] choose saturation
for the estimation of cloud coverage. Mantelli-Neto et al. [9]
classify clouds by exploiting the locus of pixels in the RGB
color model. Most recently, Li et al. use a normalized differ-
ence of blue and red channels ( B−R
B+R ) [6] for cloud detection.
The choices of color models employed in existing papers
are based on empirical observations about the color distribu-
tions of cloud and sky pixels. However, there exists no sys-
tematic analysis to determine the most suitable color chan-
nel(s) for this purpose. The purpose of this paper is to present
a uniﬁed approach in the analysis of sky/cloud images us-

This research is funded by the Defence Science and Technology Agency

1 The source code of all simulations in this paper is available online at

(DSTA), Singapore.

https://github.com/Soumyabrata/color-channels.

c1 R c4 H c7 Y c10 L∗
c11 a∗
c2 G c5 S
b∗
c3 B c6 V c9 Q c12

c8

I

c13 R/B
c14 R − B
B−R
c15
B+R

c16 C

new image representation ¨Xi with zero mean and unit vari-
ance:

Table 1: Color spaces and components used for analysis.

ing different color channels and to identify the color channels
with the best results.

We consider the following color spaces and components
for analysis (see Table 1): RGB, HSV, YIQ, CIE L∗a∗b∗,
three forms of red-blue combinations (R/B, R − B, B−R
B+R ),
and chroma C = max(R, G, B) − min(R, G, B). In addition
to the color channels c1−9 and c13−16 used in the existing
literature, we also include c10−12 and c16, as separating chro-
matic and achromatic information may prove beneﬁcial for
sky/cloud image segmentation.

2.2. Color Distribution

Since we are essentially trying to distinguish between two
classes of pixels (sky and clouds), a color model with a bi-
modal distribution can facilitate this task. Color components
with a high degree of bimodality are not only good candidates
for determining the number of clusters in a sample image, but
can also be used to decide whether or not the sample image
requires segmentation in the ﬁrst place. Pearson’s Bimodal-
ity Index (PBI) is a popular statistic to evaluate the bimodal
behavior quantitatively [10]. It is deﬁned as:

PBI = b2 − b1,

(1)

¨Xi = [

c1 − ¯c1
σc1

,

c2 − ¯c2
σc2

, ..,

cj − ¯cj
σcj

, ..,

c16 − ¯c16
σc16

]

(3)

Subsequently the covariance matrix Mi is computed for
each of the ¨Xi. Let the eigenvector eij and eigenvalue λij
(j = 1, ..., 16) be obtained from the eigenvalue decomposi-
tion of the matrix Mi. For the ith image, the eigenvectors
eij corresponding to the largest eigenvalues λij encompass
an orthonormal vector subspace. The eigenvectors and eigen-
values are calculated to project the multi-dimensional vector
space into lower dimensions and to reveal the underlying re-
lationship amongst them.

2.4. Clustering

For clustering the sky/cloud images, we employ the fuzzy c-
means algorithm [11, 12] to assign probabilities of cloud de-
tection to the set of pixels of the input image. The algorithm
for the effective segmentation of clouds from the sky/cloud
images employs the minimization of the following objective
function:

J =

2
(cid:88)

mn
(cid:88)

r=1

s=1

pr(xs)τ d(xs, vr),

(4)

where τ is called the fuzziness index, which controls the de-
gree of fuzziness during the clustering process; we set τ = 2.
d(xs, vr) denotes the 2D Euclidean norm between the input
vector xs and the cluster centers vr. Both v1 and v2 are vec-
tors of dimension k, where k can take any positive integer
number.

where b2 is the kurtosis and b1 is the square of skewness. A
PBI value close to 1 indicates highly bimodal distributions.

3. EVALUATION & RESULTS

2.3. Principal Component Analysis

We use the Principal Component Analysis (PCA) to (a) check
the correlation and similarity between different color compo-
nents, and (b) determine those color components that capture
the greatest variance.

The PCA is computed as follows. Let us assume a sample
image Xi of dimension m × n pixels from a set of N images
(i = 1, ..., N ). Each color channel of the sample image is re-
shaped into a straight vector cj of dimensions mn × 1. These
column vectors are stacked alongside each other to form a
matrix ˆXi of dimensions mn × 16:

ˆXi = [c1, c2, .., cj.., c16]; j = 1, ..., 16

(2)

The ranges of these 16 color channels are different and
need to be normalized so that no color channel is under- or
over-represented in the PCA analysis. Each of the 16 color
channels is normalized using its mean and standard deviation
across all the images in the dataset, thereby generating the

3.1. Sky/Cloud Image Database

To our knowledge,
the only currently available database
for sky/cloud images with segmentation ground truth is the
HYTA database [6]. It consists of 32 distinct images of vari-
ous sky/cloud conditions. Fig. 1 shows a few sample images
of the HYTA database along with their corresponding binary
ground truth.

3.2. Distribution Bimodality

The segmentation of input image into two classes (sky and
clouds) becomes easier for those color channels which exhibit
higher bimodality. The bimodal behavior of a color channel
for the concatenated distribution is measured using Pearson’s
Bimodality Index (PBI) as described in Section 2.2. The re-
sults are summarized in Table 2. Out of the 16 color chan-
nels, c5 (S), c1 (R), and c13 (R/B) have the lowest PBI and
thus exhibit the most bimodal distributions, indicating that the
segmentation of images into two distinct classes should work
well in these color channels.

Fig. 1: Sample images (top row) along with corresponding
sky/cloud segmentation ground truth (bottom row) from the
HYTA database.

c1 2.24 c4 3.11 c7 2.71 c10 2.86 c13 2.27 c16 4.27
c2 2.83 c5 1.94 c8 3.98 c11 8.85 c14 4.43
c3 3.25 c6 3.26 c9 5.96 c12 4.59 c15 2.92

Table 2: PBI values for all color channels. The most bimodal
channels are highlighted in bold.

3.3. PCA

The distribution of the amount of variance captured by the
principal components is shown in Fig. 2. The combination of
ﬁrst and second principal components capture a large majority
(95.4%) of variance in the input data across the individual
images, and over 90% for the entire database.

important principal component axis, and consequently each
of them has a different contribution to the common variance
captured in the corresponding data matrix ¨Xi. These individ-
ual loading factors are essentially the projections of the input
vectors (color channels) on the principal components. The
signiﬁcant color channels in terms of relative contribution to
the ﬁrst principal component axis are c13 (R/B), c15 ( B−R
B+R ,
and c5 (S).

Extending our analysis to ﬁnding the most signiﬁcant pair
of color channels, we need to understand a pair’s cumulative
contribution to the common variance. The sum of the squares
of the corresponding loading factors for different color chan-
nels in the concatenated distribution represents the cumulative
common variance captured by the pair. The pairs that have the
highest cumulative loading on the ﬁrst principal component
are c13-c15, c5-c13, and c5-c15.

Another aspect to consider is the orthogonality between
the individual color channels. For this purpose, we compute
the triangular area enclosed by two given input vectors (color
channels) projected on the plane spanned by the ﬁrst and sec-
ond principal components. There are (cid:0)16
(cid:1) = 120 combina-
tions of two color channels. The triangular area for all unique
cases is shown in Fig. 3, where the brightness of each square
represents the area captured by the corresponding pair. As
expected, certain color channel pairs (the dark patches) are
highly correlated, for example the green channel (c2) with
most luma channels (c7, c10), the various R-B combinations
(c13−15) with one another, and so on.

2

Fig. 2: Distribution of the variance across the principal com-
ponents for all images of the HYTA database. The separate
bar on the right shows the variance distribution for the con-
catenation of all images of the entire database.

In order to ﬁnd the most signiﬁcant vector for the detec-
tion of clouds, the contributing effect of the individual vari-
ables on the primary principal component axis is analyzed.
Every color channel has different loading factors on the most

Fig. 3: Distribution of area AOB for all input vector pairs,
where OA and OB are two color channels. The brightness of
each square represents the area captured by the corresponding
pair.

3.4. Clustering

In order to verify the efﬁcacy of speciﬁc color channels in
the detection of cloud pixels, 1D and 2D clustering results
are presented across all 16 color channels for all the images
of HYTA and evaluated using precision, recall, and F-score.
Since the ground truth provided by the HYTA database are
binary images consisting of two classes, namely sky and
cloud, we convert the probabilistic distribution of cloud pix-
els pr(xs) (cf. Section 2.4) to a binary image by thresholding,
i.e. a pixel having a probability of cloud > 50% is assigned
to a cloud pixel and others to sky pixels.

2

There are 16 color channels for 1D clustering. In a similar
(cid:1) unique color channel combinations for
manner, there are (cid:0)16
2D-clustering. Their performance is illustrated in Fig. 4 in an
upper-triangular grid, where the intensity of a particular grid
denotes the F-score of that particular color channel pair; the
diagonal elements represent the F-scores of the correspond-
ing 1D color channels. The most promising color channels
for 1D-clustering are c13 (R/B), c15 ( B−R
B+R ), and c5 (S) with
high precision, recall, and F-scores. For 2D, the best combi-
nations include c5-c8, c8-c13, and c8-c15 (c8 representing es-
sentially another variety of red-blue difference), with several
other close contenders.

hibit a highly bimodal behavior, are relatively good indicators
of clustering performance. We also found the loading factors
of the ﬁrst eigenvector (i.e. the re-projection of the data points
on the ﬁrst principal component) to be a reasonable guide for
the choice of good color models; the goodness of ﬁt between
loading factors and corresponding F-scores from clustering is
high (R2=0.62).

The pairs c13-c15, c5-c13 and c5-c15 that came out on top
in Section 3.3 also rank highly in terms of 2D-clustering per-
formance. However, there is hardly any performance gain
from using two color components rather than just one.

As a ﬁnal comparison, the precision, recall, and F-scores
of the best color channels are plotted in Fig. 5 against the out-
put of a recently proposed cloud detection algorithm [6]. The
data show that a basic 1D clustering method on the most suit-
able color components and without any tuning or adaptation
can achieve a performance that is on par with a much more
complex state-of-the-art sky/cloud segmentation method.

Fig. 5: Precision, recall and F-scores for 1D and 2D cluster-
ing compared with a state-of-the-art cloud/sky segmentation
algorithm [6].

4. CONCLUSIONS

We presented a systematic analysis of color channels for the
detection of clouds from sky/cloud images using distribution
bimodality, PCA, and clustering. Experimental evaluation
with a cloud segmentation database yields consistent results
across analysis methods. Clustering results obtained using
the best 1D color channels or 2D color channel pairs (includ-
ing red-blue combinations R/B and B−R
B+R , saturation S, or
in-phase component I) are on par with the performance of a
current state-of-the-art cloud detection algorithm in terms of
precision, recall, and F-scores. Future work will involve the
additional use of texture and other features to classify clouds
into different genera as identiﬁed by World Meteorological
Organization.

Fig. 4: F-Scores for all unique cases of 1D (along the diago-
nal) and 2D clustering, represented on a brightness scale. The
highest F-Scores for 1D (dotted frames) and 2D cases (bold
frames) are indicated numerically.

3.5. Discussion

The clustering results as illustrated in Section 3.4 conﬁrm the
efﬁcacy of the color channels determined earlier in Section
3.3. Color channels c5(S), c1 (R), and c13 (R/B), which ex-

5. REFERENCES

[1] J. X. Yeo, Y. H. Lee, and J. T. Ong, “Performance of site
diversity investigated through RADAR derived results,”
IEEE Transactions on Antennas and Propagation, vol.
59, no. 10, pp. 3890–3898, October 2011.

[2] J. E. Shields, M. E. Karr, R. W. Johnson, and A. R. Bur-
den, “Day/night whole sky imagers for 24-h cloud and
sky assessment: history and overview,” Applied Optics,
2013.

[3] M. P. Souza-Echer, E. B. Pereira, L. S. Bins, and
M. A. R. Andrade, “A simple method for the assess-
ment of the cloud cover state in high-latitude regions by
a ground-based digital camera,” Journal of Atmospheric
and Oceanic Technology, vol. 23, no. 3, pp. 437–447,
March 2006.

[4] C. N. Long, J. M. Sabburg, J. Calbó, and D. Pages, “Re-
trieving cloud characteristics from ground-based day-
time color all-sky images,” Journal of Atmospheric and
Oceanic Technology, vol. 23, no. 5, pp. 633–652, 2006.

[5] S. Dev, F. M. Savoy, Y. H. Lee, and S. Winkler,
“WAHRSIS: A low-cost, high-resolution whole sky
in Proc.
imager with near-infrared capabilities,”
IS&T/SPIE Infrared Imaging Systems, 2014.

[6] Q. Li, W. Lu, and J. Yang, “A hybrid thresholding al-
gorithm for cloud detection on ground-based color im-

ages,” Journal of Atmospheric and Oceanic Technology,
vol. 28, no. 10, pp. 1286–1296, Oct. 2011.

[7] J. Calbó and J. Sabburg,

“Feature extraction from
whole-sky ground-based images for cloud-type recogni-
tion,” Journal of Atmospheric and Oceanic Technology,
vol. 25, no. 1, pp. 3–14, Jan. 2008.

[8] A. Heinle, A. Macke, and A. Srivastav,

“Automatic
cloud classiﬁcation of whole sky images,” Atmospheric
Measurement Techniques, vol. 3, no. 3, pp. 557–567,
2010.

[9] S. L. Mantelli-Neto, A. von Wangenheim, E. B. Pereira,
and E. Comunello, “The use of Euclidean geometric
distance on RGB color space for the classiﬁcation of
sky and cloud patterns,” Journal of Atmospheric and
Oceanic Technology, vol. 27, no. 9, pp. 1504–1517,
2010.

[10] T. R. Knapp, “Bimodality revisited,” Journal of Modern

Applied Statistical Methods, vol. 6, no. 1, pp. 3, 2007.

[11] J. C. Bezdek, R. Ehrlich, and W. Full,

“FCM: The
fuzzy c-means clustering algorithm,” Computers &
Geosciences, vol. 10, no. 2-3, pp. 191–203, 1984.

[12] C. V. Jawahar, P. K. Biswas, and A. K. Ray, “Investiga-
tions on fuzzy thresholding based on fuzzy clustering,”
vol. 30, no. 10, pp. 1605–1613, Oct. 1997.

SYSTEMATIC STUDY OF COLOR SPACES AND COMPONENTS
FOR THE SEGMENTATION OF SKY/CLOUD IMAGES

Soumyabrata Dev, Yee Hui Lee

Stefan Winkler

School of Electrical and Electronic Engineering
Nanyang Technological University (NTU)
Singapore 639798

Advanced Digital Sciences Center (ADSC)
University of Illinois at Urbana-Champaign
Singapore 138632

7
1
0
2
 
n
a
J
 
7
1
 
 
]

V
C
.
s
c
[
 
 
1
v
0
2
5
4
0
.
1
0
7
1
:
v
i
X
r
a

ABSTRACT

Sky/cloud imaging using ground-based Whole Sky Imagers
(WSI) is a cost-effective means to understanding cloud cover
and weather patterns. The accurate segmentation of clouds
in these images is a challenging task, as clouds do not pos-
sess any clear structure. Several algorithms using different
color models have been proposed in the literature. This pa-
per presents a systematic approach for the selection of color
spaces and components for optimal segmentation of sky/cloud
images. Using mainly principal component analysis (PCA)
and fuzzy clustering for evaluation, we identify the most suit-
able color components for this task.

Index Terms— Remote sensing, Image segmentation,

Color spaces, Principal Component Analysis, Clustering

segmentation of sky/cloud images. For this purpose, we make
use of color distribution characteristics, principal component
analysis (PCA), and clustering methods.1 For our evalua-
tion, we use the HYTA image database [6], which contains 32
sky/cloud images with segmentation ground truth. Our com-
prehensive analysis is able to clearly identify the most suitable
color models and components for the analysis of cloud/sky
images.

The paper is structured as follows. Section 2 describes
our approach, including the color models, techniques, tools,
and database used for the subsequent evaluation. Section 3
presents the results of the quantitative performance compari-
son. Section 4 concludes the paper.

2. APPROACH & TOOLS

1. INTRODUCTION

2.1. Color Models

Cloud analysis plays an important role in weather prediction,
climate modeling, solar irradiation measurement for renew-
able energy generation, and analysis of signal attenuation in
satellite and other space-to-ground communications [1]. The
conventional manner of performing such cloud analysis via
geo-stationary satellite images does not provide sufﬁcient res-
olution for some of these applications. Ground-based Whole
Sky Imagers (WSIs) can provide higher spatial and tempo-
ral resolution for highly-localized cloud analysis, and several
types have been developed [2–5].

The detection of clouds from sky images is challenging as
clouds do not possess any deﬁnite structure, contour, shape, or
size. As a result, color has been used as the predominant fea-
ture for sky/cloud segmentation. Numerous techniques based
on different color models and spectral wavelengths have been
proposed in the literature to solve this problem. However, the
selection of color models and channels in the existing algo-
rithms seem ad-hoc in manner, without systematic analysis or
comparison. This paper aims to address this issue by provid-
ing a structured review and evaluation of color models for the

In the literature, several techniques based on different color
models have been proposed for sky/cloud segmentation. Long
et al. [4] use the ratio of red and blue channels (R/B) to
detect clouds using appropriate threshold values. Calbó and
Sabburg [7] use the same (R/B) ratio to derive statistical fea-
tures (mean, standard deviation, entropy etc.) of the clouds
and subsequently classify the sky/cloud images into different
cloud types. Heinle et al. [8] utilize a k-nearest-neighbor clas-
siﬁer using the difference of red and blue channels (R − B) to
classify cloud types. Souza-Echer et al. [3] choose saturation
for the estimation of cloud coverage. Mantelli-Neto et al. [9]
classify clouds by exploiting the locus of pixels in the RGB
color model. Most recently, Li et al. use a normalized differ-
ence of blue and red channels ( B−R
B+R ) [6] for cloud detection.
The choices of color models employed in existing papers
are based on empirical observations about the color distribu-
tions of cloud and sky pixels. However, there exists no sys-
tematic analysis to determine the most suitable color chan-
nel(s) for this purpose. The purpose of this paper is to present
a uniﬁed approach in the analysis of sky/cloud images us-

This research is funded by the Defence Science and Technology Agency

1 The source code of all simulations in this paper is available online at

(DSTA), Singapore.

https://github.com/Soumyabrata/color-channels.

c1 R c4 H c7 Y c10 L∗
c11 a∗
c2 G c5 S
b∗
c3 B c6 V c9 Q c12

c8

I

c13 R/B
c14 R − B
B−R
c15
B+R

c16 C

new image representation ¨Xi with zero mean and unit vari-
ance:

Table 1: Color spaces and components used for analysis.

ing different color channels and to identify the color channels
with the best results.

We consider the following color spaces and components
for analysis (see Table 1): RGB, HSV, YIQ, CIE L∗a∗b∗,
three forms of red-blue combinations (R/B, R − B, B−R
B+R ),
and chroma C = max(R, G, B) − min(R, G, B). In addition
to the color channels c1−9 and c13−16 used in the existing
literature, we also include c10−12 and c16, as separating chro-
matic and achromatic information may prove beneﬁcial for
sky/cloud image segmentation.

2.2. Color Distribution

Since we are essentially trying to distinguish between two
classes of pixels (sky and clouds), a color model with a bi-
modal distribution can facilitate this task. Color components
with a high degree of bimodality are not only good candidates
for determining the number of clusters in a sample image, but
can also be used to decide whether or not the sample image
requires segmentation in the ﬁrst place. Pearson’s Bimodal-
ity Index (PBI) is a popular statistic to evaluate the bimodal
behavior quantitatively [10]. It is deﬁned as:

PBI = b2 − b1,

(1)

¨Xi = [

c1 − ¯c1
σc1

,

c2 − ¯c2
σc2

, ..,

cj − ¯cj
σcj

, ..,

c16 − ¯c16
σc16

]

(3)

Subsequently the covariance matrix Mi is computed for
each of the ¨Xi. Let the eigenvector eij and eigenvalue λij
(j = 1, ..., 16) be obtained from the eigenvalue decomposi-
tion of the matrix Mi. For the ith image, the eigenvectors
eij corresponding to the largest eigenvalues λij encompass
an orthonormal vector subspace. The eigenvectors and eigen-
values are calculated to project the multi-dimensional vector
space into lower dimensions and to reveal the underlying re-
lationship amongst them.

2.4. Clustering

For clustering the sky/cloud images, we employ the fuzzy c-
means algorithm [11, 12] to assign probabilities of cloud de-
tection to the set of pixels of the input image. The algorithm
for the effective segmentation of clouds from the sky/cloud
images employs the minimization of the following objective
function:

J =

2
(cid:88)

mn
(cid:88)

r=1

s=1

pr(xs)τ d(xs, vr),

(4)

where τ is called the fuzziness index, which controls the de-
gree of fuzziness during the clustering process; we set τ = 2.
d(xs, vr) denotes the 2D Euclidean norm between the input
vector xs and the cluster centers vr. Both v1 and v2 are vec-
tors of dimension k, where k can take any positive integer
number.

where b2 is the kurtosis and b1 is the square of skewness. A
PBI value close to 1 indicates highly bimodal distributions.

3. EVALUATION & RESULTS

2.3. Principal Component Analysis

We use the Principal Component Analysis (PCA) to (a) check
the correlation and similarity between different color compo-
nents, and (b) determine those color components that capture
the greatest variance.

The PCA is computed as follows. Let us assume a sample
image Xi of dimension m × n pixels from a set of N images
(i = 1, ..., N ). Each color channel of the sample image is re-
shaped into a straight vector cj of dimensions mn × 1. These
column vectors are stacked alongside each other to form a
matrix ˆXi of dimensions mn × 16:

ˆXi = [c1, c2, .., cj.., c16]; j = 1, ..., 16

(2)

The ranges of these 16 color channels are different and
need to be normalized so that no color channel is under- or
over-represented in the PCA analysis. Each of the 16 color
channels is normalized using its mean and standard deviation
across all the images in the dataset, thereby generating the

3.1. Sky/Cloud Image Database

To our knowledge,
the only currently available database
for sky/cloud images with segmentation ground truth is the
HYTA database [6]. It consists of 32 distinct images of vari-
ous sky/cloud conditions. Fig. 1 shows a few sample images
of the HYTA database along with their corresponding binary
ground truth.

3.2. Distribution Bimodality

The segmentation of input image into two classes (sky and
clouds) becomes easier for those color channels which exhibit
higher bimodality. The bimodal behavior of a color channel
for the concatenated distribution is measured using Pearson’s
Bimodality Index (PBI) as described in Section 2.2. The re-
sults are summarized in Table 2. Out of the 16 color chan-
nels, c5 (S), c1 (R), and c13 (R/B) have the lowest PBI and
thus exhibit the most bimodal distributions, indicating that the
segmentation of images into two distinct classes should work
well in these color channels.

Fig. 1: Sample images (top row) along with corresponding
sky/cloud segmentation ground truth (bottom row) from the
HYTA database.

c1 2.24 c4 3.11 c7 2.71 c10 2.86 c13 2.27 c16 4.27
c2 2.83 c5 1.94 c8 3.98 c11 8.85 c14 4.43
c3 3.25 c6 3.26 c9 5.96 c12 4.59 c15 2.92

Table 2: PBI values for all color channels. The most bimodal
channels are highlighted in bold.

3.3. PCA

The distribution of the amount of variance captured by the
principal components is shown in Fig. 2. The combination of
ﬁrst and second principal components capture a large majority
(95.4%) of variance in the input data across the individual
images, and over 90% for the entire database.

important principal component axis, and consequently each
of them has a different contribution to the common variance
captured in the corresponding data matrix ¨Xi. These individ-
ual loading factors are essentially the projections of the input
vectors (color channels) on the principal components. The
signiﬁcant color channels in terms of relative contribution to
the ﬁrst principal component axis are c13 (R/B), c15 ( B−R
B+R ,
and c5 (S).

Extending our analysis to ﬁnding the most signiﬁcant pair
of color channels, we need to understand a pair’s cumulative
contribution to the common variance. The sum of the squares
of the corresponding loading factors for different color chan-
nels in the concatenated distribution represents the cumulative
common variance captured by the pair. The pairs that have the
highest cumulative loading on the ﬁrst principal component
are c13-c15, c5-c13, and c5-c15.

Another aspect to consider is the orthogonality between
the individual color channels. For this purpose, we compute
the triangular area enclosed by two given input vectors (color
channels) projected on the plane spanned by the ﬁrst and sec-
ond principal components. There are (cid:0)16
(cid:1) = 120 combina-
tions of two color channels. The triangular area for all unique
cases is shown in Fig. 3, where the brightness of each square
represents the area captured by the corresponding pair. As
expected, certain color channel pairs (the dark patches) are
highly correlated, for example the green channel (c2) with
most luma channels (c7, c10), the various R-B combinations
(c13−15) with one another, and so on.

2

Fig. 2: Distribution of the variance across the principal com-
ponents for all images of the HYTA database. The separate
bar on the right shows the variance distribution for the con-
catenation of all images of the entire database.

In order to ﬁnd the most signiﬁcant vector for the detec-
tion of clouds, the contributing effect of the individual vari-
ables on the primary principal component axis is analyzed.
Every color channel has different loading factors on the most

Fig. 3: Distribution of area AOB for all input vector pairs,
where OA and OB are two color channels. The brightness of
each square represents the area captured by the corresponding
pair.

3.4. Clustering

In order to verify the efﬁcacy of speciﬁc color channels in
the detection of cloud pixels, 1D and 2D clustering results
are presented across all 16 color channels for all the images
of HYTA and evaluated using precision, recall, and F-score.
Since the ground truth provided by the HYTA database are
binary images consisting of two classes, namely sky and
cloud, we convert the probabilistic distribution of cloud pix-
els pr(xs) (cf. Section 2.4) to a binary image by thresholding,
i.e. a pixel having a probability of cloud > 50% is assigned
to a cloud pixel and others to sky pixels.

2

There are 16 color channels for 1D clustering. In a similar
(cid:1) unique color channel combinations for
manner, there are (cid:0)16
2D-clustering. Their performance is illustrated in Fig. 4 in an
upper-triangular grid, where the intensity of a particular grid
denotes the F-score of that particular color channel pair; the
diagonal elements represent the F-scores of the correspond-
ing 1D color channels. The most promising color channels
for 1D-clustering are c13 (R/B), c15 ( B−R
B+R ), and c5 (S) with
high precision, recall, and F-scores. For 2D, the best combi-
nations include c5-c8, c8-c13, and c8-c15 (c8 representing es-
sentially another variety of red-blue difference), with several
other close contenders.

hibit a highly bimodal behavior, are relatively good indicators
of clustering performance. We also found the loading factors
of the ﬁrst eigenvector (i.e. the re-projection of the data points
on the ﬁrst principal component) to be a reasonable guide for
the choice of good color models; the goodness of ﬁt between
loading factors and corresponding F-scores from clustering is
high (R2=0.62).

The pairs c13-c15, c5-c13 and c5-c15 that came out on top
in Section 3.3 also rank highly in terms of 2D-clustering per-
formance. However, there is hardly any performance gain
from using two color components rather than just one.

As a ﬁnal comparison, the precision, recall, and F-scores
of the best color channels are plotted in Fig. 5 against the out-
put of a recently proposed cloud detection algorithm [6]. The
data show that a basic 1D clustering method on the most suit-
able color components and without any tuning or adaptation
can achieve a performance that is on par with a much more
complex state-of-the-art sky/cloud segmentation method.

Fig. 5: Precision, recall and F-scores for 1D and 2D cluster-
ing compared with a state-of-the-art cloud/sky segmentation
algorithm [6].

4. CONCLUSIONS

We presented a systematic analysis of color channels for the
detection of clouds from sky/cloud images using distribution
bimodality, PCA, and clustering. Experimental evaluation
with a cloud segmentation database yields consistent results
across analysis methods. Clustering results obtained using
the best 1D color channels or 2D color channel pairs (includ-
ing red-blue combinations R/B and B−R
B+R , saturation S, or
in-phase component I) are on par with the performance of a
current state-of-the-art cloud detection algorithm in terms of
precision, recall, and F-scores. Future work will involve the
additional use of texture and other features to classify clouds
into different genera as identiﬁed by World Meteorological
Organization.

Fig. 4: F-Scores for all unique cases of 1D (along the diago-
nal) and 2D clustering, represented on a brightness scale. The
highest F-Scores for 1D (dotted frames) and 2D cases (bold
frames) are indicated numerically.

3.5. Discussion

The clustering results as illustrated in Section 3.4 conﬁrm the
efﬁcacy of the color channels determined earlier in Section
3.3. Color channels c5(S), c1 (R), and c13 (R/B), which ex-

5. REFERENCES

[1] J. X. Yeo, Y. H. Lee, and J. T. Ong, “Performance of site
diversity investigated through RADAR derived results,”
IEEE Transactions on Antennas and Propagation, vol.
59, no. 10, pp. 3890–3898, October 2011.

[2] J. E. Shields, M. E. Karr, R. W. Johnson, and A. R. Bur-
den, “Day/night whole sky imagers for 24-h cloud and
sky assessment: history and overview,” Applied Optics,
2013.

[3] M. P. Souza-Echer, E. B. Pereira, L. S. Bins, and
M. A. R. Andrade, “A simple method for the assess-
ment of the cloud cover state in high-latitude regions by
a ground-based digital camera,” Journal of Atmospheric
and Oceanic Technology, vol. 23, no. 3, pp. 437–447,
March 2006.

[4] C. N. Long, J. M. Sabburg, J. Calbó, and D. Pages, “Re-
trieving cloud characteristics from ground-based day-
time color all-sky images,” Journal of Atmospheric and
Oceanic Technology, vol. 23, no. 5, pp. 633–652, 2006.

[5] S. Dev, F. M. Savoy, Y. H. Lee, and S. Winkler,
“WAHRSIS: A low-cost, high-resolution whole sky
in Proc.
imager with near-infrared capabilities,”
IS&T/SPIE Infrared Imaging Systems, 2014.

[6] Q. Li, W. Lu, and J. Yang, “A hybrid thresholding al-
gorithm for cloud detection on ground-based color im-

ages,” Journal of Atmospheric and Oceanic Technology,
vol. 28, no. 10, pp. 1286–1296, Oct. 2011.

[7] J. Calbó and J. Sabburg,

“Feature extraction from
whole-sky ground-based images for cloud-type recogni-
tion,” Journal of Atmospheric and Oceanic Technology,
vol. 25, no. 1, pp. 3–14, Jan. 2008.

[8] A. Heinle, A. Macke, and A. Srivastav,

“Automatic
cloud classiﬁcation of whole sky images,” Atmospheric
Measurement Techniques, vol. 3, no. 3, pp. 557–567,
2010.

[9] S. L. Mantelli-Neto, A. von Wangenheim, E. B. Pereira,
and E. Comunello, “The use of Euclidean geometric
distance on RGB color space for the classiﬁcation of
sky and cloud patterns,” Journal of Atmospheric and
Oceanic Technology, vol. 27, no. 9, pp. 1504–1517,
2010.

[10] T. R. Knapp, “Bimodality revisited,” Journal of Modern

Applied Statistical Methods, vol. 6, no. 1, pp. 3, 2007.

[11] J. C. Bezdek, R. Ehrlich, and W. Full,

“FCM: The
fuzzy c-means clustering algorithm,” Computers &
Geosciences, vol. 10, no. 2-3, pp. 191–203, 1984.

[12] C. V. Jawahar, P. K. Biswas, and A. K. Ray, “Investiga-
tions on fuzzy thresholding based on fuzzy clustering,”
vol. 30, no. 10, pp. 1605–1613, Oct. 1997.

SYSTEMATIC STUDY OF COLOR SPACES AND COMPONENTS
FOR THE SEGMENTATION OF SKY/CLOUD IMAGES

Soumyabrata Dev, Yee Hui Lee

Stefan Winkler

School of Electrical and Electronic Engineering
Nanyang Technological University (NTU)
Singapore 639798

Advanced Digital Sciences Center (ADSC)
University of Illinois at Urbana-Champaign
Singapore 138632

7
1
0
2
 
n
a
J
 
7
1
 
 
]

V
C
.
s
c
[
 
 
1
v
0
2
5
4
0
.
1
0
7
1
:
v
i
X
r
a

ABSTRACT

Sky/cloud imaging using ground-based Whole Sky Imagers
(WSI) is a cost-effective means to understanding cloud cover
and weather patterns. The accurate segmentation of clouds
in these images is a challenging task, as clouds do not pos-
sess any clear structure. Several algorithms using different
color models have been proposed in the literature. This pa-
per presents a systematic approach for the selection of color
spaces and components for optimal segmentation of sky/cloud
images. Using mainly principal component analysis (PCA)
and fuzzy clustering for evaluation, we identify the most suit-
able color components for this task.

Index Terms— Remote sensing, Image segmentation,

Color spaces, Principal Component Analysis, Clustering

segmentation of sky/cloud images. For this purpose, we make
use of color distribution characteristics, principal component
analysis (PCA), and clustering methods.1 For our evalua-
tion, we use the HYTA image database [6], which contains 32
sky/cloud images with segmentation ground truth. Our com-
prehensive analysis is able to clearly identify the most suitable
color models and components for the analysis of cloud/sky
images.

The paper is structured as follows. Section 2 describes
our approach, including the color models, techniques, tools,
and database used for the subsequent evaluation. Section 3
presents the results of the quantitative performance compari-
son. Section 4 concludes the paper.

2. APPROACH & TOOLS

1. INTRODUCTION

2.1. Color Models

Cloud analysis plays an important role in weather prediction,
climate modeling, solar irradiation measurement for renew-
able energy generation, and analysis of signal attenuation in
satellite and other space-to-ground communications [1]. The
conventional manner of performing such cloud analysis via
geo-stationary satellite images does not provide sufﬁcient res-
olution for some of these applications. Ground-based Whole
Sky Imagers (WSIs) can provide higher spatial and tempo-
ral resolution for highly-localized cloud analysis, and several
types have been developed [2–5].

The detection of clouds from sky images is challenging as
clouds do not possess any deﬁnite structure, contour, shape, or
size. As a result, color has been used as the predominant fea-
ture for sky/cloud segmentation. Numerous techniques based
on different color models and spectral wavelengths have been
proposed in the literature to solve this problem. However, the
selection of color models and channels in the existing algo-
rithms seem ad-hoc in manner, without systematic analysis or
comparison. This paper aims to address this issue by provid-
ing a structured review and evaluation of color models for the

In the literature, several techniques based on different color
models have been proposed for sky/cloud segmentation. Long
et al. [4] use the ratio of red and blue channels (R/B) to
detect clouds using appropriate threshold values. Calbó and
Sabburg [7] use the same (R/B) ratio to derive statistical fea-
tures (mean, standard deviation, entropy etc.) of the clouds
and subsequently classify the sky/cloud images into different
cloud types. Heinle et al. [8] utilize a k-nearest-neighbor clas-
siﬁer using the difference of red and blue channels (R − B) to
classify cloud types. Souza-Echer et al. [3] choose saturation
for the estimation of cloud coverage. Mantelli-Neto et al. [9]
classify clouds by exploiting the locus of pixels in the RGB
color model. Most recently, Li et al. use a normalized differ-
ence of blue and red channels ( B−R
B+R ) [6] for cloud detection.
The choices of color models employed in existing papers
are based on empirical observations about the color distribu-
tions of cloud and sky pixels. However, there exists no sys-
tematic analysis to determine the most suitable color chan-
nel(s) for this purpose. The purpose of this paper is to present
a uniﬁed approach in the analysis of sky/cloud images us-

This research is funded by the Defence Science and Technology Agency

1 The source code of all simulations in this paper is available online at

(DSTA), Singapore.

https://github.com/Soumyabrata/color-channels.

c1 R c4 H c7 Y c10 L∗
c11 a∗
c2 G c5 S
b∗
c3 B c6 V c9 Q c12

c8

I

c13 R/B
c14 R − B
B−R
c15
B+R

c16 C

new image representation ¨Xi with zero mean and unit vari-
ance:

Table 1: Color spaces and components used for analysis.

ing different color channels and to identify the color channels
with the best results.

We consider the following color spaces and components
for analysis (see Table 1): RGB, HSV, YIQ, CIE L∗a∗b∗,
three forms of red-blue combinations (R/B, R − B, B−R
B+R ),
and chroma C = max(R, G, B) − min(R, G, B). In addition
to the color channels c1−9 and c13−16 used in the existing
literature, we also include c10−12 and c16, as separating chro-
matic and achromatic information may prove beneﬁcial for
sky/cloud image segmentation.

2.2. Color Distribution

Since we are essentially trying to distinguish between two
classes of pixels (sky and clouds), a color model with a bi-
modal distribution can facilitate this task. Color components
with a high degree of bimodality are not only good candidates
for determining the number of clusters in a sample image, but
can also be used to decide whether or not the sample image
requires segmentation in the ﬁrst place. Pearson’s Bimodal-
ity Index (PBI) is a popular statistic to evaluate the bimodal
behavior quantitatively [10]. It is deﬁned as:

PBI = b2 − b1,

(1)

¨Xi = [

c1 − ¯c1
σc1

,

c2 − ¯c2
σc2

, ..,

cj − ¯cj
σcj

, ..,

c16 − ¯c16
σc16

]

(3)

Subsequently the covariance matrix Mi is computed for
each of the ¨Xi. Let the eigenvector eij and eigenvalue λij
(j = 1, ..., 16) be obtained from the eigenvalue decomposi-
tion of the matrix Mi. For the ith image, the eigenvectors
eij corresponding to the largest eigenvalues λij encompass
an orthonormal vector subspace. The eigenvectors and eigen-
values are calculated to project the multi-dimensional vector
space into lower dimensions and to reveal the underlying re-
lationship amongst them.

2.4. Clustering

For clustering the sky/cloud images, we employ the fuzzy c-
means algorithm [11, 12] to assign probabilities of cloud de-
tection to the set of pixels of the input image. The algorithm
for the effective segmentation of clouds from the sky/cloud
images employs the minimization of the following objective
function:

J =

2
(cid:88)

mn
(cid:88)

r=1

s=1

pr(xs)τ d(xs, vr),

(4)

where τ is called the fuzziness index, which controls the de-
gree of fuzziness during the clustering process; we set τ = 2.
d(xs, vr) denotes the 2D Euclidean norm between the input
vector xs and the cluster centers vr. Both v1 and v2 are vec-
tors of dimension k, where k can take any positive integer
number.

where b2 is the kurtosis and b1 is the square of skewness. A
PBI value close to 1 indicates highly bimodal distributions.

3. EVALUATION & RESULTS

2.3. Principal Component Analysis

We use the Principal Component Analysis (PCA) to (a) check
the correlation and similarity between different color compo-
nents, and (b) determine those color components that capture
the greatest variance.

The PCA is computed as follows. Let us assume a sample
image Xi of dimension m × n pixels from a set of N images
(i = 1, ..., N ). Each color channel of the sample image is re-
shaped into a straight vector cj of dimensions mn × 1. These
column vectors are stacked alongside each other to form a
matrix ˆXi of dimensions mn × 16:

ˆXi = [c1, c2, .., cj.., c16]; j = 1, ..., 16

(2)

The ranges of these 16 color channels are different and
need to be normalized so that no color channel is under- or
over-represented in the PCA analysis. Each of the 16 color
channels is normalized using its mean and standard deviation
across all the images in the dataset, thereby generating the

3.1. Sky/Cloud Image Database

To our knowledge,
the only currently available database
for sky/cloud images with segmentation ground truth is the
HYTA database [6]. It consists of 32 distinct images of vari-
ous sky/cloud conditions. Fig. 1 shows a few sample images
of the HYTA database along with their corresponding binary
ground truth.

3.2. Distribution Bimodality

The segmentation of input image into two classes (sky and
clouds) becomes easier for those color channels which exhibit
higher bimodality. The bimodal behavior of a color channel
for the concatenated distribution is measured using Pearson’s
Bimodality Index (PBI) as described in Section 2.2. The re-
sults are summarized in Table 2. Out of the 16 color chan-
nels, c5 (S), c1 (R), and c13 (R/B) have the lowest PBI and
thus exhibit the most bimodal distributions, indicating that the
segmentation of images into two distinct classes should work
well in these color channels.

Fig. 1: Sample images (top row) along with corresponding
sky/cloud segmentation ground truth (bottom row) from the
HYTA database.

c1 2.24 c4 3.11 c7 2.71 c10 2.86 c13 2.27 c16 4.27
c2 2.83 c5 1.94 c8 3.98 c11 8.85 c14 4.43
c3 3.25 c6 3.26 c9 5.96 c12 4.59 c15 2.92

Table 2: PBI values for all color channels. The most bimodal
channels are highlighted in bold.

3.3. PCA

The distribution of the amount of variance captured by the
principal components is shown in Fig. 2. The combination of
ﬁrst and second principal components capture a large majority
(95.4%) of variance in the input data across the individual
images, and over 90% for the entire database.

important principal component axis, and consequently each
of them has a different contribution to the common variance
captured in the corresponding data matrix ¨Xi. These individ-
ual loading factors are essentially the projections of the input
vectors (color channels) on the principal components. The
signiﬁcant color channels in terms of relative contribution to
the ﬁrst principal component axis are c13 (R/B), c15 ( B−R
B+R ,
and c5 (S).

Extending our analysis to ﬁnding the most signiﬁcant pair
of color channels, we need to understand a pair’s cumulative
contribution to the common variance. The sum of the squares
of the corresponding loading factors for different color chan-
nels in the concatenated distribution represents the cumulative
common variance captured by the pair. The pairs that have the
highest cumulative loading on the ﬁrst principal component
are c13-c15, c5-c13, and c5-c15.

Another aspect to consider is the orthogonality between
the individual color channels. For this purpose, we compute
the triangular area enclosed by two given input vectors (color
channels) projected on the plane spanned by the ﬁrst and sec-
ond principal components. There are (cid:0)16
(cid:1) = 120 combina-
tions of two color channels. The triangular area for all unique
cases is shown in Fig. 3, where the brightness of each square
represents the area captured by the corresponding pair. As
expected, certain color channel pairs (the dark patches) are
highly correlated, for example the green channel (c2) with
most luma channels (c7, c10), the various R-B combinations
(c13−15) with one another, and so on.

2

Fig. 2: Distribution of the variance across the principal com-
ponents for all images of the HYTA database. The separate
bar on the right shows the variance distribution for the con-
catenation of all images of the entire database.

In order to ﬁnd the most signiﬁcant vector for the detec-
tion of clouds, the contributing effect of the individual vari-
ables on the primary principal component axis is analyzed.
Every color channel has different loading factors on the most

Fig. 3: Distribution of area AOB for all input vector pairs,
where OA and OB are two color channels. The brightness of
each square represents the area captured by the corresponding
pair.

3.4. Clustering

In order to verify the efﬁcacy of speciﬁc color channels in
the detection of cloud pixels, 1D and 2D clustering results
are presented across all 16 color channels for all the images
of HYTA and evaluated using precision, recall, and F-score.
Since the ground truth provided by the HYTA database are
binary images consisting of two classes, namely sky and
cloud, we convert the probabilistic distribution of cloud pix-
els pr(xs) (cf. Section 2.4) to a binary image by thresholding,
i.e. a pixel having a probability of cloud > 50% is assigned
to a cloud pixel and others to sky pixels.

2

There are 16 color channels for 1D clustering. In a similar
(cid:1) unique color channel combinations for
manner, there are (cid:0)16
2D-clustering. Their performance is illustrated in Fig. 4 in an
upper-triangular grid, where the intensity of a particular grid
denotes the F-score of that particular color channel pair; the
diagonal elements represent the F-scores of the correspond-
ing 1D color channels. The most promising color channels
for 1D-clustering are c13 (R/B), c15 ( B−R
B+R ), and c5 (S) with
high precision, recall, and F-scores. For 2D, the best combi-
nations include c5-c8, c8-c13, and c8-c15 (c8 representing es-
sentially another variety of red-blue difference), with several
other close contenders.

hibit a highly bimodal behavior, are relatively good indicators
of clustering performance. We also found the loading factors
of the ﬁrst eigenvector (i.e. the re-projection of the data points
on the ﬁrst principal component) to be a reasonable guide for
the choice of good color models; the goodness of ﬁt between
loading factors and corresponding F-scores from clustering is
high (R2=0.62).

The pairs c13-c15, c5-c13 and c5-c15 that came out on top
in Section 3.3 also rank highly in terms of 2D-clustering per-
formance. However, there is hardly any performance gain
from using two color components rather than just one.

As a ﬁnal comparison, the precision, recall, and F-scores
of the best color channels are plotted in Fig. 5 against the out-
put of a recently proposed cloud detection algorithm [6]. The
data show that a basic 1D clustering method on the most suit-
able color components and without any tuning or adaptation
can achieve a performance that is on par with a much more
complex state-of-the-art sky/cloud segmentation method.

Fig. 5: Precision, recall and F-scores for 1D and 2D cluster-
ing compared with a state-of-the-art cloud/sky segmentation
algorithm [6].

4. CONCLUSIONS

We presented a systematic analysis of color channels for the
detection of clouds from sky/cloud images using distribution
bimodality, PCA, and clustering. Experimental evaluation
with a cloud segmentation database yields consistent results
across analysis methods. Clustering results obtained using
the best 1D color channels or 2D color channel pairs (includ-
ing red-blue combinations R/B and B−R
B+R , saturation S, or
in-phase component I) are on par with the performance of a
current state-of-the-art cloud detection algorithm in terms of
precision, recall, and F-scores. Future work will involve the
additional use of texture and other features to classify clouds
into different genera as identiﬁed by World Meteorological
Organization.

Fig. 4: F-Scores for all unique cases of 1D (along the diago-
nal) and 2D clustering, represented on a brightness scale. The
highest F-Scores for 1D (dotted frames) and 2D cases (bold
frames) are indicated numerically.

3.5. Discussion

The clustering results as illustrated in Section 3.4 conﬁrm the
efﬁcacy of the color channels determined earlier in Section
3.3. Color channels c5(S), c1 (R), and c13 (R/B), which ex-

5. REFERENCES

[1] J. X. Yeo, Y. H. Lee, and J. T. Ong, “Performance of site
diversity investigated through RADAR derived results,”
IEEE Transactions on Antennas and Propagation, vol.
59, no. 10, pp. 3890–3898, October 2011.

[2] J. E. Shields, M. E. Karr, R. W. Johnson, and A. R. Bur-
den, “Day/night whole sky imagers for 24-h cloud and
sky assessment: history and overview,” Applied Optics,
2013.

[3] M. P. Souza-Echer, E. B. Pereira, L. S. Bins, and
M. A. R. Andrade, “A simple method for the assess-
ment of the cloud cover state in high-latitude regions by
a ground-based digital camera,” Journal of Atmospheric
and Oceanic Technology, vol. 23, no. 3, pp. 437–447,
March 2006.

[4] C. N. Long, J. M. Sabburg, J. Calbó, and D. Pages, “Re-
trieving cloud characteristics from ground-based day-
time color all-sky images,” Journal of Atmospheric and
Oceanic Technology, vol. 23, no. 5, pp. 633–652, 2006.

[5] S. Dev, F. M. Savoy, Y. H. Lee, and S. Winkler,
“WAHRSIS: A low-cost, high-resolution whole sky
in Proc.
imager with near-infrared capabilities,”
IS&T/SPIE Infrared Imaging Systems, 2014.

[6] Q. Li, W. Lu, and J. Yang, “A hybrid thresholding al-
gorithm for cloud detection on ground-based color im-

ages,” Journal of Atmospheric and Oceanic Technology,
vol. 28, no. 10, pp. 1286–1296, Oct. 2011.

[7] J. Calbó and J. Sabburg,

“Feature extraction from
whole-sky ground-based images for cloud-type recogni-
tion,” Journal of Atmospheric and Oceanic Technology,
vol. 25, no. 1, pp. 3–14, Jan. 2008.

[8] A. Heinle, A. Macke, and A. Srivastav,

“Automatic
cloud classiﬁcation of whole sky images,” Atmospheric
Measurement Techniques, vol. 3, no. 3, pp. 557–567,
2010.

[9] S. L. Mantelli-Neto, A. von Wangenheim, E. B. Pereira,
and E. Comunello, “The use of Euclidean geometric
distance on RGB color space for the classiﬁcation of
sky and cloud patterns,” Journal of Atmospheric and
Oceanic Technology, vol. 27, no. 9, pp. 1504–1517,
2010.

[10] T. R. Knapp, “Bimodality revisited,” Journal of Modern

Applied Statistical Methods, vol. 6, no. 1, pp. 3, 2007.

[11] J. C. Bezdek, R. Ehrlich, and W. Full,

“FCM: The
fuzzy c-means clustering algorithm,” Computers &
Geosciences, vol. 10, no. 2-3, pp. 191–203, 1984.

[12] C. V. Jawahar, P. K. Biswas, and A. K. Ray, “Investiga-
tions on fuzzy thresholding based on fuzzy clustering,”
vol. 30, no. 10, pp. 1605–1613, Oct. 1997.

